const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DWCJs3lT.js","assets/react-vendor-CrN4sS5V.js","assets/index-C-1Y3Wvk.js","assets/solanaEmbed.esm-M4qwTECa.js"])))=>i.map(i=>d[i]);
var mp=Object.defineProperty;var Su=n=>{throw TypeError(n)};var gp=(n,e,t)=>e in n?mp(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var _t=(n,e,t)=>gp(n,typeof e!="symbol"?e+"":e,t),ba=(n,e,t)=>e.has(n)||Su("Cannot "+t);var G=(n,e,t)=>(ba(n,e,"read from private field"),t?t.call(n):e.get(n)),me=(n,e,t)=>e.has(n)?Su("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),de=(n,e,t,r)=>(ba(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),Ee=(n,e,t)=>(ba(n,e,"access private method"),t);var Ci=(n,e,t,r)=>({set _(s){de(n,e,s,t)},get _(){return G(n,e,r)}});import{r as yp,a as wp,g as jr,b as I,u as Eo,c as Bl,N as Oc,d as Ol,R as J,e as Zh,L as No,t as Eu,f as bp,B as xp,h as vp,i as Qt}from"./react-vendor-CrN4sS5V.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();var xa={exports:{}},Vs={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nu;function Sp(){if(Nu)return Vs;Nu=1;var n=yp(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(a,c,d){var h,p={},x=null,y=null;d!==void 0&&(x=""+d),c.key!==void 0&&(x=""+c.key),c.ref!==void 0&&(y=c.ref);for(h in c)r.call(c,h)&&!i.hasOwnProperty(h)&&(p[h]=c[h]);if(a&&a.defaultProps)for(h in c=a.defaultProps,c)p[h]===void 0&&(p[h]=c[h]);return{$$typeof:e,type:a,key:x,ref:y,props:p,_owner:s.current}}return Vs.Fragment=t,Vs.jsx=o,Vs.jsxs=o,Vs}var Mu;function Ep(){return Mu||(Mu=1,xa.exports=Sp()),xa.exports}var l=Ep(),Ti={},ju;function Np(){if(ju)return Ti;ju=1;var n=wp();return Ti.createRoot=n.createRoot,Ti.hydrateRoot=n.hydrateRoot,Ti}var Mp=Np();const jp=jr(Mp);var $s=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Zr=typeof window>"u"||"Deno"in globalThis;function un(){}function Ap(n,e){return typeof n=="function"?n(e):n}function Dc(n){return typeof n=="number"&&n>=0&&n!==1/0}function Jh(n,e){return Math.max(n+(e||0)-Date.now(),0)}function bs(n,e){return typeof n=="function"?n(e):n}function wn(n,e){return typeof n=="function"?n(e):n}function Au(n,e){const{type:t="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=n;if(o){if(r){if(e.queryHash!==Dl(o,e.options))return!1}else if(!ui(e.queryKey,o))return!1}if(t!=="all"){const c=e.isActive();if(t==="active"&&!c||t==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function Iu(n,e){const{exact:t,status:r,predicate:s,mutationKey:i}=n;if(i){if(!e.options.mutationKey)return!1;if(t){if(Jr(e.options.mutationKey)!==Jr(i))return!1}else if(!ui(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Dl(n,e){return((e==null?void 0:e.queryKeyHashFn)||Jr)(n)}function Jr(n){return JSON.stringify(n,(e,t)=>Pc(t)?Object.keys(t).sort().reduce((r,s)=>(r[s]=t[s],r),{}):t)}function ui(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!ui(n[t],e[t])):!1}function Xh(n,e){if(n===e)return n;const t=Cu(n)&&Cu(e);if(t||Pc(n)&&Pc(e)){const r=t?n:Object.keys(n),s=r.length,i=t?e:Object.keys(e),o=i.length,a=t?[]:{};let c=0;for(let d=0;d<o;d++){const h=t?d:i[d];(!t&&r.includes(h)||t)&&n[h]===void 0&&e[h]===void 0?(a[h]=void 0,c++):(a[h]=Xh(n[h],e[h]),a[h]===n[h]&&n[h]!==void 0&&c++)}return s===o&&c===s?n:a}return e}function io(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function Cu(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function Pc(n){if(!Tu(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!Tu(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function Tu(n){return Object.prototype.toString.call(n)==="[object Object]"}function Ip(n){return new Promise(e=>{setTimeout(e,n)})}function Fc(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?Xh(n,e):e}function Cp(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function Tp(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var Pl=Symbol();function ef(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===Pl?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var zr,hr,Es,zh,_p=(zh=class extends $s{constructor(){super();me(this,zr);me(this,hr);me(this,Es);de(this,Es,e=>{if(!Zr&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){G(this,hr)||this.setEventListener(G(this,Es))}onUnsubscribe(){var e;this.hasListeners()||((e=G(this,hr))==null||e.call(this),de(this,hr,void 0))}setEventListener(e){var t;de(this,Es,e),(t=G(this,hr))==null||t.call(this),de(this,hr,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){G(this,zr)!==e&&(de(this,zr,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof G(this,zr)=="boolean"?G(this,zr):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},zr=new WeakMap,hr=new WeakMap,Es=new WeakMap,zh),Fl=new _p,Ns,fr,Ms,$h,kp=($h=class extends $s{constructor(){super();me(this,Ns,!0);me(this,fr);me(this,Ms);de(this,Ms,e=>{if(!Zr&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){G(this,fr)||this.setEventListener(G(this,Ms))}onUnsubscribe(){var e;this.hasListeners()||((e=G(this,fr))==null||e.call(this),de(this,fr,void 0))}setEventListener(e){var t;de(this,Ms,e),(t=G(this,fr))==null||t.call(this),de(this,fr,e(this.setOnline.bind(this)))}setOnline(e){G(this,Ns)!==e&&(de(this,Ns,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return G(this,Ns)}},Ns=new WeakMap,fr=new WeakMap,Ms=new WeakMap,$h),oo=new kp;function Uc(){let n,e;const t=new Promise((s,i)=>{n=s,e=i});t.status="pending",t.catch(()=>{});function r(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{r({status:"fulfilled",value:s}),n(s)},t.reject=s=>{r({status:"rejected",reason:s}),e(s)},t}function Lp(n){return Math.min(1e3*2**n,3e4)}function tf(n){return(n??"online")==="online"?oo.isOnline():!0}var nf=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function va(n){return n instanceof nf}function rf(n){let e=!1,t=0,r=!1,s;const i=Uc(),o=g=>{var S;r||(x(new nf(g)),(S=n.abort)==null||S.call(n))},a=()=>{e=!0},c=()=>{e=!1},d=()=>Fl.isFocused()&&(n.networkMode==="always"||oo.isOnline())&&n.canRun(),h=()=>tf(n.networkMode)&&n.canRun(),p=g=>{var S;r||(r=!0,(S=n.onSuccess)==null||S.call(n,g),s==null||s(),i.resolve(g))},x=g=>{var S;r||(r=!0,(S=n.onError)==null||S.call(n,g),s==null||s(),i.reject(g))},y=()=>new Promise(g=>{var S;s=A=>{(r||d())&&g(A)},(S=n.onPause)==null||S.call(n)}).then(()=>{var g;s=void 0,r||(g=n.onContinue)==null||g.call(n)}),E=()=>{if(r)return;let g;const S=t===0?n.initialPromise:void 0;try{g=S??n.fn()}catch(A){g=Promise.reject(A)}Promise.resolve(g).then(p).catch(A=>{var z;if(r)return;const k=n.retry??(Zr?0:3),M=n.retryDelay??Lp,O=typeof M=="function"?M(t,A):M,B=k===!0||typeof k=="number"&&t<k||typeof k=="function"&&k(t,A);if(e||!B){x(A);return}t++,(z=n.onFail)==null||z.call(n,t,A),Ip(O).then(()=>d()?void 0:y()).then(()=>{e?x(A):E()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:h,start:()=>(h()?E():y().then(E),i)}}function Rp(){let n=[],e=0,t=a=>{a()},r=a=>{a()},s=a=>setTimeout(a,0);const i=a=>{e?n.push(a):s(()=>{t(a)})},o=()=>{const a=n;n=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{t(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var It=Rp(),$r,qh,sf=(qh=class{constructor(){me(this,$r)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Dc(this.gcTime)&&de(this,$r,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(Zr?1/0:5*60*1e3))}clearGcTimeout(){G(this,$r)&&(clearTimeout(G(this,$r)),de(this,$r,void 0))}},$r=new WeakMap,qh),js,As,ln,qr,Wt,yi,Wr,gn,Bn,Wh,Bp=(Wh=class extends sf{constructor(e){super();me(this,gn);me(this,js);me(this,As);me(this,ln);me(this,qr);me(this,Wt);me(this,yi);me(this,Wr);de(this,Wr,!1),de(this,yi,e.defaultOptions),this.setOptions(e.options),this.observers=[],de(this,qr,e.client),de(this,ln,G(this,qr).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,de(this,js,Op(this.options)),this.state=e.state??G(this,js),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=G(this,Wt))==null?void 0:e.promise}setOptions(e){this.options={...G(this,yi),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&G(this,ln).remove(this)}setData(e,t){const r=Fc(this.state.data,e,this.options);return Ee(this,gn,Bn).call(this,{data:r,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),r}setState(e,t){Ee(this,gn,Bn).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var r,s;const t=(r=G(this,Wt))==null?void 0:r.promise;return(s=G(this,Wt))==null||s.cancel(e),t?t.then(un).catch(un):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(G(this,js))}isActive(){return this.observers.some(e=>wn(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Pl||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!Jh(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=G(this,Wt))==null||t.continue()}onOnline(){var t;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=G(this,Wt))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),G(this,ln).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(G(this,Wt)&&(G(this,Wr)?G(this,Wt).cancel({revert:!0}):G(this,Wt).cancelRetry()),this.scheduleGc()),G(this,ln).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ee(this,gn,Bn).call(this,{type:"invalidate"})}fetch(e,t){var c,d,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(G(this,Wt))return G(this,Wt).continueRetry(),G(this,Wt).promise}if(e&&this.setOptions(e),!this.options.queryFn){const p=this.observers.find(x=>x.options.queryFn);p&&this.setOptions(p.options)}const r=new AbortController,s=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(de(this,Wr,!0),r.signal)})},i=()=>{const p=ef(this.options,t),x={client:G(this,qr),queryKey:this.queryKey,meta:this.meta};return s(x),de(this,Wr,!1),this.options.persister?this.options.persister(p,x,this):p(x)},o={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:G(this,qr),state:this.state,fetchFn:i};s(o),(c=this.options.behavior)==null||c.onFetch(o,this),de(this,As,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=o.fetchOptions)==null?void 0:d.meta))&&Ee(this,gn,Bn).call(this,{type:"fetch",meta:(h=o.fetchOptions)==null?void 0:h.meta});const a=p=>{var x,y,E,g;va(p)&&p.silent||Ee(this,gn,Bn).call(this,{type:"error",error:p}),va(p)||((y=(x=G(this,ln).config).onError)==null||y.call(x,p,this),(g=(E=G(this,ln).config).onSettled)==null||g.call(E,this.state.data,p,this)),this.scheduleGc()};return de(this,Wt,rf({initialPromise:t==null?void 0:t.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:p=>{var x,y,E,g;if(p===void 0){a(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(S){a(S);return}(y=(x=G(this,ln).config).onSuccess)==null||y.call(x,p,this),(g=(E=G(this,ln).config).onSettled)==null||g.call(E,p,this.state.error,this),this.scheduleGc()},onError:a,onFail:(p,x)=>{Ee(this,gn,Bn).call(this,{type:"failed",failureCount:p,error:x})},onPause:()=>{Ee(this,gn,Bn).call(this,{type:"pause"})},onContinue:()=>{Ee(this,gn,Bn).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),G(this,Wt).start()}},js=new WeakMap,As=new WeakMap,ln=new WeakMap,qr=new WeakMap,Wt=new WeakMap,yi=new WeakMap,Wr=new WeakMap,gn=new WeakSet,Bn=function(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...of(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return va(s)&&s.revert&&G(this,As)?{...G(this,As),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),It.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),G(this,ln).notify({query:this,type:"updated",action:e})})},Wh);function of(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:tf(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function Op(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Mn,Hh,Dp=(Hh=class extends $s{constructor(e={}){super();me(this,Mn);this.config=e,de(this,Mn,new Map)}build(e,t,r){const s=t.queryKey,i=t.queryHash??Dl(s,t);let o=this.get(i);return o||(o=new Bp({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){G(this,Mn).has(e.queryHash)||(G(this,Mn).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=G(this,Mn).get(e.queryHash);t&&(e.destroy(),t===e&&G(this,Mn).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){It.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return G(this,Mn).get(e)}getAll(){return[...G(this,Mn).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>Au(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>Au(e,r)):t}notify(e){It.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){It.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){It.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Mn=new WeakMap,Hh),jn,Ht,Hr,An,ar,Kh,Pp=(Kh=class extends sf{constructor(e){super();me(this,An);me(this,jn);me(this,Ht);me(this,Hr);this.mutationId=e.mutationId,de(this,Ht,e.mutationCache),de(this,jn,[]),this.state=e.state||af(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){G(this,jn).includes(e)||(G(this,jn).push(e),this.clearGcTimeout(),G(this,Ht).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){de(this,jn,G(this,jn).filter(t=>t!==e)),this.scheduleGc(),G(this,Ht).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){G(this,jn).length||(this.state.status==="pending"?this.scheduleGc():G(this,Ht).remove(this))}continue(){var e;return((e=G(this,Hr))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var s,i,o,a,c,d,h,p,x,y,E,g,S,A,k,M,O,B,z,V;de(this,Hr,rf({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(H,F)=>{Ee(this,An,ar).call(this,{type:"failed",failureCount:H,error:F})},onPause:()=>{Ee(this,An,ar).call(this,{type:"pause"})},onContinue:()=>{Ee(this,An,ar).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>G(this,Ht).canRun(this)}));const t=this.state.status==="pending",r=!G(this,Hr).canStart();try{if(!t){Ee(this,An,ar).call(this,{type:"pending",variables:e,isPaused:r}),await((i=(s=G(this,Ht).config).onMutate)==null?void 0:i.call(s,e,this));const F=await((a=(o=this.options).onMutate)==null?void 0:a.call(o,e));F!==this.state.context&&Ee(this,An,ar).call(this,{type:"pending",context:F,variables:e,isPaused:r})}const H=await G(this,Hr).start();return await((d=(c=G(this,Ht).config).onSuccess)==null?void 0:d.call(c,H,e,this.state.context,this)),await((p=(h=this.options).onSuccess)==null?void 0:p.call(h,H,e,this.state.context)),await((y=(x=G(this,Ht).config).onSettled)==null?void 0:y.call(x,H,null,this.state.variables,this.state.context,this)),await((g=(E=this.options).onSettled)==null?void 0:g.call(E,H,null,e,this.state.context)),Ee(this,An,ar).call(this,{type:"success",data:H}),H}catch(H){try{throw await((A=(S=G(this,Ht).config).onError)==null?void 0:A.call(S,H,e,this.state.context,this)),await((M=(k=this.options).onError)==null?void 0:M.call(k,H,e,this.state.context)),await((B=(O=G(this,Ht).config).onSettled)==null?void 0:B.call(O,void 0,H,this.state.variables,this.state.context,this)),await((V=(z=this.options).onSettled)==null?void 0:V.call(z,void 0,H,e,this.state.context)),H}finally{Ee(this,An,ar).call(this,{type:"error",error:H})}}finally{G(this,Ht).runNext(this)}}},jn=new WeakMap,Ht=new WeakMap,Hr=new WeakMap,An=new WeakSet,ar=function(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),It.batch(()=>{G(this,jn).forEach(r=>{r.onMutationUpdate(e)}),G(this,Ht).notify({mutation:this,type:"updated",action:e})})},Kh);function af(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Dn,yn,wi,Vh,Fp=(Vh=class extends $s{constructor(e={}){super();me(this,Dn);me(this,yn);me(this,wi);this.config=e,de(this,Dn,new Set),de(this,yn,new Map),de(this,wi,0)}build(e,t,r){const s=new Pp({mutationCache:this,mutationId:++Ci(this,wi)._,options:e.defaultMutationOptions(t),state:r});return this.add(s),s}add(e){G(this,Dn).add(e);const t=_i(e);if(typeof t=="string"){const r=G(this,yn).get(t);r?r.push(e):G(this,yn).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(G(this,Dn).delete(e)){const t=_i(e);if(typeof t=="string"){const r=G(this,yn).get(t);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&G(this,yn).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=_i(e);if(typeof t=="string"){const r=G(this,yn).get(t),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const t=_i(e);if(typeof t=="string"){const s=(r=G(this,yn).get(t))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){It.batch(()=>{G(this,Dn).forEach(e=>{this.notify({type:"removed",mutation:e})}),G(this,Dn).clear(),G(this,yn).clear()})}getAll(){return Array.from(G(this,Dn))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>Iu(t,r))}findAll(e={}){return this.getAll().filter(t=>Iu(e,t))}notify(e){It.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return It.batch(()=>Promise.all(e.map(t=>t.continue().catch(un))))}},Dn=new WeakMap,yn=new WeakMap,wi=new WeakMap,Vh);function _i(n){var e;return(e=n.options.scope)==null?void 0:e.id}function _u(n){return{onFetch:(e,t)=>{var h,p,x,y,E;const r=e.options,s=(x=(p=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:p.fetchMore)==null?void 0:x.direction,i=((y=e.state.data)==null?void 0:y.pages)||[],o=((E=e.state.data)==null?void 0:E.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const d=async()=>{let g=!1;const S=M=>{Object.defineProperty(M,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},A=ef(e.options,e.fetchOptions),k=async(M,O,B)=>{if(g)return Promise.reject();if(O==null&&M.pages.length)return Promise.resolve(M);const z={client:e.client,queryKey:e.queryKey,pageParam:O,direction:B?"backward":"forward",meta:e.options.meta};S(z);const V=await A(z),{maxPages:H}=e.options,F=B?Tp:Cp;return{pages:F(M.pages,V,H),pageParams:F(M.pageParams,O,H)}};if(s&&i.length){const M=s==="backward",O=M?Up:ku,B={pages:i,pageParams:o},z=O(r,B);a=await k(B,z,M)}else{const M=n??i.length;do{const O=c===0?o[0]??r.initialPageParam:ku(r,a);if(c>0&&O==null)break;a=await k(a,O),c++}while(c<M)}return a};e.options.persister?e.fetchFn=()=>{var g,S;return(S=(g=e.options).persister)==null?void 0:S.call(g,d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=d}}}function ku(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function Up(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var tt,pr,mr,Is,Cs,gr,Ts,_s,Gh,zp=(Gh=class{constructor(n={}){me(this,tt);me(this,pr);me(this,mr);me(this,Is);me(this,Cs);me(this,gr);me(this,Ts);me(this,_s);de(this,tt,n.queryCache||new Dp),de(this,pr,n.mutationCache||new Fp),de(this,mr,n.defaultOptions||{}),de(this,Is,new Map),de(this,Cs,new Map),de(this,gr,0)}mount(){Ci(this,gr)._++,G(this,gr)===1&&(de(this,Ts,Fl.subscribe(async n=>{n&&(await this.resumePausedMutations(),G(this,tt).onFocus())})),de(this,_s,oo.subscribe(async n=>{n&&(await this.resumePausedMutations(),G(this,tt).onOnline())})))}unmount(){var n,e;Ci(this,gr)._--,G(this,gr)===0&&((n=G(this,Ts))==null||n.call(this),de(this,Ts,void 0),(e=G(this,_s))==null||e.call(this),de(this,_s,void 0))}isFetching(n){return G(this,tt).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return G(this,pr).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=G(this,tt).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=G(this,tt).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(bs(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return G(this,tt).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),s=G(this,tt).get(r.queryHash),i=s==null?void 0:s.state.data,o=Ap(e,i);if(o!==void 0)return G(this,tt).build(this,r).setData(o,{...t,manual:!0})}setQueriesData(n,e,t){return It.batch(()=>G(this,tt).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=G(this,tt).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=G(this,tt);It.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=G(this,tt),r={type:"active",...n};return It.batch(()=>(t.findAll(n).forEach(s=>{s.reset()}),this.refetchQueries(r,e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=It.batch(()=>G(this,tt).findAll(n).map(s=>s.cancel(t)));return Promise.all(r).then(un).catch(un)}invalidateQueries(n,e={}){return It.batch(()=>{if(G(this,tt).findAll(n).forEach(r=>{r.invalidate()}),(n==null?void 0:n.refetchType)==="none")return Promise.resolve();const t={...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"};return this.refetchQueries(t,e)})}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=It.batch(()=>G(this,tt).findAll(n).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,t);return t.throwOnError||(i=i.catch(un)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(un)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=G(this,tt).build(this,e);return t.isStaleByTime(bs(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(un).catch(un)}fetchInfiniteQuery(n){return n.behavior=_u(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(un).catch(un)}ensureInfiniteQueryData(n){return n.behavior=_u(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return oo.isOnline()?G(this,pr).resumePausedMutations():Promise.resolve()}getQueryCache(){return G(this,tt)}getMutationCache(){return G(this,pr)}getDefaultOptions(){return G(this,mr)}setDefaultOptions(n){de(this,mr,n)}setQueryDefaults(n,e){G(this,Is).set(Jr(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...G(this,Is).values()],t={};return e.forEach(r=>{ui(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){G(this,Cs).set(Jr(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...G(this,Cs).values()];let t={};return e.forEach(r=>{ui(n,r.mutationKey)&&(t={...t,...r.defaultOptions})}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...G(this,mr).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=Dl(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Pl&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...G(this,mr).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){G(this,tt).clear(),G(this,pr).clear()}},tt=new WeakMap,pr=new WeakMap,mr=new WeakMap,Is=new WeakMap,Cs=new WeakMap,gr=new WeakMap,Ts=new WeakMap,_s=new WeakMap,Gh),Jt,_e,bi,Kt,Kr,ks,yr,In,xi,Ls,Rs,Vr,Gr,wr,Bs,Be,ti,zc,$c,qc,Wc,Hc,Kc,Vc,cf,Yh,$p=(Yh=class extends $s{constructor(e,t){super();me(this,Be);me(this,Jt);me(this,_e);me(this,bi);me(this,Kt);me(this,Kr);me(this,ks);me(this,yr);me(this,In);me(this,xi);me(this,Ls);me(this,Rs);me(this,Vr);me(this,Gr);me(this,wr);me(this,Bs,new Set);this.options=t,de(this,Jt,e),de(this,In,null),de(this,yr,Uc()),this.options.experimental_prefetchInRender||G(this,yr).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(G(this,_e).addObserver(this),Lu(G(this,_e),this.options)?Ee(this,Be,ti).call(this):this.updateResult(),Ee(this,Be,Wc).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Gc(G(this,_e),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Gc(G(this,_e),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ee(this,Be,Hc).call(this),Ee(this,Be,Kc).call(this),G(this,_e).removeObserver(this)}setOptions(e,t){const r=this.options,s=G(this,_e);if(this.options=G(this,Jt).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof wn(this.options.enabled,G(this,_e))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ee(this,Be,Vc).call(this),G(this,_e).setOptions(this.options),r._defaulted&&!io(this.options,r)&&G(this,Jt).getQueryCache().notify({type:"observerOptionsUpdated",query:G(this,_e),observer:this});const i=this.hasListeners();i&&Ru(G(this,_e),s,this.options,r)&&Ee(this,Be,ti).call(this),this.updateResult(t),i&&(G(this,_e)!==s||wn(this.options.enabled,G(this,_e))!==wn(r.enabled,G(this,_e))||bs(this.options.staleTime,G(this,_e))!==bs(r.staleTime,G(this,_e)))&&Ee(this,Be,zc).call(this);const o=Ee(this,Be,$c).call(this);i&&(G(this,_e)!==s||wn(this.options.enabled,G(this,_e))!==wn(r.enabled,G(this,_e))||o!==G(this,wr))&&Ee(this,Be,qc).call(this,o)}getOptimisticResult(e){const t=G(this,Jt).getQueryCache().build(G(this,Jt),e),r=this.createResult(t,e);return Wp(this,r)&&(de(this,Kt,r),de(this,ks,this.options),de(this,Kr,G(this,_e).state)),r}getCurrentResult(){return G(this,Kt)}trackResult(e,t){const r={};return Object.keys(e).forEach(s=>{Object.defineProperty(r,s,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(s),t==null||t(s),e[s])})}),r}trackProp(e){G(this,Bs).add(e)}getCurrentQuery(){return G(this,_e)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=G(this,Jt).defaultQueryOptions(e),r=G(this,Jt).getQueryCache().build(G(this,Jt),t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return Ee(this,Be,ti).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),G(this,Kt)))}createResult(e,t){var H;const r=G(this,_e),s=this.options,i=G(this,Kt),o=G(this,Kr),a=G(this,ks),d=e!==r?e.state:G(this,bi),{state:h}=e;let p={...h},x=!1,y;if(t._optimisticResults){const F=this.hasListeners(),$=!F&&Lu(e,t),q=F&&Ru(e,r,t,s);($||q)&&(p={...p,...of(h.data,e.options)}),t._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:E,errorUpdatedAt:g,status:S}=p;if(t.select&&p.data!==void 0)if(i&&p.data===(o==null?void 0:o.data)&&t.select===G(this,xi))y=G(this,Ls);else try{de(this,xi,t.select),y=t.select(p.data),y=Fc(i==null?void 0:i.data,y,t),de(this,Ls,y),de(this,In,null)}catch(F){de(this,In,F)}else y=p.data;if(t.placeholderData!==void 0&&y===void 0&&S==="pending"){let F;if(i!=null&&i.isPlaceholderData&&t.placeholderData===(a==null?void 0:a.placeholderData))F=i.data;else if(F=typeof t.placeholderData=="function"?t.placeholderData((H=G(this,Rs))==null?void 0:H.state.data,G(this,Rs)):t.placeholderData,t.select&&F!==void 0)try{F=t.select(F),de(this,In,null)}catch($){de(this,In,$)}F!==void 0&&(S="success",y=Fc(i==null?void 0:i.data,F,t),x=!0)}G(this,In)&&(E=G(this,In),y=G(this,Ls),g=Date.now(),S="error");const A=p.fetchStatus==="fetching",k=S==="pending",M=S==="error",O=k&&A,B=y!==void 0,V={status:S,fetchStatus:p.fetchStatus,isPending:k,isSuccess:S==="success",isError:M,isInitialLoading:O,isLoading:O,data:y,dataUpdatedAt:p.dataUpdatedAt,error:E,errorUpdatedAt:g,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>d.dataUpdateCount||p.errorUpdateCount>d.errorUpdateCount,isFetching:A,isRefetching:A&&!k,isLoadingError:M&&!B,isPaused:p.fetchStatus==="paused",isPlaceholderData:x,isRefetchError:M&&B,isStale:Ul(e,t),refetch:this.refetch,promise:G(this,yr)};if(this.options.experimental_prefetchInRender){const F=Y=>{V.status==="error"?Y.reject(V.error):V.data!==void 0&&Y.resolve(V.data)},$=()=>{const Y=de(this,yr,V.promise=Uc());F(Y)},q=G(this,yr);switch(q.status){case"pending":e.queryHash===r.queryHash&&F(q);break;case"fulfilled":(V.status==="error"||V.data!==q.value)&&$();break;case"rejected":(V.status!=="error"||V.error!==q.reason)&&$();break}}return V}updateResult(e){const t=G(this,Kt),r=this.createResult(G(this,_e),this.options);if(de(this,Kr,G(this,_e).state),de(this,ks,this.options),G(this,Kr).data!==void 0&&de(this,Rs,G(this,_e)),io(r,t))return;de(this,Kt,r);const s={},i=()=>{if(!t)return!0;const{notifyOnChangeProps:o}=this.options,a=typeof o=="function"?o():o;if(a==="all"||!a&&!G(this,Bs).size)return!0;const c=new Set(a??G(this,Bs));return this.options.throwOnError&&c.add("error"),Object.keys(G(this,Kt)).some(d=>{const h=d;return G(this,Kt)[h]!==t[h]&&c.has(h)})};(e==null?void 0:e.listeners)!==!1&&i()&&(s.listeners=!0),Ee(this,Be,cf).call(this,{...s,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ee(this,Be,Wc).call(this)}},Jt=new WeakMap,_e=new WeakMap,bi=new WeakMap,Kt=new WeakMap,Kr=new WeakMap,ks=new WeakMap,yr=new WeakMap,In=new WeakMap,xi=new WeakMap,Ls=new WeakMap,Rs=new WeakMap,Vr=new WeakMap,Gr=new WeakMap,wr=new WeakMap,Bs=new WeakMap,Be=new WeakSet,ti=function(e){Ee(this,Be,Vc).call(this);let t=G(this,_e).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(un)),t},zc=function(){Ee(this,Be,Hc).call(this);const e=bs(this.options.staleTime,G(this,_e));if(Zr||G(this,Kt).isStale||!Dc(e))return;const r=Jh(G(this,Kt).dataUpdatedAt,e)+1;de(this,Vr,setTimeout(()=>{G(this,Kt).isStale||this.updateResult()},r))},$c=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(G(this,_e)):this.options.refetchInterval)??!1},qc=function(e){Ee(this,Be,Kc).call(this),de(this,wr,e),!(Zr||wn(this.options.enabled,G(this,_e))===!1||!Dc(G(this,wr))||G(this,wr)===0)&&de(this,Gr,setInterval(()=>{(this.options.refetchIntervalInBackground||Fl.isFocused())&&Ee(this,Be,ti).call(this)},G(this,wr)))},Wc=function(){Ee(this,Be,zc).call(this),Ee(this,Be,qc).call(this,Ee(this,Be,$c).call(this))},Hc=function(){G(this,Vr)&&(clearTimeout(G(this,Vr)),de(this,Vr,void 0))},Kc=function(){G(this,Gr)&&(clearInterval(G(this,Gr)),de(this,Gr,void 0))},Vc=function(){const e=G(this,Jt).getQueryCache().build(G(this,Jt),this.options);if(e===G(this,_e))return;const t=G(this,_e);de(this,_e,e),de(this,bi,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},cf=function(e){It.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(G(this,Kt))}),G(this,Jt).getQueryCache().notify({query:G(this,_e),type:"observerResultsUpdated"})})},Yh);function qp(n,e){return wn(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function Lu(n,e){return qp(n,e)||n.state.data!==void 0&&Gc(n,e,e.refetchOnMount)}function Gc(n,e,t){if(wn(e.enabled,n)!==!1){const r=typeof t=="function"?t(n):t;return r==="always"||r!==!1&&Ul(n,e)}return!1}function Ru(n,e,t,r){return(n!==e||wn(r.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&Ul(n,t)}function Ul(n,e){return wn(e.enabled,n)!==!1&&n.isStaleByTime(bs(e.staleTime,n))}function Wp(n,e){return!io(n.getCurrentResult(),e)}var br,xr,Xt,Pn,Qn,Vi,Yc,Qh,Hp=(Qh=class extends $s{constructor(t,r){super();me(this,Qn);me(this,br);me(this,xr);me(this,Xt);me(this,Pn);de(this,br,t),this.setOptions(r),this.bindMethods(),Ee(this,Qn,Vi).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var s;const r=this.options;this.options=G(this,br).defaultMutationOptions(t),io(this.options,r)||G(this,br).getMutationCache().notify({type:"observerOptionsUpdated",mutation:G(this,Xt),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Jr(r.mutationKey)!==Jr(this.options.mutationKey)?this.reset():((s=G(this,Xt))==null?void 0:s.state.status)==="pending"&&G(this,Xt).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=G(this,Xt))==null||t.removeObserver(this)}onMutationUpdate(t){Ee(this,Qn,Vi).call(this),Ee(this,Qn,Yc).call(this,t)}getCurrentResult(){return G(this,xr)}reset(){var t;(t=G(this,Xt))==null||t.removeObserver(this),de(this,Xt,void 0),Ee(this,Qn,Vi).call(this),Ee(this,Qn,Yc).call(this)}mutate(t,r){var s;return de(this,Pn,r),(s=G(this,Xt))==null||s.removeObserver(this),de(this,Xt,G(this,br).getMutationCache().build(G(this,br),this.options)),G(this,Xt).addObserver(this),G(this,Xt).execute(t)}},br=new WeakMap,xr=new WeakMap,Xt=new WeakMap,Pn=new WeakMap,Qn=new WeakSet,Vi=function(){var r;const t=((r=G(this,Xt))==null?void 0:r.state)??af();de(this,xr,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},Yc=function(t){It.batch(()=>{var r,s,i,o,a,c,d,h;if(G(this,Pn)&&this.hasListeners()){const p=G(this,xr).variables,x=G(this,xr).context;(t==null?void 0:t.type)==="success"?((s=(r=G(this,Pn)).onSuccess)==null||s.call(r,t.data,p,x),(o=(i=G(this,Pn)).onSettled)==null||o.call(i,t.data,null,p,x)):(t==null?void 0:t.type)==="error"&&((c=(a=G(this,Pn)).onError)==null||c.call(a,t.error,p,x),(h=(d=G(this,Pn)).onSettled)==null||h.call(d,void 0,t.error,p,x))}this.listeners.forEach(p=>{p(G(this,xr))})})},Qh),lf=I.createContext(void 0),Mo=n=>{const e=I.useContext(lf);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Kp=({client:n,children:e})=>(I.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),l.jsx(lf.Provider,{value:n,children:e})),uf=I.createContext(!1),Vp=()=>I.useContext(uf);uf.Provider;function Gp(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var Yp=I.createContext(Gp()),Qp=()=>I.useContext(Yp);function df(n,e){return typeof n=="function"?n(...e):!!n}function Qc(){}var Zp=(n,e)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(e.isReset()||(n.retryOnMount=!1))},Jp=n=>{I.useEffect(()=>{n.clearReset()},[n])},Xp=({result:n,errorResetBoundary:e,throwOnError:t,query:r,suspense:s})=>n.isError&&!e.isReset()&&!n.isFetching&&r&&(s&&n.data===void 0||df(t,[n.error,r])),em=n=>{const e=n.staleTime;n.suspense&&(n.staleTime=typeof e=="function"?(...t)=>Math.max(e(...t),1e3):Math.max(e??1e3,1e3),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3)))},tm=(n,e)=>n.isLoading&&n.isFetching&&!e,nm=(n,e)=>(n==null?void 0:n.suspense)&&e.isPending,Bu=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function rm(n,e,t){var p,x,y,E,g;const r=Mo(),s=Vp(),i=Qp(),o=r.defaultQueryOptions(n);(x=(p=r.getDefaultOptions().queries)==null?void 0:p._experimental_beforeQuery)==null||x.call(p,o),o._optimisticResults=s?"isRestoring":"optimistic",em(o),Zp(o,i),Jp(i);const a=!r.getQueryCache().get(o.queryHash),[c]=I.useState(()=>new e(r,o)),d=c.getOptimisticResult(o),h=!s&&n.subscribed!==!1;if(I.useSyncExternalStore(I.useCallback(S=>{const A=h?c.subscribe(It.batchCalls(S)):Qc;return c.updateResult(),A},[c,h]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),I.useEffect(()=>{c.setOptions(o,{listeners:!1})},[o,c]),nm(o,d))throw Bu(o,c,i);if(Xp({result:d,errorResetBoundary:i,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw d.error;if((E=(y=r.getDefaultOptions().queries)==null?void 0:y._experimental_afterQuery)==null||E.call(y,o,d),o.experimental_prefetchInRender&&!Zr&&tm(d,s)){const S=a?Bu(o,c,i):(g=r.getQueryCache().get(o.queryHash))==null?void 0:g.promise;S==null||S.catch(Qc).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?d:c.trackResult(d)}function Zc(n,e){return rm(n,$p)}function Rr(n,e){const t=Mo(),[r]=I.useState(()=>new Hp(t,n));I.useEffect(()=>{r.setOptions(n)},[r,n]);const s=I.useSyncExternalStore(I.useCallback(o=>r.subscribe(It.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=I.useCallback((o,a)=>{r.mutate(o,a).catch(Qc)},[r]);if(s.error&&df(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}const hf=I.createContext(null),sm=({children:n})=>{const[e,t]=I.useState(null),[r,s]=I.useState(!1),[i,o]=I.useState(!0),a=Eo(),c=y=>{console.log("🔄 Updating user data:",y),t(y)},d=async()=>{console.log("🔄 Loading user data...");try{const y=localStorage.getItem("accessToken");if(!y){o(!1);return}const E=await fetch("http://localhost:4000/api/v1/users/me",{headers:{Authorization:`Bearer ${y}`}});if(!E.ok)throw new Error("Failed to load user data");const{data:g}=await E.json();localStorage.setItem("userEmail",g.user.email),c({id:g.user.id,name:g.user.fullName,email:g.user.email,username:g.user.username,phone:g.user.phone,bio:g.user.bio,location:g.user.location,website:g.user.website,walletId:g.user.walletId,createdAt:g.user.createdAt}),s(!0)}catch(y){console.error("Failed to load user data:",y),localStorage.removeItem("accessToken"),localStorage.removeItem("userEmail"),s(!1),t(null)}finally{o(!1)}},h=async(y,E)=>{try{const g=await fetch("http://localhost:4000/api/v1/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:y,password:E}),credentials:"include"});if(!g.ok){const A=await g.json();throw new Error(A.message||"Login failed")}const{data:S}=await g.json();return localStorage.setItem("accessToken",S.accessToken),await d(),S}catch(g){throw console.error("Login error:",g),s(!1),t(null),g}},p=async()=>{try{if(!(await fetch("http://localhost:4000/api/v1/users/logout",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`},credentials:"include"})).ok)throw new Error("Logout failed");localStorage.removeItem("accessToken"),localStorage.removeItem("userEmail"),t(null),s(!1),a("/login")}catch(y){console.error("Logout error:",y),localStorage.removeItem("accessToken"),localStorage.removeItem("userEmail"),t(null),s(!1),a("/login")}};I.useEffect(()=>{d()},[]);const x={user:e,isAuthenticated:r,isLoading:i,login:h,updateUser:c,register:async()=>{},logout:p,refreshToken:async()=>{}};return l.jsx(hf.Provider,{value:x,children:n})},Sn=({children:n})=>{const{user:e,isLoading:t}=Ct(),r=Bl();return t?l.jsx("div",{children:"Loading..."}):e?l.jsx(l.Fragment,{children:n}):l.jsx(Oc,{to:"/login",state:{from:r.pathname},replace:!0})},Ct=()=>{const n=I.useContext(hf);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n};var Sa={exports:{}},Ou;function im(){return Ou||(Ou=1,function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function s(c,d,h){this.fn=c,this.context=d,this.once=h||!1}function i(c,d,h,p,x){if(typeof h!="function")throw new TypeError("The listener must be a function");var y=new s(h,p||c,x),E=t?t+d:d;return c._events[E]?c._events[E].fn?c._events[E]=[c._events[E],y]:c._events[E].push(y):(c._events[E]=y,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new r:delete c._events[d]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var d=[],h,p;if(this._eventsCount===0)return d;for(p in h=this._events)e.call(h,p)&&d.push(t?p.slice(1):p);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(h)):d},a.prototype.listeners=function(d){var h=t?t+d:d,p=this._events[h];if(!p)return[];if(p.fn)return[p.fn];for(var x=0,y=p.length,E=new Array(y);x<y;x++)E[x]=p[x].fn;return E},a.prototype.listenerCount=function(d){var h=t?t+d:d,p=this._events[h];return p?p.fn?1:p.length:0},a.prototype.emit=function(d,h,p,x,y,E){var g=t?t+d:d;if(!this._events[g])return!1;var S=this._events[g],A=arguments.length,k,M;if(S.fn){switch(S.once&&this.removeListener(d,S.fn,void 0,!0),A){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,h),!0;case 3:return S.fn.call(S.context,h,p),!0;case 4:return S.fn.call(S.context,h,p,x),!0;case 5:return S.fn.call(S.context,h,p,x,y),!0;case 6:return S.fn.call(S.context,h,p,x,y,E),!0}for(M=1,k=new Array(A-1);M<A;M++)k[M-1]=arguments[M];S.fn.apply(S.context,k)}else{var O=S.length,B;for(M=0;M<O;M++)switch(S[M].once&&this.removeListener(d,S[M].fn,void 0,!0),A){case 1:S[M].fn.call(S[M].context);break;case 2:S[M].fn.call(S[M].context,h);break;case 3:S[M].fn.call(S[M].context,h,p);break;case 4:S[M].fn.call(S[M].context,h,p,x);break;default:if(!k)for(B=1,k=new Array(A-1);B<A;B++)k[B-1]=arguments[B];S[M].fn.apply(S[M].context,k)}}return!0},a.prototype.on=function(d,h,p){return i(this,d,h,p,!1)},a.prototype.once=function(d,h,p){return i(this,d,h,p,!0)},a.prototype.removeListener=function(d,h,p,x){var y=t?t+d:d;if(!this._events[y])return this;if(!h)return o(this,y),this;var E=this._events[y];if(E.fn)E.fn===h&&(!x||E.once)&&(!p||E.context===p)&&o(this,y);else{for(var g=0,S=[],A=E.length;g<A;g++)(E[g].fn!==h||x&&!E[g].once||p&&E[g].context!==p)&&S.push(E[g]);S.length?this._events[y]=S.length===1?S[0]:S:o(this,y)}return this},a.prototype.removeAllListeners=function(d){var h;return d?(h=t?t+d:d,this._events[h]&&o(this,h)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,n.exports=a}(Sa)),Sa.exports}var om=im();const am=jr(om);class Tt extends Error{constructor(e,t){super(e),this.error=t}}class Vn extends Tt{constructor(){super(...arguments),this.name="WalletNotReadyError"}}class ff extends Tt{constructor(){super(...arguments),this.name="WalletLoadError"}}class Br extends Tt{constructor(){super(...arguments),this.name="WalletConfigError"}}class Wn extends Tt{constructor(){super(...arguments),this.name="WalletConnectionError"}}class jo extends Tt{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}class Ao extends Tt{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}class vr extends Tt{constructor(){super(...arguments),this.name="WalletAccountError"}}class Xr extends Tt{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}class He extends Tt{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}class Cn extends Tt{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class cn extends Tt{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class vi extends Tt{constructor(){super(...arguments),this.name="WalletSignMessageError"}}class Du extends Tt{constructor(){super(...arguments),this.name="WalletSignInError"}}var be;(function(n){n.Installed="Installed",n.NotDetected="NotDetected",n.Loadable="Loadable",n.Unsupported="Unsupported"})(be||(be={}));class pf extends am{get connected(){return!!this.publicKey}async autoConnect(){await this.connect()}async prepareTransaction(e,t,r={}){const s=this.publicKey;if(!s)throw new He;return e.feePayer=e.feePayer||s,e.recentBlockhash=e.recentBlockhash||(await t.getLatestBlockhash({commitment:r.preflightCommitment,minContextSlot:r.minContextSlot})).blockhash,e}}function mf(n){if(typeof window>"u"||typeof document>"u")return;const e=[];function t(){if(n())for(const i of e)i()}const r=setInterval(t,1e3);e.push(()=>clearInterval(r)),document.readyState==="loading"&&(document.addEventListener("DOMContentLoaded",t,{once:!0}),e.push(()=>document.removeEventListener("DOMContentLoaded",t))),document.readyState!=="complete"&&(window.addEventListener("load",t,{once:!0}),e.push(()=>window.removeEventListener("load",t))),t()}function Jc(){if(!navigator)return!1;const n=navigator.userAgent.toLowerCase(),e=n.includes("iphone")||n.includes("ipad"),t=n.includes("safari");return e&&t}function Hn(n){return"version"in n}class cm extends pf{async sendTransaction(e,t,r={}){let s=!0;try{if(Hn(e)){if(!this.supportedTransactionVersions)throw new Cn("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(e.version))throw new Cn(`Sending transaction version ${e.version} isn't supported by this wallet`);try{e=await this.signTransaction(e);const i=e.serialize();return await t.sendRawTransaction(i,r)}catch(i){throw i instanceof cn?(s=!1,i):new Cn(i==null?void 0:i.message,i)}}else try{const{signers:i,...o}=r;e=await this.prepareTransaction(e,t,o),i!=null&&i.length&&e.partialSign(...i),e=await this.signTransaction(e);const a=e.serialize();return await t.sendRawTransaction(a,o)}catch(i){throw i instanceof cn?(s=!1,i):new Cn(i==null?void 0:i.message,i)}}catch(i){throw s&&this.emit("error",i),i}}async signAllTransactions(e){for(const r of e)if(Hn(r)){if(!this.supportedTransactionVersions)throw new cn("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(r.version))throw new cn(`Signing transaction version ${r.version} isn't supported by this wallet`)}const t=[];for(const r of e)t.push(await this.signTransaction(r));return t}}class Io extends cm{}class lm extends Io{}const Fn="solana:signAndSendTransaction",Ea="solana:signIn",ps="solana:signMessage",Lt="solana:signTransaction",zl="standard:connect",Xc="standard:disconnect",$l="standard:events";function um(n){return zl in n.features&&$l in n.features&&(Fn in n.features||Lt in n.features)}var el;(function(n){n.Mainnet="mainnet-beta",n.Testnet="testnet",n.Devnet="devnet"})(el||(el={}));var Na={},Gs={},Pu;function dm(){if(Pu)return Gs;Pu=1,Gs.byteLength=a,Gs.toByteArray=d,Gs.fromByteArray=x;for(var n=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,i=r.length;s<i;++s)n[s]=r[s],e[r.charCodeAt(s)]=s;e[45]=62,e[95]=63;function o(y){var E=y.length;if(E%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var g=y.indexOf("=");g===-1&&(g=E);var S=g===E?0:4-g%4;return[g,S]}function a(y){var E=o(y),g=E[0],S=E[1];return(g+S)*3/4-S}function c(y,E,g){return(E+g)*3/4-g}function d(y){var E,g=o(y),S=g[0],A=g[1],k=new t(c(y,S,A)),M=0,O=A>0?S-4:S,B;for(B=0;B<O;B+=4)E=e[y.charCodeAt(B)]<<18|e[y.charCodeAt(B+1)]<<12|e[y.charCodeAt(B+2)]<<6|e[y.charCodeAt(B+3)],k[M++]=E>>16&255,k[M++]=E>>8&255,k[M++]=E&255;return A===2&&(E=e[y.charCodeAt(B)]<<2|e[y.charCodeAt(B+1)]>>4,k[M++]=E&255),A===1&&(E=e[y.charCodeAt(B)]<<10|e[y.charCodeAt(B+1)]<<4|e[y.charCodeAt(B+2)]>>2,k[M++]=E>>8&255,k[M++]=E&255),k}function h(y){return n[y>>18&63]+n[y>>12&63]+n[y>>6&63]+n[y&63]}function p(y,E,g){for(var S,A=[],k=E;k<g;k+=3)S=(y[k]<<16&16711680)+(y[k+1]<<8&65280)+(y[k+2]&255),A.push(h(S));return A.join("")}function x(y){for(var E,g=y.length,S=g%3,A=[],k=16383,M=0,O=g-S;M<O;M+=k)A.push(p(y,M,M+k>O?O:M+k));return S===1?(E=y[g-1],A.push(n[E>>2]+n[E<<4&63]+"==")):S===2&&(E=(y[g-2]<<8)+y[g-1],A.push(n[E>>10]+n[E>>4&63]+n[E<<2&63]+"=")),A.join("")}return Gs}var ki={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var Fu;function hm(){return Fu||(Fu=1,ki.read=function(n,e,t,r,s){var i,o,a=s*8-r-1,c=(1<<a)-1,d=c>>1,h=-7,p=t?s-1:0,x=t?-1:1,y=n[e+p];for(p+=x,i=y&(1<<-h)-1,y>>=-h,h+=a;h>0;i=i*256+n[e+p],p+=x,h-=8);for(o=i&(1<<-h)-1,i>>=-h,h+=r;h>0;o=o*256+n[e+p],p+=x,h-=8);if(i===0)i=1-d;else{if(i===c)return o?NaN:(y?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-d}return(y?-1:1)*o*Math.pow(2,i-r)},ki.write=function(n,e,t,r,s,i){var o,a,c,d=i*8-s-1,h=(1<<d)-1,p=h>>1,x=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=r?0:i-1,E=r?1:-1,g=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=h):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+p>=1?e+=x/c:e+=x*Math.pow(2,1-p),e*c>=2&&(o++,c/=2),o+p>=h?(a=0,o=h):o+p>=1?(a=(e*c-1)*Math.pow(2,s),o=o+p):(a=e*Math.pow(2,p-1)*Math.pow(2,s),o=0));s>=8;n[t+y]=a&255,y+=E,a/=256,s-=8);for(o=o<<s|a,d+=s;d>0;n[t+y]=o&255,y+=E,o/=256,d-=8);n[t+y-E]|=g*128}),ki}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Uu;function ql(){return Uu||(Uu=1,function(n){const e=dm(),t=hm(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=a,n.SlowBuffer=k,n.INSPECT_MAX_BYTES=50;const s=2147483647;n.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const C=new Uint8Array(1),w={foo:function(){return 42}};return Object.setPrototypeOf(w,Uint8Array.prototype),Object.setPrototypeOf(C,w),C.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(C){if(C>s)throw new RangeError('The value "'+C+'" is invalid for option "size"');const w=new Uint8Array(C);return Object.setPrototypeOf(w,a.prototype),w}function a(C,w,v){if(typeof C=="number"){if(typeof w=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(C)}return c(C,w,v)}a.poolSize=8192;function c(C,w,v){if(typeof C=="string")return x(C,w);if(ArrayBuffer.isView(C))return E(C);if(C==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C);if(Bt(C,ArrayBuffer)||C&&Bt(C.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Bt(C,SharedArrayBuffer)||C&&Bt(C.buffer,SharedArrayBuffer)))return g(C,w,v);if(typeof C=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const D=C.valueOf&&C.valueOf();if(D!=null&&D!==C)return a.from(D,w,v);const Q=S(C);if(Q)return Q;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof C[Symbol.toPrimitive]=="function")return a.from(C[Symbol.toPrimitive]("string"),w,v);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C)}a.from=function(C,w,v){return c(C,w,v)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function d(C){if(typeof C!="number")throw new TypeError('"size" argument must be of type number');if(C<0)throw new RangeError('The value "'+C+'" is invalid for option "size"')}function h(C,w,v){return d(C),C<=0?o(C):w!==void 0?typeof v=="string"?o(C).fill(w,v):o(C).fill(w):o(C)}a.alloc=function(C,w,v){return h(C,w,v)};function p(C){return d(C),o(C<0?0:A(C)|0)}a.allocUnsafe=function(C){return p(C)},a.allocUnsafeSlow=function(C){return p(C)};function x(C,w){if((typeof w!="string"||w==="")&&(w="utf8"),!a.isEncoding(w))throw new TypeError("Unknown encoding: "+w);const v=M(C,w)|0;let D=o(v);const Q=D.write(C,w);return Q!==v&&(D=D.slice(0,Q)),D}function y(C){const w=C.length<0?0:A(C.length)|0,v=o(w);for(let D=0;D<w;D+=1)v[D]=C[D]&255;return v}function E(C){if(Bt(C,Uint8Array)){const w=new Uint8Array(C);return g(w.buffer,w.byteOffset,w.byteLength)}return y(C)}function g(C,w,v){if(w<0||C.byteLength<w)throw new RangeError('"offset" is outside of buffer bounds');if(C.byteLength<w+(v||0))throw new RangeError('"length" is outside of buffer bounds');let D;return w===void 0&&v===void 0?D=new Uint8Array(C):v===void 0?D=new Uint8Array(C,w):D=new Uint8Array(C,w,v),Object.setPrototypeOf(D,a.prototype),D}function S(C){if(a.isBuffer(C)){const w=A(C.length)|0,v=o(w);return v.length===0||C.copy(v,0,0,w),v}if(C.length!==void 0)return typeof C.length!="number"||Pe(C.length)?o(0):y(C);if(C.type==="Buffer"&&Array.isArray(C.data))return y(C.data)}function A(C){if(C>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return C|0}function k(C){return+C!=C&&(C=0),a.alloc(+C)}a.isBuffer=function(w){return w!=null&&w._isBuffer===!0&&w!==a.prototype},a.compare=function(w,v){if(Bt(w,Uint8Array)&&(w=a.from(w,w.offset,w.byteLength)),Bt(v,Uint8Array)&&(v=a.from(v,v.offset,v.byteLength)),!a.isBuffer(w)||!a.isBuffer(v))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(w===v)return 0;let D=w.length,Q=v.length;for(let X=0,re=Math.min(D,Q);X<re;++X)if(w[X]!==v[X]){D=w[X],Q=v[X];break}return D<Q?-1:Q<D?1:0},a.isEncoding=function(w){switch(String(w).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(w,v){if(!Array.isArray(w))throw new TypeError('"list" argument must be an Array of Buffers');if(w.length===0)return a.alloc(0);let D;if(v===void 0)for(v=0,D=0;D<w.length;++D)v+=w[D].length;const Q=a.allocUnsafe(v);let X=0;for(D=0;D<w.length;++D){let re=w[D];if(Bt(re,Uint8Array))X+re.length>Q.length?(a.isBuffer(re)||(re=a.from(re)),re.copy(Q,X)):Uint8Array.prototype.set.call(Q,re,X);else if(a.isBuffer(re))re.copy(Q,X);else throw new TypeError('"list" argument must be an Array of Buffers');X+=re.length}return Q};function M(C,w){if(a.isBuffer(C))return C.length;if(ArrayBuffer.isView(C)||Bt(C,ArrayBuffer))return C.byteLength;if(typeof C!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof C);const v=C.length,D=arguments.length>2&&arguments[2]===!0;if(!D&&v===0)return 0;let Q=!1;for(;;)switch(w){case"ascii":case"latin1":case"binary":return v;case"utf8":case"utf-8":return Fe(C).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v*2;case"hex":return v>>>1;case"base64":return Ue(C).length;default:if(Q)return D?-1:Fe(C).length;w=(""+w).toLowerCase(),Q=!0}}a.byteLength=M;function O(C,w,v){let D=!1;if((w===void 0||w<0)&&(w=0),w>this.length||((v===void 0||v>this.length)&&(v=this.length),v<=0)||(v>>>=0,w>>>=0,v<=w))return"";for(C||(C="utf8");;)switch(C){case"hex":return U(this,w,v);case"utf8":case"utf-8":return u(this,w,v);case"ascii":return j(this,w,v);case"latin1":case"binary":return R(this,w,v);case"base64":return _(this,w,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K(this,w,v);default:if(D)throw new TypeError("Unknown encoding: "+C);C=(C+"").toLowerCase(),D=!0}}a.prototype._isBuffer=!0;function B(C,w,v){const D=C[w];C[w]=C[v],C[v]=D}a.prototype.swap16=function(){const w=this.length;if(w%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let v=0;v<w;v+=2)B(this,v,v+1);return this},a.prototype.swap32=function(){const w=this.length;if(w%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let v=0;v<w;v+=4)B(this,v,v+3),B(this,v+1,v+2);return this},a.prototype.swap64=function(){const w=this.length;if(w%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let v=0;v<w;v+=8)B(this,v,v+7),B(this,v+1,v+6),B(this,v+2,v+5),B(this,v+3,v+4);return this},a.prototype.toString=function(){const w=this.length;return w===0?"":arguments.length===0?u(this,0,w):O.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(w){if(!a.isBuffer(w))throw new TypeError("Argument must be a Buffer");return this===w?!0:a.compare(this,w)===0},a.prototype.inspect=function(){let w="";const v=n.INSPECT_MAX_BYTES;return w=this.toString("hex",0,v).replace(/(.{2})/g,"$1 ").trim(),this.length>v&&(w+=" ... "),"<Buffer "+w+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(w,v,D,Q,X){if(Bt(w,Uint8Array)&&(w=a.from(w,w.offset,w.byteLength)),!a.isBuffer(w))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof w);if(v===void 0&&(v=0),D===void 0&&(D=w?w.length:0),Q===void 0&&(Q=0),X===void 0&&(X=this.length),v<0||D>w.length||Q<0||X>this.length)throw new RangeError("out of range index");if(Q>=X&&v>=D)return 0;if(Q>=X)return-1;if(v>=D)return 1;if(v>>>=0,D>>>=0,Q>>>=0,X>>>=0,this===w)return 0;let re=X-Q,Se=D-v;const xe=Math.min(re,Se),we=this.slice(Q,X),We=w.slice(v,D);for(let ye=0;ye<xe;++ye)if(we[ye]!==We[ye]){re=we[ye],Se=We[ye];break}return re<Se?-1:Se<re?1:0};function z(C,w,v,D,Q){if(C.length===0)return-1;if(typeof v=="string"?(D=v,v=0):v>2147483647?v=2147483647:v<-2147483648&&(v=-2147483648),v=+v,Pe(v)&&(v=Q?0:C.length-1),v<0&&(v=C.length+v),v>=C.length){if(Q)return-1;v=C.length-1}else if(v<0)if(Q)v=0;else return-1;if(typeof w=="string"&&(w=a.from(w,D)),a.isBuffer(w))return w.length===0?-1:V(C,w,v,D,Q);if(typeof w=="number")return w=w&255,typeof Uint8Array.prototype.indexOf=="function"?Q?Uint8Array.prototype.indexOf.call(C,w,v):Uint8Array.prototype.lastIndexOf.call(C,w,v):V(C,[w],v,D,Q);throw new TypeError("val must be string, number or Buffer")}function V(C,w,v,D,Q){let X=1,re=C.length,Se=w.length;if(D!==void 0&&(D=String(D).toLowerCase(),D==="ucs2"||D==="ucs-2"||D==="utf16le"||D==="utf-16le")){if(C.length<2||w.length<2)return-1;X=2,re/=2,Se/=2,v/=2}function xe(We,ye){return X===1?We[ye]:We.readUInt16BE(ye*X)}let we;if(Q){let We=-1;for(we=v;we<re;we++)if(xe(C,we)===xe(w,We===-1?0:we-We)){if(We===-1&&(We=we),we-We+1===Se)return We*X}else We!==-1&&(we-=we-We),We=-1}else for(v+Se>re&&(v=re-Se),we=v;we>=0;we--){let We=!0;for(let ye=0;ye<Se;ye++)if(xe(C,we+ye)!==xe(w,ye)){We=!1;break}if(We)return we}return-1}a.prototype.includes=function(w,v,D){return this.indexOf(w,v,D)!==-1},a.prototype.indexOf=function(w,v,D){return z(this,w,v,D,!0)},a.prototype.lastIndexOf=function(w,v,D){return z(this,w,v,D,!1)};function H(C,w,v,D){v=Number(v)||0;const Q=C.length-v;D?(D=Number(D),D>Q&&(D=Q)):D=Q;const X=w.length;D>X/2&&(D=X/2);let re;for(re=0;re<D;++re){const Se=parseInt(w.substr(re*2,2),16);if(Pe(Se))return re;C[v+re]=Se}return re}function F(C,w,v,D){return De(Fe(w,C.length-v),C,v,D)}function $(C,w,v,D){return De(Ke(w),C,v,D)}function q(C,w,v,D){return De(Ue(w),C,v,D)}function Y(C,w,v,D){return De(ds(w,C.length-v),C,v,D)}a.prototype.write=function(w,v,D,Q){if(v===void 0)Q="utf8",D=this.length,v=0;else if(D===void 0&&typeof v=="string")Q=v,D=this.length,v=0;else if(isFinite(v))v=v>>>0,isFinite(D)?(D=D>>>0,Q===void 0&&(Q="utf8")):(Q=D,D=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const X=this.length-v;if((D===void 0||D>X)&&(D=X),w.length>0&&(D<0||v<0)||v>this.length)throw new RangeError("Attempt to write outside buffer bounds");Q||(Q="utf8");let re=!1;for(;;)switch(Q){case"hex":return H(this,w,v,D);case"utf8":case"utf-8":return F(this,w,v,D);case"ascii":case"latin1":case"binary":return $(this,w,v,D);case"base64":return q(this,w,v,D);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Y(this,w,v,D);default:if(re)throw new TypeError("Unknown encoding: "+Q);Q=(""+Q).toLowerCase(),re=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function _(C,w,v){return w===0&&v===C.length?e.fromByteArray(C):e.fromByteArray(C.slice(w,v))}function u(C,w,v){v=Math.min(C.length,v);const D=[];let Q=w;for(;Q<v;){const X=C[Q];let re=null,Se=X>239?4:X>223?3:X>191?2:1;if(Q+Se<=v){let xe,we,We,ye;switch(Se){case 1:X<128&&(re=X);break;case 2:xe=C[Q+1],(xe&192)===128&&(ye=(X&31)<<6|xe&63,ye>127&&(re=ye));break;case 3:xe=C[Q+1],we=C[Q+2],(xe&192)===128&&(we&192)===128&&(ye=(X&15)<<12|(xe&63)<<6|we&63,ye>2047&&(ye<55296||ye>57343)&&(re=ye));break;case 4:xe=C[Q+1],we=C[Q+2],We=C[Q+3],(xe&192)===128&&(we&192)===128&&(We&192)===128&&(ye=(X&15)<<18|(xe&63)<<12|(we&63)<<6|We&63,ye>65535&&ye<1114112&&(re=ye))}}re===null?(re=65533,Se=1):re>65535&&(re-=65536,D.push(re>>>10&1023|55296),re=56320|re&1023),D.push(re),Q+=Se}return N(D)}const b=4096;function N(C){const w=C.length;if(w<=b)return String.fromCharCode.apply(String,C);let v="",D=0;for(;D<w;)v+=String.fromCharCode.apply(String,C.slice(D,D+=b));return v}function j(C,w,v){let D="";v=Math.min(C.length,v);for(let Q=w;Q<v;++Q)D+=String.fromCharCode(C[Q]&127);return D}function R(C,w,v){let D="";v=Math.min(C.length,v);for(let Q=w;Q<v;++Q)D+=String.fromCharCode(C[Q]);return D}function U(C,w,v){const D=C.length;(!w||w<0)&&(w=0),(!v||v<0||v>D)&&(v=D);let Q="";for(let X=w;X<v;++X)Q+=$e[C[X]];return Q}function K(C,w,v){const D=C.slice(w,v);let Q="";for(let X=0;X<D.length-1;X+=2)Q+=String.fromCharCode(D[X]+D[X+1]*256);return Q}a.prototype.slice=function(w,v){const D=this.length;w=~~w,v=v===void 0?D:~~v,w<0?(w+=D,w<0&&(w=0)):w>D&&(w=D),v<0?(v+=D,v<0&&(v=0)):v>D&&(v=D),v<w&&(v=w);const Q=this.subarray(w,v);return Object.setPrototypeOf(Q,a.prototype),Q};function L(C,w,v){if(C%1!==0||C<0)throw new RangeError("offset is not uint");if(C+w>v)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(w,v,D){w=w>>>0,v=v>>>0,D||L(w,v,this.length);let Q=this[w],X=1,re=0;for(;++re<v&&(X*=256);)Q+=this[w+re]*X;return Q},a.prototype.readUintBE=a.prototype.readUIntBE=function(w,v,D){w=w>>>0,v=v>>>0,D||L(w,v,this.length);let Q=this[w+--v],X=1;for(;v>0&&(X*=256);)Q+=this[w+--v]*X;return Q},a.prototype.readUint8=a.prototype.readUInt8=function(w,v){return w=w>>>0,v||L(w,1,this.length),this[w]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(w,v){return w=w>>>0,v||L(w,2,this.length),this[w]|this[w+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(w,v){return w=w>>>0,v||L(w,2,this.length),this[w]<<8|this[w+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(w,v){return w=w>>>0,v||L(w,4,this.length),(this[w]|this[w+1]<<8|this[w+2]<<16)+this[w+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(w,v){return w=w>>>0,v||L(w,4,this.length),this[w]*16777216+(this[w+1]<<16|this[w+2]<<8|this[w+3])},a.prototype.readBigUInt64LE=Yt(function(w){w=w>>>0,it(w,"offset");const v=this[w],D=this[w+7];(v===void 0||D===void 0)&&Te(w,this.length-8);const Q=v+this[++w]*2**8+this[++w]*2**16+this[++w]*2**24,X=this[++w]+this[++w]*2**8+this[++w]*2**16+D*2**24;return BigInt(Q)+(BigInt(X)<<BigInt(32))}),a.prototype.readBigUInt64BE=Yt(function(w){w=w>>>0,it(w,"offset");const v=this[w],D=this[w+7];(v===void 0||D===void 0)&&Te(w,this.length-8);const Q=v*2**24+this[++w]*2**16+this[++w]*2**8+this[++w],X=this[++w]*2**24+this[++w]*2**16+this[++w]*2**8+D;return(BigInt(Q)<<BigInt(32))+BigInt(X)}),a.prototype.readIntLE=function(w,v,D){w=w>>>0,v=v>>>0,D||L(w,v,this.length);let Q=this[w],X=1,re=0;for(;++re<v&&(X*=256);)Q+=this[w+re]*X;return X*=128,Q>=X&&(Q-=Math.pow(2,8*v)),Q},a.prototype.readIntBE=function(w,v,D){w=w>>>0,v=v>>>0,D||L(w,v,this.length);let Q=v,X=1,re=this[w+--Q];for(;Q>0&&(X*=256);)re+=this[w+--Q]*X;return X*=128,re>=X&&(re-=Math.pow(2,8*v)),re},a.prototype.readInt8=function(w,v){return w=w>>>0,v||L(w,1,this.length),this[w]&128?(255-this[w]+1)*-1:this[w]},a.prototype.readInt16LE=function(w,v){w=w>>>0,v||L(w,2,this.length);const D=this[w]|this[w+1]<<8;return D&32768?D|4294901760:D},a.prototype.readInt16BE=function(w,v){w=w>>>0,v||L(w,2,this.length);const D=this[w+1]|this[w]<<8;return D&32768?D|4294901760:D},a.prototype.readInt32LE=function(w,v){return w=w>>>0,v||L(w,4,this.length),this[w]|this[w+1]<<8|this[w+2]<<16|this[w+3]<<24},a.prototype.readInt32BE=function(w,v){return w=w>>>0,v||L(w,4,this.length),this[w]<<24|this[w+1]<<16|this[w+2]<<8|this[w+3]},a.prototype.readBigInt64LE=Yt(function(w){w=w>>>0,it(w,"offset");const v=this[w],D=this[w+7];(v===void 0||D===void 0)&&Te(w,this.length-8);const Q=this[w+4]+this[w+5]*2**8+this[w+6]*2**16+(D<<24);return(BigInt(Q)<<BigInt(32))+BigInt(v+this[++w]*2**8+this[++w]*2**16+this[++w]*2**24)}),a.prototype.readBigInt64BE=Yt(function(w){w=w>>>0,it(w,"offset");const v=this[w],D=this[w+7];(v===void 0||D===void 0)&&Te(w,this.length-8);const Q=(v<<24)+this[++w]*2**16+this[++w]*2**8+this[++w];return(BigInt(Q)<<BigInt(32))+BigInt(this[++w]*2**24+this[++w]*2**16+this[++w]*2**8+D)}),a.prototype.readFloatLE=function(w,v){return w=w>>>0,v||L(w,4,this.length),t.read(this,w,!0,23,4)},a.prototype.readFloatBE=function(w,v){return w=w>>>0,v||L(w,4,this.length),t.read(this,w,!1,23,4)},a.prototype.readDoubleLE=function(w,v){return w=w>>>0,v||L(w,8,this.length),t.read(this,w,!0,52,8)},a.prototype.readDoubleBE=function(w,v){return w=w>>>0,v||L(w,8,this.length),t.read(this,w,!1,52,8)};function f(C,w,v,D,Q,X){if(!a.isBuffer(C))throw new TypeError('"buffer" argument must be a Buffer instance');if(w>Q||w<X)throw new RangeError('"value" argument is out of bounds');if(v+D>C.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(w,v,D,Q){if(w=+w,v=v>>>0,D=D>>>0,!Q){const Se=Math.pow(2,8*D)-1;f(this,w,v,D,Se,0)}let X=1,re=0;for(this[v]=w&255;++re<D&&(X*=256);)this[v+re]=w/X&255;return v+D},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(w,v,D,Q){if(w=+w,v=v>>>0,D=D>>>0,!Q){const Se=Math.pow(2,8*D)-1;f(this,w,v,D,Se,0)}let X=D-1,re=1;for(this[v+X]=w&255;--X>=0&&(re*=256);)this[v+X]=w/re&255;return v+D},a.prototype.writeUint8=a.prototype.writeUInt8=function(w,v,D){return w=+w,v=v>>>0,D||f(this,w,v,1,255,0),this[v]=w&255,v+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(w,v,D){return w=+w,v=v>>>0,D||f(this,w,v,2,65535,0),this[v]=w&255,this[v+1]=w>>>8,v+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(w,v,D){return w=+w,v=v>>>0,D||f(this,w,v,2,65535,0),this[v]=w>>>8,this[v+1]=w&255,v+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(w,v,D){return w=+w,v=v>>>0,D||f(this,w,v,4,4294967295,0),this[v+3]=w>>>24,this[v+2]=w>>>16,this[v+1]=w>>>8,this[v]=w&255,v+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(w,v,D){return w=+w,v=v>>>0,D||f(this,w,v,4,4294967295,0),this[v]=w>>>24,this[v+1]=w>>>16,this[v+2]=w>>>8,this[v+3]=w&255,v+4};function m(C,w,v,D,Q){Ae(w,D,Q,C,v,7);let X=Number(w&BigInt(4294967295));C[v++]=X,X=X>>8,C[v++]=X,X=X>>8,C[v++]=X,X=X>>8,C[v++]=X;let re=Number(w>>BigInt(32)&BigInt(4294967295));return C[v++]=re,re=re>>8,C[v++]=re,re=re>>8,C[v++]=re,re=re>>8,C[v++]=re,v}function T(C,w,v,D,Q){Ae(w,D,Q,C,v,7);let X=Number(w&BigInt(4294967295));C[v+7]=X,X=X>>8,C[v+6]=X,X=X>>8,C[v+5]=X,X=X>>8,C[v+4]=X;let re=Number(w>>BigInt(32)&BigInt(4294967295));return C[v+3]=re,re=re>>8,C[v+2]=re,re=re>>8,C[v+1]=re,re=re>>8,C[v]=re,v+8}a.prototype.writeBigUInt64LE=Yt(function(w,v=0){return m(this,w,v,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Yt(function(w,v=0){return T(this,w,v,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(w,v,D,Q){if(w=+w,v=v>>>0,!Q){const xe=Math.pow(2,8*D-1);f(this,w,v,D,xe-1,-xe)}let X=0,re=1,Se=0;for(this[v]=w&255;++X<D&&(re*=256);)w<0&&Se===0&&this[v+X-1]!==0&&(Se=1),this[v+X]=(w/re>>0)-Se&255;return v+D},a.prototype.writeIntBE=function(w,v,D,Q){if(w=+w,v=v>>>0,!Q){const xe=Math.pow(2,8*D-1);f(this,w,v,D,xe-1,-xe)}let X=D-1,re=1,Se=0;for(this[v+X]=w&255;--X>=0&&(re*=256);)w<0&&Se===0&&this[v+X+1]!==0&&(Se=1),this[v+X]=(w/re>>0)-Se&255;return v+D},a.prototype.writeInt8=function(w,v,D){return w=+w,v=v>>>0,D||f(this,w,v,1,127,-128),w<0&&(w=255+w+1),this[v]=w&255,v+1},a.prototype.writeInt16LE=function(w,v,D){return w=+w,v=v>>>0,D||f(this,w,v,2,32767,-32768),this[v]=w&255,this[v+1]=w>>>8,v+2},a.prototype.writeInt16BE=function(w,v,D){return w=+w,v=v>>>0,D||f(this,w,v,2,32767,-32768),this[v]=w>>>8,this[v+1]=w&255,v+2},a.prototype.writeInt32LE=function(w,v,D){return w=+w,v=v>>>0,D||f(this,w,v,4,2147483647,-2147483648),this[v]=w&255,this[v+1]=w>>>8,this[v+2]=w>>>16,this[v+3]=w>>>24,v+4},a.prototype.writeInt32BE=function(w,v,D){return w=+w,v=v>>>0,D||f(this,w,v,4,2147483647,-2147483648),w<0&&(w=4294967295+w+1),this[v]=w>>>24,this[v+1]=w>>>16,this[v+2]=w>>>8,this[v+3]=w&255,v+4},a.prototype.writeBigInt64LE=Yt(function(w,v=0){return m(this,w,v,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Yt(function(w,v=0){return T(this,w,v,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function P(C,w,v,D,Q,X){if(v+D>C.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("Index out of range")}function Z(C,w,v,D,Q){return w=+w,v=v>>>0,Q||P(C,w,v,4),t.write(C,w,v,D,23,4),v+4}a.prototype.writeFloatLE=function(w,v,D){return Z(this,w,v,!0,D)},a.prototype.writeFloatBE=function(w,v,D){return Z(this,w,v,!1,D)};function ne(C,w,v,D,Q){return w=+w,v=v>>>0,Q||P(C,w,v,8),t.write(C,w,v,D,52,8),v+8}a.prototype.writeDoubleLE=function(w,v,D){return ne(this,w,v,!0,D)},a.prototype.writeDoubleBE=function(w,v,D){return ne(this,w,v,!1,D)},a.prototype.copy=function(w,v,D,Q){if(!a.isBuffer(w))throw new TypeError("argument should be a Buffer");if(D||(D=0),!Q&&Q!==0&&(Q=this.length),v>=w.length&&(v=w.length),v||(v=0),Q>0&&Q<D&&(Q=D),Q===D||w.length===0||this.length===0)return 0;if(v<0)throw new RangeError("targetStart out of bounds");if(D<0||D>=this.length)throw new RangeError("Index out of range");if(Q<0)throw new RangeError("sourceEnd out of bounds");Q>this.length&&(Q=this.length),w.length-v<Q-D&&(Q=w.length-v+D);const X=Q-D;return this===w&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(v,D,Q):Uint8Array.prototype.set.call(w,this.subarray(D,Q),v),X},a.prototype.fill=function(w,v,D,Q){if(typeof w=="string"){if(typeof v=="string"?(Q=v,v=0,D=this.length):typeof D=="string"&&(Q=D,D=this.length),Q!==void 0&&typeof Q!="string")throw new TypeError("encoding must be a string");if(typeof Q=="string"&&!a.isEncoding(Q))throw new TypeError("Unknown encoding: "+Q);if(w.length===1){const re=w.charCodeAt(0);(Q==="utf8"&&re<128||Q==="latin1")&&(w=re)}}else typeof w=="number"?w=w&255:typeof w=="boolean"&&(w=Number(w));if(v<0||this.length<v||this.length<D)throw new RangeError("Out of range index");if(D<=v)return this;v=v>>>0,D=D===void 0?this.length:D>>>0,w||(w=0);let X;if(typeof w=="number")for(X=v;X<D;++X)this[X]=w;else{const re=a.isBuffer(w)?w:a.from(w,Q),Se=re.length;if(Se===0)throw new TypeError('The value "'+w+'" is invalid for argument "value"');for(X=0;X<D-v;++X)this[X+v]=re[X%Se]}return this};const ie={};function ae(C,w,v){ie[C]=class extends v{constructor(){super(),Object.defineProperty(this,"message",{value:w.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${C}]`,this.stack,delete this.name}get code(){return C}set code(Q){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Q,writable:!0})}toString(){return`${this.name} [${C}]: ${this.message}`}}}ae("ERR_BUFFER_OUT_OF_BOUNDS",function(C){return C?`${C} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ae("ERR_INVALID_ARG_TYPE",function(C,w){return`The "${C}" argument must be of type number. Received type ${typeof w}`},TypeError),ae("ERR_OUT_OF_RANGE",function(C,w,v){let D=`The value of "${C}" is out of range.`,Q=v;return Number.isInteger(v)&&Math.abs(v)>2**32?Q=Ce(String(v)):typeof v=="bigint"&&(Q=String(v),(v>BigInt(2)**BigInt(32)||v<-(BigInt(2)**BigInt(32)))&&(Q=Ce(Q)),Q+="n"),D+=` It must be ${w}. Received ${Q}`,D},RangeError);function Ce(C){let w="",v=C.length;const D=C[0]==="-"?1:0;for(;v>=D+4;v-=3)w=`_${C.slice(v-3,v)}${w}`;return`${C.slice(0,v)}${w}`}function ve(C,w,v){it(w,"offset"),(C[w]===void 0||C[w+v]===void 0)&&Te(w,C.length-(v+1))}function Ae(C,w,v,D,Q,X){if(C>v||C<w){const re=typeof w=="bigint"?"n":"";let Se;throw w===0||w===BigInt(0)?Se=`>= 0${re} and < 2${re} ** ${(X+1)*8}${re}`:Se=`>= -(2${re} ** ${(X+1)*8-1}${re}) and < 2 ** ${(X+1)*8-1}${re}`,new ie.ERR_OUT_OF_RANGE("value",Se,C)}ve(D,Q,X)}function it(C,w){if(typeof C!="number")throw new ie.ERR_INVALID_ARG_TYPE(w,"number",C)}function Te(C,w,v){throw Math.floor(C)!==C?(it(C,v),new ie.ERR_OUT_OF_RANGE("offset","an integer",C)):w<0?new ie.ERR_BUFFER_OUT_OF_BOUNDS:new ie.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${w}`,C)}const ke=/[^+/0-9A-Za-z-_]/g;function us(C){if(C=C.split("=")[0],C=C.trim().replace(ke,""),C.length<2)return"";for(;C.length%4!==0;)C=C+"=";return C}function Fe(C,w){w=w||1/0;let v;const D=C.length;let Q=null;const X=[];for(let re=0;re<D;++re){if(v=C.charCodeAt(re),v>55295&&v<57344){if(!Q){if(v>56319){(w-=3)>-1&&X.push(239,191,189);continue}else if(re+1===D){(w-=3)>-1&&X.push(239,191,189);continue}Q=v;continue}if(v<56320){(w-=3)>-1&&X.push(239,191,189),Q=v;continue}v=(Q-55296<<10|v-56320)+65536}else Q&&(w-=3)>-1&&X.push(239,191,189);if(Q=null,v<128){if((w-=1)<0)break;X.push(v)}else if(v<2048){if((w-=2)<0)break;X.push(v>>6|192,v&63|128)}else if(v<65536){if((w-=3)<0)break;X.push(v>>12|224,v>>6&63|128,v&63|128)}else if(v<1114112){if((w-=4)<0)break;X.push(v>>18|240,v>>12&63|128,v>>6&63|128,v&63|128)}else throw new Error("Invalid code point")}return X}function Ke(C){const w=[];for(let v=0;v<C.length;++v)w.push(C.charCodeAt(v)&255);return w}function ds(C,w){let v,D,Q;const X=[];for(let re=0;re<C.length&&!((w-=2)<0);++re)v=C.charCodeAt(re),D=v>>8,Q=v%256,X.push(Q),X.push(D);return X}function Ue(C){return e.toByteArray(us(C))}function De(C,w,v,D){let Q;for(Q=0;Q<D&&!(Q+v>=w.length||Q>=C.length);++Q)w[Q+v]=C[Q];return Q}function Bt(C,w){return C instanceof w||C!=null&&C.constructor!=null&&C.constructor.name!=null&&C.constructor.name===w.name}function Pe(C){return C!==C}const $e=function(){const C="0123456789abcdef",w=new Array(256);for(let v=0;v<16;++v){const D=v*16;for(let Q=0;Q<16;++Q)w[D+Q]=C[v]+C[Q]}return w}();function Yt(C){return typeof BigInt>"u"?qe:C}function qe(){throw new Error("BigInt not supported")}}(Na)),Na}var je=ql();function zu(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function fm(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function Co(n,...e){if(!fm(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function pm(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");zu(n.outputLen),zu(n.blockLen)}function ao(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function mm(n,e){Co(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}const hs=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ma(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function En(n,e){return n<<32-e|n>>>e}function gm(n){if(typeof n!="string")throw new Error("utf8ToBytes expected string, got "+typeof n);return new Uint8Array(new TextEncoder().encode(n))}function Wl(n){return typeof n=="string"&&(n=gm(n)),Co(n),n}function ym(...n){let e=0;for(let r=0;r<n.length;r++){const s=n[r];Co(s),e+=s.length}const t=new Uint8Array(e);for(let r=0,s=0;r<n.length;r++){const i=n[r];t.set(i,s),s+=i.length}return t}class gf{clone(){return this._cloneInto()}}function yf(n){const e=r=>n().update(Wl(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function wf(n=32){if(hs&&typeof hs.getRandomValues=="function")return hs.getRandomValues(new Uint8Array(n));if(hs&&typeof hs.randomBytes=="function")return hs.randomBytes(n);throw new Error("crypto.getRandomValues must be defined")}function wm(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(t>>s&i),a=Number(t&i),c=r?4:0,d=r?0:4;n.setUint32(e+c,o,r),n.setUint32(e+d,a,r)}function bm(n,e,t){return n&e^~n&t}function xm(n,e,t){return n&e^n&t^e&t}class bf extends gf{constructor(e,t,r,s){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Ma(this.buffer)}update(e){ao(this);const{view:t,buffer:r,blockLen:s}=this;e=Wl(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=Ma(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ao(this),mm(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let p=o;p<s;p++)t[p]=0;wm(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=Ma(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=c/4,h=this.get();if(d>h.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<d;p++)a.setUint32(4*p,h[p],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%t&&e.buffer.set(r),e}}const Li=BigInt(2**32-1),tl=BigInt(32);function xf(n,e=!1){return e?{h:Number(n&Li),l:Number(n>>tl&Li)}:{h:Number(n>>tl&Li)|0,l:Number(n&Li)|0}}function vm(n,e=!1){let t=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let s=0;s<n.length;s++){const{h:i,l:o}=xf(n[s],e);[t[s],r[s]]=[i,o]}return[t,r]}const Sm=(n,e)=>BigInt(n>>>0)<<tl|BigInt(e>>>0),Em=(n,e,t)=>n>>>t,Nm=(n,e,t)=>n<<32-t|e>>>t,Mm=(n,e,t)=>n>>>t|e<<32-t,jm=(n,e,t)=>n<<32-t|e>>>t,Am=(n,e,t)=>n<<64-t|e>>>t-32,Im=(n,e,t)=>n>>>t-32|e<<64-t,Cm=(n,e)=>e,Tm=(n,e)=>n,_m=(n,e,t)=>n<<t|e>>>32-t,km=(n,e,t)=>e<<t|n>>>32-t,Lm=(n,e,t)=>e<<t-32|n>>>64-t,Rm=(n,e,t)=>n<<t-32|e>>>64-t;function Bm(n,e,t,r){const s=(e>>>0)+(r>>>0);return{h:n+t+(s/2**32|0)|0,l:s|0}}const Om=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),Dm=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,Pm=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),Fm=(n,e,t,r,s)=>e+t+r+s+(n/2**32|0)|0,Um=(n,e,t,r,s)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(s>>>0),zm=(n,e,t,r,s,i)=>e+t+r+s+i+(n/2**32|0)|0,Ne={fromBig:xf,split:vm,toBig:Sm,shrSH:Em,shrSL:Nm,rotrSH:Mm,rotrSL:jm,rotrBH:Am,rotrBL:Im,rotr32H:Cm,rotr32L:Tm,rotlSH:_m,rotlSL:km,rotlBH:Lm,rotlBL:Rm,add:Bm,add3L:Om,add3H:Dm,add4L:Pm,add4H:Fm,add5H:zm,add5L:Um},[$m,qm]=Ne.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),tr=new Uint32Array(80),nr=new Uint32Array(80);class Wm extends bf{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:d,El:h,Fh:p,Fl:x,Gh:y,Gl:E,Hh:g,Hl:S}=this;return[e,t,r,s,i,o,a,c,d,h,p,x,y,E,g,S]}set(e,t,r,s,i,o,a,c,d,h,p,x,y,E,g,S){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=d|0,this.El=h|0,this.Fh=p|0,this.Fl=x|0,this.Gh=y|0,this.Gl=E|0,this.Hh=g|0,this.Hl=S|0}process(e,t){for(let M=0;M<16;M++,t+=4)tr[M]=e.getUint32(t),nr[M]=e.getUint32(t+=4);for(let M=16;M<80;M++){const O=tr[M-15]|0,B=nr[M-15]|0,z=Ne.rotrSH(O,B,1)^Ne.rotrSH(O,B,8)^Ne.shrSH(O,B,7),V=Ne.rotrSL(O,B,1)^Ne.rotrSL(O,B,8)^Ne.shrSL(O,B,7),H=tr[M-2]|0,F=nr[M-2]|0,$=Ne.rotrSH(H,F,19)^Ne.rotrBH(H,F,61)^Ne.shrSH(H,F,6),q=Ne.rotrSL(H,F,19)^Ne.rotrBL(H,F,61)^Ne.shrSL(H,F,6),Y=Ne.add4L(V,q,nr[M-7],nr[M-16]),_=Ne.add4H(Y,z,$,tr[M-7],tr[M-16]);tr[M]=_|0,nr[M]=Y|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:d,Dl:h,Eh:p,El:x,Fh:y,Fl:E,Gh:g,Gl:S,Hh:A,Hl:k}=this;for(let M=0;M<80;M++){const O=Ne.rotrSH(p,x,14)^Ne.rotrSH(p,x,18)^Ne.rotrBH(p,x,41),B=Ne.rotrSL(p,x,14)^Ne.rotrSL(p,x,18)^Ne.rotrBL(p,x,41),z=p&y^~p&g,V=x&E^~x&S,H=Ne.add5L(k,B,V,qm[M],nr[M]),F=Ne.add5H(H,A,O,z,$m[M],tr[M]),$=H|0,q=Ne.rotrSH(r,s,28)^Ne.rotrBH(r,s,34)^Ne.rotrBH(r,s,39),Y=Ne.rotrSL(r,s,28)^Ne.rotrBL(r,s,34)^Ne.rotrBL(r,s,39),_=r&i^r&a^i&a,u=s&o^s&c^o&c;A=g|0,k=S|0,g=y|0,S=E|0,y=p|0,E=x|0,{h:p,l:x}=Ne.add(d|0,h|0,F|0,$|0),d=a|0,h=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const b=Ne.add3L($,Y,u);r=Ne.add3H(b,F,q,_),s=b|0}({h:r,l:s}=Ne.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Ne.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Ne.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:d,l:h}=Ne.add(this.Dh|0,this.Dl|0,d|0,h|0),{h:p,l:x}=Ne.add(this.Eh|0,this.El|0,p|0,x|0),{h:y,l:E}=Ne.add(this.Fh|0,this.Fl|0,y|0,E|0),{h:g,l:S}=Ne.add(this.Gh|0,this.Gl|0,g|0,S|0),{h:A,l:k}=Ne.add(this.Hh|0,this.Hl|0,A|0,k|0),this.set(r,s,i,o,a,c,d,h,p,x,y,E,g,S,A,k)}roundClean(){tr.fill(0),nr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Hm=yf(()=>new Wm);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const To=BigInt(0),_o=BigInt(1),Km=BigInt(2);function es(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function Si(n){if(!es(n))throw new Error("Uint8Array expected")}function Gn(n,e){if(typeof e!="boolean")throw new Error(n+" boolean expected, got "+e)}const Vm=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function ts(n){Si(n);let e="";for(let t=0;t<n.length;t++)e+=Vm[n[t]];return e}function gs(n){const e=n.toString(16);return e.length&1?"0"+e:e}function Hl(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?To:BigInt("0x"+n)}const Ln={_0:48,_9:57,A:65,F:70,a:97,f:102};function $u(n){if(n>=Ln._0&&n<=Ln._9)return n-Ln._0;if(n>=Ln.A&&n<=Ln.F)return n-(Ln.A-10);if(n>=Ln.a&&n<=Ln.f)return n-(Ln.a-10)}function Os(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const e=n.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(t);for(let s=0,i=0;s<t;s++,i+=2){const o=$u(n.charCodeAt(i)),a=$u(n.charCodeAt(i+1));if(o===void 0||a===void 0){const c=n[i]+n[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function Yr(n){return Hl(ts(n))}function xs(n){return Si(n),Hl(ts(Uint8Array.from(n).reverse()))}function Ds(n,e){return Os(n.toString(16).padStart(e*2,"0"))}function di(n,e){return Ds(n,e).reverse()}function Gm(n){return Os(gs(n))}function Nt(n,e,t){let r;if(typeof e=="string")try{r=Os(e)}catch(i){throw new Error(n+" must be hex string or Uint8Array, cause: "+i)}else if(es(e))r=Uint8Array.from(e);else throw new Error(n+" must be hex string or Uint8Array");const s=r.length;if(typeof t=="number"&&s!==t)throw new Error(n+" of length "+t+" expected, got "+s);return r}function ns(...n){let e=0;for(let r=0;r<n.length;r++){const s=n[r];Si(s),e+=s.length}const t=new Uint8Array(e);for(let r=0,s=0;r<n.length;r++){const i=n[r];t.set(i,s),s+=i.length}return t}function Ym(n,e){if(n.length!==e.length)return!1;let t=0;for(let r=0;r<n.length;r++)t|=n[r]^e[r];return t===0}function Qm(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}const ja=n=>typeof n=="bigint"&&To<=n;function ko(n,e,t){return ja(n)&&ja(e)&&ja(t)&&e<=n&&n<t}function dn(n,e,t,r){if(!ko(e,t,r))throw new Error("expected valid "+n+": "+t+" <= n < "+r+", got "+e)}function vf(n){let e;for(e=0;n>To;n>>=_o,e+=1);return e}function Zm(n,e){return n>>BigInt(e)&_o}function Jm(n,e,t){return n|(t?_o:To)<<BigInt(e)}const Kl=n=>(Km<<BigInt(n-1))-_o,Aa=n=>new Uint8Array(n),qu=n=>Uint8Array.from(n);function Sf(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let r=Aa(n),s=Aa(n),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...p)=>t(s,r,...p),c=(p=Aa())=>{s=a(qu([0]),p),r=a(),p.length!==0&&(s=a(qu([1]),p),r=a())},d=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let p=0;const x=[];for(;p<e;){r=a();const y=r.slice();x.push(y),p+=r.length}return ns(...x)};return(p,x)=>{o(),c(p);let y;for(;!(y=x(d()));)c();return o(),y}}const Xm={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||es(n),isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function qs(n,e,t={}){const r=(s,i,o)=>{const a=Xm[i];if(typeof a!="function")throw new Error("invalid validator function");const c=n[s];if(!(o&&c===void 0)&&!a(c,n))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(t))r(s,i,!0);return n}const eg=()=>{throw new Error("not implemented")};function hi(n){const e=new WeakMap;return(t,...r)=>{const s=e.get(t);if(s!==void 0)return s;const i=n(t,...r);return e.set(t,i),i}}const tg=Object.freeze(Object.defineProperty({__proto__:null,aInRange:dn,abool:Gn,abytes:Si,bitGet:Zm,bitLen:vf,bitMask:Kl,bitSet:Jm,bytesToHex:ts,bytesToNumberBE:Yr,bytesToNumberLE:xs,concatBytes:ns,createHmacDrbg:Sf,ensureBytes:Nt,equalBytes:Ym,hexToBytes:Os,hexToNumber:Hl,inRange:ko,isBytes:es,memoized:hi,notImplemented:eg,numberToBytesBE:Ds,numberToBytesLE:di,numberToHexUnpadded:gs,numberToVarBytesBE:Gm,utf8ToBytes:Qm,validateObject:qs},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Rt=BigInt(0),Je=BigInt(1),kr=BigInt(2),ng=BigInt(3),nl=BigInt(4),Wu=BigInt(5),Hu=BigInt(8);function Ye(n,e){const t=n%e;return t>=Rt?t:e+t}function rg(n,e,t){if(e<Rt)throw new Error("invalid exponent, negatives unsupported");if(t<=Rt)throw new Error("invalid modulus");if(t===Je)return Rt;let r=Je;for(;e>Rt;)e&Je&&(r=r*n%t),n=n*n%t,e>>=Je;return r}function nt(n,e,t){let r=n;for(;e-- >Rt;)r*=r,r%=t;return r}function rl(n,e){if(n===Rt)throw new Error("invert: expected non-zero number");if(e<=Rt)throw new Error("invert: expected positive modulus, got "+e);let t=Ye(n,e),r=e,s=Rt,i=Je;for(;t!==Rt;){const a=r/t,c=r%t,d=s-i*a;r=t,t=c,s=i,i=d}if(r!==Je)throw new Error("invert: does not exist");return Ye(s,e)}function sg(n){const e=(n-Je)/kr;let t,r,s;for(t=n-Je,r=0;t%kr===Rt;t/=kr,r++);for(s=kr;s<n&&rg(s,e,n)!==n-Je;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(n+Je)/nl;return function(c,d){const h=c.pow(d,o);if(!c.eql(c.sqr(h),d))throw new Error("Cannot find square root");return h}}const i=(t+Je)/kr;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let d=r,h=a.pow(a.mul(a.ONE,s),t),p=a.pow(c,i),x=a.pow(c,t);for(;!a.eql(x,a.ONE);){if(a.eql(x,a.ZERO))return a.ZERO;let y=1;for(let g=a.sqr(x);y<d&&!a.eql(g,a.ONE);y++)g=a.sqr(g);const E=a.pow(h,Je<<BigInt(d-y-1));h=a.sqr(E),p=a.mul(p,E),x=a.mul(x,h),d=y}return p}}function ig(n){if(n%nl===ng){const e=(n+Je)/nl;return function(r,s){const i=r.pow(s,e);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(n%Hu===Wu){const e=(n-Wu)/Hu;return function(r,s){const i=r.mul(s,kr),o=r.pow(i,e),a=r.mul(s,o),c=r.mul(r.mul(a,kr),o),d=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(d),s))throw new Error("Cannot find square root");return d}}return sg(n)}const og=(n,e)=>(Ye(n,e)&Je)===Je,ag=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function cg(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=ag.reduce((r,s)=>(r[s]="function",r),e);return qs(n,t)}function lg(n,e,t){if(t<Rt)throw new Error("invalid exponent, negatives unsupported");if(t===Rt)return n.ONE;if(t===Je)return e;let r=n.ONE,s=e;for(;t>Rt;)t&Je&&(r=n.mul(r,s)),s=n.sqr(s),t>>=Je;return r}function ug(n,e){const t=new Array(e.length),r=e.reduce((i,o,a)=>n.is0(o)?i:(t[a]=i,n.mul(i,o)),n.ONE),s=n.inv(r);return e.reduceRight((i,o,a)=>n.is0(o)?i:(t[a]=n.mul(i,t[a]),n.mul(i,o)),s),t}function Ef(n,e){const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function Lo(n,e,t=!1,r={}){if(n<=Rt)throw new Error("invalid field: expected ORDER > 0, got "+n);const{nBitLength:s,nByteLength:i}=Ef(n,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:n,isLE:t,BITS:s,BYTES:i,MASK:Kl(s),ZERO:Rt,ONE:Je,create:c=>Ye(c,n),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Rt<=c&&c<n},is0:c=>c===Rt,isOdd:c=>(c&Je)===Je,neg:c=>Ye(-c,n),eql:(c,d)=>c===d,sqr:c=>Ye(c*c,n),add:(c,d)=>Ye(c+d,n),sub:(c,d)=>Ye(c-d,n),mul:(c,d)=>Ye(c*d,n),pow:(c,d)=>lg(a,c,d),div:(c,d)=>Ye(c*rl(d,n),n),sqrN:c=>c*c,addN:(c,d)=>c+d,subN:(c,d)=>c-d,mulN:(c,d)=>c*d,inv:c=>rl(c,n),sqrt:r.sqrt||(c=>(o||(o=ig(n)),o(a,c))),invertBatch:c=>ug(a,c),cmov:(c,d,h)=>h?d:c,toBytes:c=>t?di(c,i):Ds(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return t?xs(c):Yr(c)}});return Object.freeze(a)}function Nf(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function Mf(n){const e=Nf(n);return e+Math.ceil(e/2)}function dg(n,e,t=!1){const r=n.length,s=Nf(e),i=Mf(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=t?xs(n):Yr(n),a=Ye(o,e-Je)+Je;return t?di(a,s):Ds(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ku=BigInt(0),Ri=BigInt(1);function Ia(n,e){const t=e.negate();return n?t:e}function jf(n,e){if(!Number.isSafeInteger(n)||n<=0||n>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+n)}function Ca(n,e){jf(n,e);const t=Math.ceil(e/n)+1,r=2**(n-1);return{windows:t,windowSize:r}}function hg(n,e){if(!Array.isArray(n))throw new Error("array expected");n.forEach((t,r)=>{if(!(t instanceof e))throw new Error("invalid point at index "+r)})}function fg(n,e){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((t,r)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+r)})}const Ta=new WeakMap,Af=new WeakMap;function _a(n){return Af.get(n)||1}function If(n,e){return{constTimeNegate:Ia,hasPrecomputes(t){return _a(t)!==1},unsafeLadder(t,r,s=n.ZERO){let i=t;for(;r>Ku;)r&Ri&&(s=s.add(i)),i=i.double(),r>>=Ri;return s},precomputeWindow(t,r){const{windows:s,windowSize:i}=Ca(r,e),o=[];let a=t,c=a;for(let d=0;d<s;d++){c=a,o.push(c);for(let h=1;h<i;h++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(t,r,s){const{windows:i,windowSize:o}=Ca(t,e);let a=n.ZERO,c=n.BASE;const d=BigInt(2**t-1),h=2**t,p=BigInt(t);for(let x=0;x<i;x++){const y=x*o;let E=Number(s&d);s>>=p,E>o&&(E-=h,s+=Ri);const g=y,S=y+Math.abs(E)-1,A=x%2!==0,k=E<0;E===0?c=c.add(Ia(A,r[g])):a=a.add(Ia(k,r[S]))}return{p:a,f:c}},wNAFUnsafe(t,r,s,i=n.ZERO){const{windows:o,windowSize:a}=Ca(t,e),c=BigInt(2**t-1),d=2**t,h=BigInt(t);for(let p=0;p<o;p++){const x=p*a;if(s===Ku)break;let y=Number(s&c);if(s>>=h,y>a&&(y-=d,s+=Ri),y===0)continue;let E=r[x+Math.abs(y)-1];y<0&&(E=E.negate()),i=i.add(E)}return i},getPrecomputes(t,r,s){let i=Ta.get(r);return i||(i=this.precomputeWindow(r,t),t!==1&&Ta.set(r,s(i))),i},wNAFCached(t,r,s){const i=_a(t);return this.wNAF(i,this.getPrecomputes(i,t,s),r)},wNAFCachedUnsafe(t,r,s,i){const o=_a(t);return o===1?this.unsafeLadder(t,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,t,s),r,i)},setWindowSize(t,r){jf(r,e),Af.set(t,r),Ta.delete(t)}}}function Cf(n,e,t,r){if(hg(t,n),fg(r,e),t.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=n.ZERO,i=vf(BigInt(t.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),d=Math.floor((e.BITS-1)/o)*o;let h=s;for(let p=d;p>=0;p-=o){c.fill(s);for(let y=0;y<r.length;y++){const E=r[y],g=Number(E>>BigInt(p)&BigInt(a));c[g]=c[g].add(t[y])}let x=s;for(let y=c.length-1,E=s;y>0;y--)E=E.add(c[y]),x=x.add(E);if(h=h.add(x),p!==0)for(let y=0;y<o;y++)h=h.double()}return h}function Vl(n){return cg(n.Fp),qs(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Ef(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const pn=BigInt(0),Zt=BigInt(1),Bi=BigInt(2),pg=BigInt(8),mg={zip215:!0};function gg(n){const e=Vl(n);return qs(n,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function yg(n){const e=gg(n),{Fp:t,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,d=Bi<<BigInt(a*8)-Zt,h=t.create,p=Lo(e.n,e.nBitLength),x=e.uvRatio||((N,j)=>{try{return{isValid:!0,value:t.sqrt(N*t.inv(j))}}catch{return{isValid:!1,value:pn}}}),y=e.adjustScalarBytes||(N=>N),E=e.domain||((N,j,R)=>{if(Gn("phflag",R),j.length||R)throw new Error("Contexts/pre-hash are not supported");return N});function g(N,j){dn("coordinate "+N,j,pn,d)}function S(N){if(!(N instanceof M))throw new Error("ExtendedPoint expected")}const A=hi((N,j)=>{const{ex:R,ey:U,ez:K}=N,L=N.is0();j==null&&(j=L?pg:t.inv(K));const f=h(R*j),m=h(U*j),T=h(K*j);if(L)return{x:pn,y:Zt};if(T!==Zt)throw new Error("invZ was invalid");return{x:f,y:m}}),k=hi(N=>{const{a:j,d:R}=e;if(N.is0())throw new Error("bad point: ZERO");const{ex:U,ey:K,ez:L,et:f}=N,m=h(U*U),T=h(K*K),P=h(L*L),Z=h(P*P),ne=h(m*j),ie=h(P*h(ne+T)),ae=h(Z+h(R*h(m*T)));if(ie!==ae)throw new Error("bad point: equation left != right (1)");const Ce=h(U*K),ve=h(L*f);if(Ce!==ve)throw new Error("bad point: equation left != right (2)");return!0});class M{constructor(j,R,U,K){this.ex=j,this.ey=R,this.ez=U,this.et=K,g("x",j),g("y",R),g("z",U),g("t",K),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(j){if(j instanceof M)throw new Error("extended point not allowed");const{x:R,y:U}=j||{};return g("x",R),g("y",U),new M(R,U,Zt,h(R*U))}static normalizeZ(j){const R=t.invertBatch(j.map(U=>U.ez));return j.map((U,K)=>U.toAffine(R[K])).map(M.fromAffine)}static msm(j,R){return Cf(M,p,j,R)}_setWindowSize(j){z.setWindowSize(this,j)}assertValidity(){k(this)}equals(j){S(j);const{ex:R,ey:U,ez:K}=this,{ex:L,ey:f,ez:m}=j,T=h(R*m),P=h(L*K),Z=h(U*m),ne=h(f*K);return T===P&&Z===ne}is0(){return this.equals(M.ZERO)}negate(){return new M(h(-this.ex),this.ey,this.ez,h(-this.et))}double(){const{a:j}=e,{ex:R,ey:U,ez:K}=this,L=h(R*R),f=h(U*U),m=h(Bi*h(K*K)),T=h(j*L),P=R+U,Z=h(h(P*P)-L-f),ne=T+f,ie=ne-m,ae=T-f,Ce=h(Z*ie),ve=h(ne*ae),Ae=h(Z*ae),it=h(ie*ne);return new M(Ce,ve,it,Ae)}add(j){S(j);const{a:R,d:U}=e,{ex:K,ey:L,ez:f,et:m}=this,{ex:T,ey:P,ez:Z,et:ne}=j;if(R===BigInt(-1)){const Ue=h((L-K)*(P+T)),De=h((L+K)*(P-T)),Bt=h(De-Ue);if(Bt===pn)return this.double();const Pe=h(f*Bi*ne),$e=h(m*Bi*Z),Yt=$e+Pe,qe=De+Ue,C=$e-Pe,w=h(Yt*Bt),v=h(qe*C),D=h(Yt*C),Q=h(Bt*qe);return new M(w,v,Q,D)}const ie=h(K*T),ae=h(L*P),Ce=h(m*U*ne),ve=h(f*Z),Ae=h((K+L)*(T+P)-ie-ae),it=ve-Ce,Te=ve+Ce,ke=h(ae-R*ie),us=h(Ae*it),Fe=h(Te*ke),Ke=h(Ae*ke),ds=h(it*Te);return new M(us,Fe,ds,Ke)}subtract(j){return this.add(j.negate())}wNAF(j){return z.wNAFCached(this,j,M.normalizeZ)}multiply(j){const R=j;dn("scalar",R,Zt,r);const{p:U,f:K}=this.wNAF(R);return M.normalizeZ([U,K])[0]}multiplyUnsafe(j,R=M.ZERO){const U=j;return dn("scalar",U,pn,r),U===pn?B:this.is0()||U===Zt?this:z.wNAFCachedUnsafe(this,U,M.normalizeZ,R)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return z.unsafeLadder(this,r).is0()}toAffine(j){return A(this,j)}clearCofactor(){const{h:j}=e;return j===Zt?this:this.multiplyUnsafe(j)}static fromHex(j,R=!1){const{d:U,a:K}=e,L=t.BYTES;j=Nt("pointHex",j,L),Gn("zip215",R);const f=j.slice(),m=j[L-1];f[L-1]=m&-129;const T=xs(f),P=R?d:t.ORDER;dn("pointHex.y",T,pn,P);const Z=h(T*T),ne=h(Z-Zt),ie=h(U*Z-K);let{isValid:ae,value:Ce}=x(ne,ie);if(!ae)throw new Error("Point.fromHex: invalid y coordinate");const ve=(Ce&Zt)===Zt,Ae=(m&128)!==0;if(!R&&Ce===pn&&Ae)throw new Error("Point.fromHex: x=0 and x_0=1");return Ae!==ve&&(Ce=h(-Ce)),M.fromAffine({x:Ce,y:T})}static fromPrivateKey(j){return F(j).point}toRawBytes(){const{x:j,y:R}=this.toAffine(),U=di(R,t.BYTES);return U[U.length-1]|=j&Zt?128:0,U}toHex(){return ts(this.toRawBytes())}}M.BASE=new M(e.Gx,e.Gy,Zt,h(e.Gx*e.Gy)),M.ZERO=new M(pn,Zt,Zt,pn);const{BASE:O,ZERO:B}=M,z=If(M,a*8);function V(N){return Ye(N,r)}function H(N){return V(xs(N))}function F(N){const j=t.BYTES;N=Nt("private key",N,j);const R=Nt("hashed private key",i(N),2*j),U=y(R.slice(0,j)),K=R.slice(j,2*j),L=H(U),f=O.multiply(L),m=f.toRawBytes();return{head:U,prefix:K,scalar:L,point:f,pointBytes:m}}function $(N){return F(N).pointBytes}function q(N=new Uint8Array,...j){const R=ns(...j);return H(i(E(R,Nt("context",N),!!s)))}function Y(N,j,R={}){N=Nt("message",N),s&&(N=s(N));const{prefix:U,scalar:K,pointBytes:L}=F(j),f=q(R.context,U,N),m=O.multiply(f).toRawBytes(),T=q(R.context,m,L,N),P=V(f+T*K);dn("signature.s",P,pn,r);const Z=ns(m,di(P,t.BYTES));return Nt("result",Z,t.BYTES*2)}const _=mg;function u(N,j,R,U=_){const{context:K,zip215:L}=U,f=t.BYTES;N=Nt("signature",N,2*f),j=Nt("message",j),R=Nt("publicKey",R,f),L!==void 0&&Gn("zip215",L),s&&(j=s(j));const m=xs(N.slice(f,2*f));let T,P,Z;try{T=M.fromHex(R,L),P=M.fromHex(N.slice(0,f),L),Z=O.multiplyUnsafe(m)}catch{return!1}if(!L&&T.isSmallOrder())return!1;const ne=q(K,P.toRawBytes(),T.toRawBytes(),j);return P.add(T.multiplyUnsafe(ne)).subtract(Z).clearCofactor().equals(M.ZERO)}return O._setWindowSize(8),{CURVE:e,getPublicKey:$,sign:Y,verify:u,ExtendedPoint:M,utils:{getExtendedPublicKey:F,randomPrivateKey:()=>o(t.BYTES),precompute(N=8,j=M.BASE){return j._setWindowSize(N),j.multiply(BigInt(3)),j}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Gl=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Vu=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const wg=BigInt(1),Gu=BigInt(2);BigInt(3);const bg=BigInt(5),xg=BigInt(8);function vg(n){const e=BigInt(10),t=BigInt(20),r=BigInt(40),s=BigInt(80),i=Gl,a=n*n%i*n%i,c=nt(a,Gu,i)*a%i,d=nt(c,wg,i)*n%i,h=nt(d,bg,i)*d%i,p=nt(h,e,i)*h%i,x=nt(p,t,i)*p%i,y=nt(x,r,i)*x%i,E=nt(y,s,i)*y%i,g=nt(E,s,i)*y%i,S=nt(g,e,i)*h%i;return{pow_p_5_8:nt(S,Gu,i)*n%i,b2:a}}function Sg(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}function Eg(n,e){const t=Gl,r=Ye(e*e*e,t),s=Ye(r*r*e,t),i=vg(n*s).pow_p_5_8;let o=Ye(n*r*i,t);const a=Ye(e*o*o,t),c=o,d=Ye(o*Vu,t),h=a===n,p=a===Ye(-n,t),x=a===Ye(-n*Vu,t);return h&&(o=c),(p||x)&&(o=d),og(o,t)&&(o=Ye(-o,t)),{isValid:h||p,value:o}}const Ng=Lo(Gl,void 0,!0),Mg={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Ng,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:xg,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Hm,randomBytes:wf,adjustScalarBytes:Sg,uvRatio:Eg},Yl=yg(Mg);var Gi={exports:{}};const jg={},Ag=Object.freeze(Object.defineProperty({__proto__:null,default:jg},Symbol.toStringTag,{value:"Module"})),Ig=Ol(Ag);var Cg=Gi.exports,Yu;function Tf(){return Yu||(Yu=1,function(n){(function(e,t){function r(_,u){if(!_)throw new Error(u||"Assertion failed")}function s(_,u){_.super_=u;var b=function(){};b.prototype=u.prototype,_.prototype=new b,_.prototype.constructor=_}function i(_,u,b){if(i.isBN(_))return _;this.negative=0,this.words=null,this.length=0,this.red=null,_!==null&&((u==="le"||u==="be")&&(b=u,u=10),this._init(_||0,u||10,b||"be"))}typeof e=="object"?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Ig.Buffer}catch{}i.isBN=function(u){return u instanceof i?!0:u!==null&&typeof u=="object"&&u.constructor.wordSize===i.wordSize&&Array.isArray(u.words)},i.max=function(u,b){return u.cmp(b)>0?u:b},i.min=function(u,b){return u.cmp(b)<0?u:b},i.prototype._init=function(u,b,N){if(typeof u=="number")return this._initNumber(u,b,N);if(typeof u=="object")return this._initArray(u,b,N);b==="hex"&&(b=16),r(b===(b|0)&&b>=2&&b<=36),u=u.toString().replace(/\s+/g,"");var j=0;u[0]==="-"&&(j++,this.negative=1),j<u.length&&(b===16?this._parseHex(u,j,N):(this._parseBase(u,b,j),N==="le"&&this._initArray(this.toArray(),b,N)))},i.prototype._initNumber=function(u,b,N){u<0&&(this.negative=1,u=-u),u<67108864?(this.words=[u&67108863],this.length=1):u<4503599627370496?(this.words=[u&67108863,u/67108864&67108863],this.length=2):(r(u<9007199254740992),this.words=[u&67108863,u/67108864&67108863,1],this.length=3),N==="le"&&this._initArray(this.toArray(),b,N)},i.prototype._initArray=function(u,b,N){if(r(typeof u.length=="number"),u.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(u.length/3),this.words=new Array(this.length);for(var j=0;j<this.length;j++)this.words[j]=0;var R,U,K=0;if(N==="be")for(j=u.length-1,R=0;j>=0;j-=3)U=u[j]|u[j-1]<<8|u[j-2]<<16,this.words[R]|=U<<K&67108863,this.words[R+1]=U>>>26-K&67108863,K+=24,K>=26&&(K-=26,R++);else if(N==="le")for(j=0,R=0;j<u.length;j+=3)U=u[j]|u[j+1]<<8|u[j+2]<<16,this.words[R]|=U<<K&67108863,this.words[R+1]=U>>>26-K&67108863,K+=24,K>=26&&(K-=26,R++);return this._strip()};function a(_,u){var b=_.charCodeAt(u);if(b>=48&&b<=57)return b-48;if(b>=65&&b<=70)return b-55;if(b>=97&&b<=102)return b-87;r(!1,"Invalid character in "+_)}function c(_,u,b){var N=a(_,b);return b-1>=u&&(N|=a(_,b-1)<<4),N}i.prototype._parseHex=function(u,b,N){this.length=Math.ceil((u.length-b)/6),this.words=new Array(this.length);for(var j=0;j<this.length;j++)this.words[j]=0;var R=0,U=0,K;if(N==="be")for(j=u.length-1;j>=b;j-=2)K=c(u,b,j)<<R,this.words[U]|=K&67108863,R>=18?(R-=18,U+=1,this.words[U]|=K>>>26):R+=8;else{var L=u.length-b;for(j=L%2===0?b+1:b;j<u.length;j+=2)K=c(u,b,j)<<R,this.words[U]|=K&67108863,R>=18?(R-=18,U+=1,this.words[U]|=K>>>26):R+=8}this._strip()};function d(_,u,b,N){for(var j=0,R=0,U=Math.min(_.length,b),K=u;K<U;K++){var L=_.charCodeAt(K)-48;j*=N,L>=49?R=L-49+10:L>=17?R=L-17+10:R=L,r(L>=0&&R<N,"Invalid character"),j+=R}return j}i.prototype._parseBase=function(u,b,N){this.words=[0],this.length=1;for(var j=0,R=1;R<=67108863;R*=b)j++;j--,R=R/b|0;for(var U=u.length-N,K=U%j,L=Math.min(U,U-K)+N,f=0,m=N;m<L;m+=j)f=d(u,m,m+j,b),this.imuln(R),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f);if(K!==0){var T=1;for(f=d(u,m,u.length,b),m=0;m<K;m++)T*=b;this.imuln(T),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f)}this._strip()},i.prototype.copy=function(u){u.words=new Array(this.length);for(var b=0;b<this.length;b++)u.words[b]=this.words[b];u.length=this.length,u.negative=this.negative,u.red=this.red};function h(_,u){_.words=u.words,_.length=u.length,_.negative=u.negative,_.red=u.red}if(i.prototype._move=function(u){h(u,this)},i.prototype.clone=function(){var u=new i(null);return this.copy(u),u},i.prototype._expand=function(u){for(;this.length<u;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=p}catch{i.prototype.inspect=p}else i.prototype.inspect=p;function p(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var x=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],y=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(u,b){u=u||10,b=b|0||1;var N;if(u===16||u==="hex"){N="";for(var j=0,R=0,U=0;U<this.length;U++){var K=this.words[U],L=((K<<j|R)&16777215).toString(16);R=K>>>24-j&16777215,j+=2,j>=26&&(j-=26,U--),R!==0||U!==this.length-1?N=x[6-L.length]+L+N:N=L+N}for(R!==0&&(N=R.toString(16)+N);N.length%b!==0;)N="0"+N;return this.negative!==0&&(N="-"+N),N}if(u===(u|0)&&u>=2&&u<=36){var f=y[u],m=E[u];N="";var T=this.clone();for(T.negative=0;!T.isZero();){var P=T.modrn(m).toString(u);T=T.idivn(m),T.isZero()?N=P+N:N=x[f-P.length]+P+N}for(this.isZero()&&(N="0"+N);N.length%b!==0;)N="0"+N;return this.negative!==0&&(N="-"+N),N}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var u=this.words[0];return this.length===2?u+=this.words[1]*67108864:this.length===3&&this.words[2]===1?u+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-u:u},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(u,b){return this.toArrayLike(o,u,b)}),i.prototype.toArray=function(u,b){return this.toArrayLike(Array,u,b)};var g=function(u,b){return u.allocUnsafe?u.allocUnsafe(b):new u(b)};i.prototype.toArrayLike=function(u,b,N){this._strip();var j=this.byteLength(),R=N||Math.max(1,j);r(j<=R,"byte array longer than desired length"),r(R>0,"Requested array length <= 0");var U=g(u,R),K=b==="le"?"LE":"BE";return this["_toArrayLike"+K](U,j),U},i.prototype._toArrayLikeLE=function(u,b){for(var N=0,j=0,R=0,U=0;R<this.length;R++){var K=this.words[R]<<U|j;u[N++]=K&255,N<u.length&&(u[N++]=K>>8&255),N<u.length&&(u[N++]=K>>16&255),U===6?(N<u.length&&(u[N++]=K>>24&255),j=0,U=0):(j=K>>>24,U+=2)}if(N<u.length)for(u[N++]=j;N<u.length;)u[N++]=0},i.prototype._toArrayLikeBE=function(u,b){for(var N=u.length-1,j=0,R=0,U=0;R<this.length;R++){var K=this.words[R]<<U|j;u[N--]=K&255,N>=0&&(u[N--]=K>>8&255),N>=0&&(u[N--]=K>>16&255),U===6?(N>=0&&(u[N--]=K>>24&255),j=0,U=0):(j=K>>>24,U+=2)}if(N>=0)for(u[N--]=j;N>=0;)u[N--]=0},Math.clz32?i.prototype._countBits=function(u){return 32-Math.clz32(u)}:i.prototype._countBits=function(u){var b=u,N=0;return b>=4096&&(N+=13,b>>>=13),b>=64&&(N+=7,b>>>=7),b>=8&&(N+=4,b>>>=4),b>=2&&(N+=2,b>>>=2),N+b},i.prototype._zeroBits=function(u){if(u===0)return 26;var b=u,N=0;return b&8191||(N+=13,b>>>=13),b&127||(N+=7,b>>>=7),b&15||(N+=4,b>>>=4),b&3||(N+=2,b>>>=2),b&1||N++,N},i.prototype.bitLength=function(){var u=this.words[this.length-1],b=this._countBits(u);return(this.length-1)*26+b};function S(_){for(var u=new Array(_.bitLength()),b=0;b<u.length;b++){var N=b/26|0,j=b%26;u[b]=_.words[N]>>>j&1}return u}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var u=0,b=0;b<this.length;b++){var N=this._zeroBits(this.words[b]);if(u+=N,N!==26)break}return u},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(u){return this.negative!==0?this.abs().inotn(u).iaddn(1):this.clone()},i.prototype.fromTwos=function(u){return this.testn(u-1)?this.notn(u).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(u){for(;this.length<u.length;)this.words[this.length++]=0;for(var b=0;b<u.length;b++)this.words[b]=this.words[b]|u.words[b];return this._strip()},i.prototype.ior=function(u){return r((this.negative|u.negative)===0),this.iuor(u)},i.prototype.or=function(u){return this.length>u.length?this.clone().ior(u):u.clone().ior(this)},i.prototype.uor=function(u){return this.length>u.length?this.clone().iuor(u):u.clone().iuor(this)},i.prototype.iuand=function(u){var b;this.length>u.length?b=u:b=this;for(var N=0;N<b.length;N++)this.words[N]=this.words[N]&u.words[N];return this.length=b.length,this._strip()},i.prototype.iand=function(u){return r((this.negative|u.negative)===0),this.iuand(u)},i.prototype.and=function(u){return this.length>u.length?this.clone().iand(u):u.clone().iand(this)},i.prototype.uand=function(u){return this.length>u.length?this.clone().iuand(u):u.clone().iuand(this)},i.prototype.iuxor=function(u){var b,N;this.length>u.length?(b=this,N=u):(b=u,N=this);for(var j=0;j<N.length;j++)this.words[j]=b.words[j]^N.words[j];if(this!==b)for(;j<b.length;j++)this.words[j]=b.words[j];return this.length=b.length,this._strip()},i.prototype.ixor=function(u){return r((this.negative|u.negative)===0),this.iuxor(u)},i.prototype.xor=function(u){return this.length>u.length?this.clone().ixor(u):u.clone().ixor(this)},i.prototype.uxor=function(u){return this.length>u.length?this.clone().iuxor(u):u.clone().iuxor(this)},i.prototype.inotn=function(u){r(typeof u=="number"&&u>=0);var b=Math.ceil(u/26)|0,N=u%26;this._expand(b),N>0&&b--;for(var j=0;j<b;j++)this.words[j]=~this.words[j]&67108863;return N>0&&(this.words[j]=~this.words[j]&67108863>>26-N),this._strip()},i.prototype.notn=function(u){return this.clone().inotn(u)},i.prototype.setn=function(u,b){r(typeof u=="number"&&u>=0);var N=u/26|0,j=u%26;return this._expand(N+1),b?this.words[N]=this.words[N]|1<<j:this.words[N]=this.words[N]&~(1<<j),this._strip()},i.prototype.iadd=function(u){var b;if(this.negative!==0&&u.negative===0)return this.negative=0,b=this.isub(u),this.negative^=1,this._normSign();if(this.negative===0&&u.negative!==0)return u.negative=0,b=this.isub(u),u.negative=1,b._normSign();var N,j;this.length>u.length?(N=this,j=u):(N=u,j=this);for(var R=0,U=0;U<j.length;U++)b=(N.words[U]|0)+(j.words[U]|0)+R,this.words[U]=b&67108863,R=b>>>26;for(;R!==0&&U<N.length;U++)b=(N.words[U]|0)+R,this.words[U]=b&67108863,R=b>>>26;if(this.length=N.length,R!==0)this.words[this.length]=R,this.length++;else if(N!==this)for(;U<N.length;U++)this.words[U]=N.words[U];return this},i.prototype.add=function(u){var b;return u.negative!==0&&this.negative===0?(u.negative=0,b=this.sub(u),u.negative^=1,b):u.negative===0&&this.negative!==0?(this.negative=0,b=u.sub(this),this.negative=1,b):this.length>u.length?this.clone().iadd(u):u.clone().iadd(this)},i.prototype.isub=function(u){if(u.negative!==0){u.negative=0;var b=this.iadd(u);return u.negative=1,b._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(u),this.negative=1,this._normSign();var N=this.cmp(u);if(N===0)return this.negative=0,this.length=1,this.words[0]=0,this;var j,R;N>0?(j=this,R=u):(j=u,R=this);for(var U=0,K=0;K<R.length;K++)b=(j.words[K]|0)-(R.words[K]|0)+U,U=b>>26,this.words[K]=b&67108863;for(;U!==0&&K<j.length;K++)b=(j.words[K]|0)+U,U=b>>26,this.words[K]=b&67108863;if(U===0&&K<j.length&&j!==this)for(;K<j.length;K++)this.words[K]=j.words[K];return this.length=Math.max(this.length,K),j!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(u){return this.clone().isub(u)};function A(_,u,b){b.negative=u.negative^_.negative;var N=_.length+u.length|0;b.length=N,N=N-1|0;var j=_.words[0]|0,R=u.words[0]|0,U=j*R,K=U&67108863,L=U/67108864|0;b.words[0]=K;for(var f=1;f<N;f++){for(var m=L>>>26,T=L&67108863,P=Math.min(f,u.length-1),Z=Math.max(0,f-_.length+1);Z<=P;Z++){var ne=f-Z|0;j=_.words[ne]|0,R=u.words[Z]|0,U=j*R+T,m+=U/67108864|0,T=U&67108863}b.words[f]=T|0,L=m|0}return L!==0?b.words[f]=L|0:b.length--,b._strip()}var k=function(u,b,N){var j=u.words,R=b.words,U=N.words,K=0,L,f,m,T=j[0]|0,P=T&8191,Z=T>>>13,ne=j[1]|0,ie=ne&8191,ae=ne>>>13,Ce=j[2]|0,ve=Ce&8191,Ae=Ce>>>13,it=j[3]|0,Te=it&8191,ke=it>>>13,us=j[4]|0,Fe=us&8191,Ke=us>>>13,ds=j[5]|0,Ue=ds&8191,De=ds>>>13,Bt=j[6]|0,Pe=Bt&8191,$e=Bt>>>13,Yt=j[7]|0,qe=Yt&8191,C=Yt>>>13,w=j[8]|0,v=w&8191,D=w>>>13,Q=j[9]|0,X=Q&8191,re=Q>>>13,Se=R[0]|0,xe=Se&8191,we=Se>>>13,We=R[1]|0,ye=We&8191,ot=We>>>13,pu=R[2]|0,at=pu&8191,ct=pu>>>13,mu=R[3]|0,lt=mu&8191,ut=mu>>>13,gu=R[4]|0,dt=gu&8191,ht=gu>>>13,yu=R[5]|0,ft=yu&8191,pt=yu>>>13,wu=R[6]|0,mt=wu&8191,gt=wu>>>13,bu=R[7]|0,yt=bu&8191,wt=bu>>>13,xu=R[8]|0,bt=xu&8191,xt=xu>>>13,vu=R[9]|0,vt=vu&8191,St=vu>>>13;N.negative=u.negative^b.negative,N.length=19,L=Math.imul(P,xe),f=Math.imul(P,we),f=f+Math.imul(Z,xe)|0,m=Math.imul(Z,we);var ea=(K+L|0)+((f&8191)<<13)|0;K=(m+(f>>>13)|0)+(ea>>>26)|0,ea&=67108863,L=Math.imul(ie,xe),f=Math.imul(ie,we),f=f+Math.imul(ae,xe)|0,m=Math.imul(ae,we),L=L+Math.imul(P,ye)|0,f=f+Math.imul(P,ot)|0,f=f+Math.imul(Z,ye)|0,m=m+Math.imul(Z,ot)|0;var ta=(K+L|0)+((f&8191)<<13)|0;K=(m+(f>>>13)|0)+(ta>>>26)|0,ta&=67108863,L=Math.imul(ve,xe),f=Math.imul(ve,we),f=f+Math.imul(Ae,xe)|0,m=Math.imul(Ae,we),L=L+Math.imul(ie,ye)|0,f=f+Math.imul(ie,ot)|0,f=f+Math.imul(ae,ye)|0,m=m+Math.imul(ae,ot)|0,L=L+Math.imul(P,at)|0,f=f+Math.imul(P,ct)|0,f=f+Math.imul(Z,at)|0,m=m+Math.imul(Z,ct)|0;var na=(K+L|0)+((f&8191)<<13)|0;K=(m+(f>>>13)|0)+(na>>>26)|0,na&=67108863,L=Math.imul(Te,xe),f=Math.imul(Te,we),f=f+Math.imul(ke,xe)|0,m=Math.imul(ke,we),L=L+Math.imul(ve,ye)|0,f=f+Math.imul(ve,ot)|0,f=f+Math.imul(Ae,ye)|0,m=m+Math.imul(Ae,ot)|0,L=L+Math.imul(ie,at)|0,f=f+Math.imul(ie,ct)|0,f=f+Math.imul(ae,at)|0,m=m+Math.imul(ae,ct)|0,L=L+Math.imul(P,lt)|0,f=f+Math.imul(P,ut)|0,f=f+Math.imul(Z,lt)|0,m=m+Math.imul(Z,ut)|0;var ra=(K+L|0)+((f&8191)<<13)|0;K=(m+(f>>>13)|0)+(ra>>>26)|0,ra&=67108863,L=Math.imul(Fe,xe),f=Math.imul(Fe,we),f=f+Math.imul(Ke,xe)|0,m=Math.imul(Ke,we),L=L+Math.imul(Te,ye)|0,f=f+Math.imul(Te,ot)|0,f=f+Math.imul(ke,ye)|0,m=m+Math.imul(ke,ot)|0,L=L+Math.imul(ve,at)|0,f=f+Math.imul(ve,ct)|0,f=f+Math.imul(Ae,at)|0,m=m+Math.imul(Ae,ct)|0,L=L+Math.imul(ie,lt)|0,f=f+Math.imul(ie,ut)|0,f=f+Math.imul(ae,lt)|0,m=m+Math.imul(ae,ut)|0,L=L+Math.imul(P,dt)|0,f=f+Math.imul(P,ht)|0,f=f+Math.imul(Z,dt)|0,m=m+Math.imul(Z,ht)|0;var sa=(K+L|0)+((f&8191)<<13)|0;K=(m+(f>>>13)|0)+(sa>>>26)|0,sa&=67108863,L=Math.imul(Ue,xe),f=Math.imul(Ue,we),f=f+Math.imul(De,xe)|0,m=Math.imul(De,we),L=L+Math.imul(Fe,ye)|0,f=f+Math.imul(Fe,ot)|0,f=f+Math.imul(Ke,ye)|0,m=m+Math.imul(Ke,ot)|0,L=L+Math.imul(Te,at)|0,f=f+Math.imul(Te,ct)|0,f=f+Math.imul(ke,at)|0,m=m+Math.imul(ke,ct)|0,L=L+Math.imul(ve,lt)|0,f=f+Math.imul(ve,ut)|0,f=f+Math.imul(Ae,lt)|0,m=m+Math.imul(Ae,ut)|0,L=L+Math.imul(ie,dt)|0,f=f+Math.imul(ie,ht)|0,f=f+Math.imul(ae,dt)|0,m=m+Math.imul(ae,ht)|0,L=L+Math.imul(P,ft)|0,f=f+Math.imul(P,pt)|0,f=f+Math.imul(Z,ft)|0,m=m+Math.imul(Z,pt)|0;var ia=(K+L|0)+((f&8191)<<13)|0;K=(m+(f>>>13)|0)+(ia>>>26)|0,ia&=67108863,L=Math.imul(Pe,xe),f=Math.imul(Pe,we),f=f+Math.imul($e,xe)|0,m=Math.imul($e,we),L=L+Math.imul(Ue,ye)|0,f=f+Math.imul(Ue,ot)|0,f=f+Math.imul(De,ye)|0,m=m+Math.imul(De,ot)|0,L=L+Math.imul(Fe,at)|0,f=f+Math.imul(Fe,ct)|0,f=f+Math.imul(Ke,at)|0,m=m+Math.imul(Ke,ct)|0,L=L+Math.imul(Te,lt)|0,f=f+Math.imul(Te,ut)|0,f=f+Math.imul(ke,lt)|0,m=m+Math.imul(ke,ut)|0,L=L+Math.imul(ve,dt)|0,f=f+Math.imul(ve,ht)|0,f=f+Math.imul(Ae,dt)|0,m=m+Math.imul(Ae,ht)|0,L=L+Math.imul(ie,ft)|0,f=f+Math.imul(ie,pt)|0,f=f+Math.imul(ae,ft)|0,m=m+Math.imul(ae,pt)|0,L=L+Math.imul(P,mt)|0,f=f+Math.imul(P,gt)|0,f=f+Math.imul(Z,mt)|0,m=m+Math.imul(Z,gt)|0;var oa=(K+L|0)+((f&8191)<<13)|0;K=(m+(f>>>13)|0)+(oa>>>26)|0,oa&=67108863,L=Math.imul(qe,xe),f=Math.imul(qe,we),f=f+Math.imul(C,xe)|0,m=Math.imul(C,we),L=L+Math.imul(Pe,ye)|0,f=f+Math.imul(Pe,ot)|0,f=f+Math.imul($e,ye)|0,m=m+Math.imul($e,ot)|0,L=L+Math.imul(Ue,at)|0,f=f+Math.imul(Ue,ct)|0,f=f+Math.imul(De,at)|0,m=m+Math.imul(De,ct)|0,L=L+Math.imul(Fe,lt)|0,f=f+Math.imul(Fe,ut)|0,f=f+Math.imul(Ke,lt)|0,m=m+Math.imul(Ke,ut)|0,L=L+Math.imul(Te,dt)|0,f=f+Math.imul(Te,ht)|0,f=f+Math.imul(ke,dt)|0,m=m+Math.imul(ke,ht)|0,L=L+Math.imul(ve,ft)|0,f=f+Math.imul(ve,pt)|0,f=f+Math.imul(Ae,ft)|0,m=m+Math.imul(Ae,pt)|0,L=L+Math.imul(ie,mt)|0,f=f+Math.imul(ie,gt)|0,f=f+Math.imul(ae,mt)|0,m=m+Math.imul(ae,gt)|0,L=L+Math.imul(P,yt)|0,f=f+Math.imul(P,wt)|0,f=f+Math.imul(Z,yt)|0,m=m+Math.imul(Z,wt)|0;var aa=(K+L|0)+((f&8191)<<13)|0;K=(m+(f>>>13)|0)+(aa>>>26)|0,aa&=67108863,L=Math.imul(v,xe),f=Math.imul(v,we),f=f+Math.imul(D,xe)|0,m=Math.imul(D,we),L=L+Math.imul(qe,ye)|0,f=f+Math.imul(qe,ot)|0,f=f+Math.imul(C,ye)|0,m=m+Math.imul(C,ot)|0,L=L+Math.imul(Pe,at)|0,f=f+Math.imul(Pe,ct)|0,f=f+Math.imul($e,at)|0,m=m+Math.imul($e,ct)|0,L=L+Math.imul(Ue,lt)|0,f=f+Math.imul(Ue,ut)|0,f=f+Math.imul(De,lt)|0,m=m+Math.imul(De,ut)|0,L=L+Math.imul(Fe,dt)|0,f=f+Math.imul(Fe,ht)|0,f=f+Math.imul(Ke,dt)|0,m=m+Math.imul(Ke,ht)|0,L=L+Math.imul(Te,ft)|0,f=f+Math.imul(Te,pt)|0,f=f+Math.imul(ke,ft)|0,m=m+Math.imul(ke,pt)|0,L=L+Math.imul(ve,mt)|0,f=f+Math.imul(ve,gt)|0,f=f+Math.imul(Ae,mt)|0,m=m+Math.imul(Ae,gt)|0,L=L+Math.imul(ie,yt)|0,f=f+Math.imul(ie,wt)|0,f=f+Math.imul(ae,yt)|0,m=m+Math.imul(ae,wt)|0,L=L+Math.imul(P,bt)|0,f=f+Math.imul(P,xt)|0,f=f+Math.imul(Z,bt)|0,m=m+Math.imul(Z,xt)|0;var ca=(K+L|0)+((f&8191)<<13)|0;K=(m+(f>>>13)|0)+(ca>>>26)|0,ca&=67108863,L=Math.imul(X,xe),f=Math.imul(X,we),f=f+Math.imul(re,xe)|0,m=Math.imul(re,we),L=L+Math.imul(v,ye)|0,f=f+Math.imul(v,ot)|0,f=f+Math.imul(D,ye)|0,m=m+Math.imul(D,ot)|0,L=L+Math.imul(qe,at)|0,f=f+Math.imul(qe,ct)|0,f=f+Math.imul(C,at)|0,m=m+Math.imul(C,ct)|0,L=L+Math.imul(Pe,lt)|0,f=f+Math.imul(Pe,ut)|0,f=f+Math.imul($e,lt)|0,m=m+Math.imul($e,ut)|0,L=L+Math.imul(Ue,dt)|0,f=f+Math.imul(Ue,ht)|0,f=f+Math.imul(De,dt)|0,m=m+Math.imul(De,ht)|0,L=L+Math.imul(Fe,ft)|0,f=f+Math.imul(Fe,pt)|0,f=f+Math.imul(Ke,ft)|0,m=m+Math.imul(Ke,pt)|0,L=L+Math.imul(Te,mt)|0,f=f+Math.imul(Te,gt)|0,f=f+Math.imul(ke,mt)|0,m=m+Math.imul(ke,gt)|0,L=L+Math.imul(ve,yt)|0,f=f+Math.imul(ve,wt)|0,f=f+Math.imul(Ae,yt)|0,m=m+Math.imul(Ae,wt)|0,L=L+Math.imul(ie,bt)|0,f=f+Math.imul(ie,xt)|0,f=f+Math.imul(ae,bt)|0,m=m+Math.imul(ae,xt)|0,L=L+Math.imul(P,vt)|0,f=f+Math.imul(P,St)|0,f=f+Math.imul(Z,vt)|0,m=m+Math.imul(Z,St)|0;var la=(K+L|0)+((f&8191)<<13)|0;K=(m+(f>>>13)|0)+(la>>>26)|0,la&=67108863,L=Math.imul(X,ye),f=Math.imul(X,ot),f=f+Math.imul(re,ye)|0,m=Math.imul(re,ot),L=L+Math.imul(v,at)|0,f=f+Math.imul(v,ct)|0,f=f+Math.imul(D,at)|0,m=m+Math.imul(D,ct)|0,L=L+Math.imul(qe,lt)|0,f=f+Math.imul(qe,ut)|0,f=f+Math.imul(C,lt)|0,m=m+Math.imul(C,ut)|0,L=L+Math.imul(Pe,dt)|0,f=f+Math.imul(Pe,ht)|0,f=f+Math.imul($e,dt)|0,m=m+Math.imul($e,ht)|0,L=L+Math.imul(Ue,ft)|0,f=f+Math.imul(Ue,pt)|0,f=f+Math.imul(De,ft)|0,m=m+Math.imul(De,pt)|0,L=L+Math.imul(Fe,mt)|0,f=f+Math.imul(Fe,gt)|0,f=f+Math.imul(Ke,mt)|0,m=m+Math.imul(Ke,gt)|0,L=L+Math.imul(Te,yt)|0,f=f+Math.imul(Te,wt)|0,f=f+Math.imul(ke,yt)|0,m=m+Math.imul(ke,wt)|0,L=L+Math.imul(ve,bt)|0,f=f+Math.imul(ve,xt)|0,f=f+Math.imul(Ae,bt)|0,m=m+Math.imul(Ae,xt)|0,L=L+Math.imul(ie,vt)|0,f=f+Math.imul(ie,St)|0,f=f+Math.imul(ae,vt)|0,m=m+Math.imul(ae,St)|0;var ua=(K+L|0)+((f&8191)<<13)|0;K=(m+(f>>>13)|0)+(ua>>>26)|0,ua&=67108863,L=Math.imul(X,at),f=Math.imul(X,ct),f=f+Math.imul(re,at)|0,m=Math.imul(re,ct),L=L+Math.imul(v,lt)|0,f=f+Math.imul(v,ut)|0,f=f+Math.imul(D,lt)|0,m=m+Math.imul(D,ut)|0,L=L+Math.imul(qe,dt)|0,f=f+Math.imul(qe,ht)|0,f=f+Math.imul(C,dt)|0,m=m+Math.imul(C,ht)|0,L=L+Math.imul(Pe,ft)|0,f=f+Math.imul(Pe,pt)|0,f=f+Math.imul($e,ft)|0,m=m+Math.imul($e,pt)|0,L=L+Math.imul(Ue,mt)|0,f=f+Math.imul(Ue,gt)|0,f=f+Math.imul(De,mt)|0,m=m+Math.imul(De,gt)|0,L=L+Math.imul(Fe,yt)|0,f=f+Math.imul(Fe,wt)|0,f=f+Math.imul(Ke,yt)|0,m=m+Math.imul(Ke,wt)|0,L=L+Math.imul(Te,bt)|0,f=f+Math.imul(Te,xt)|0,f=f+Math.imul(ke,bt)|0,m=m+Math.imul(ke,xt)|0,L=L+Math.imul(ve,vt)|0,f=f+Math.imul(ve,St)|0,f=f+Math.imul(Ae,vt)|0,m=m+Math.imul(Ae,St)|0;var da=(K+L|0)+((f&8191)<<13)|0;K=(m+(f>>>13)|0)+(da>>>26)|0,da&=67108863,L=Math.imul(X,lt),f=Math.imul(X,ut),f=f+Math.imul(re,lt)|0,m=Math.imul(re,ut),L=L+Math.imul(v,dt)|0,f=f+Math.imul(v,ht)|0,f=f+Math.imul(D,dt)|0,m=m+Math.imul(D,ht)|0,L=L+Math.imul(qe,ft)|0,f=f+Math.imul(qe,pt)|0,f=f+Math.imul(C,ft)|0,m=m+Math.imul(C,pt)|0,L=L+Math.imul(Pe,mt)|0,f=f+Math.imul(Pe,gt)|0,f=f+Math.imul($e,mt)|0,m=m+Math.imul($e,gt)|0,L=L+Math.imul(Ue,yt)|0,f=f+Math.imul(Ue,wt)|0,f=f+Math.imul(De,yt)|0,m=m+Math.imul(De,wt)|0,L=L+Math.imul(Fe,bt)|0,f=f+Math.imul(Fe,xt)|0,f=f+Math.imul(Ke,bt)|0,m=m+Math.imul(Ke,xt)|0,L=L+Math.imul(Te,vt)|0,f=f+Math.imul(Te,St)|0,f=f+Math.imul(ke,vt)|0,m=m+Math.imul(ke,St)|0;var ha=(K+L|0)+((f&8191)<<13)|0;K=(m+(f>>>13)|0)+(ha>>>26)|0,ha&=67108863,L=Math.imul(X,dt),f=Math.imul(X,ht),f=f+Math.imul(re,dt)|0,m=Math.imul(re,ht),L=L+Math.imul(v,ft)|0,f=f+Math.imul(v,pt)|0,f=f+Math.imul(D,ft)|0,m=m+Math.imul(D,pt)|0,L=L+Math.imul(qe,mt)|0,f=f+Math.imul(qe,gt)|0,f=f+Math.imul(C,mt)|0,m=m+Math.imul(C,gt)|0,L=L+Math.imul(Pe,yt)|0,f=f+Math.imul(Pe,wt)|0,f=f+Math.imul($e,yt)|0,m=m+Math.imul($e,wt)|0,L=L+Math.imul(Ue,bt)|0,f=f+Math.imul(Ue,xt)|0,f=f+Math.imul(De,bt)|0,m=m+Math.imul(De,xt)|0,L=L+Math.imul(Fe,vt)|0,f=f+Math.imul(Fe,St)|0,f=f+Math.imul(Ke,vt)|0,m=m+Math.imul(Ke,St)|0;var fa=(K+L|0)+((f&8191)<<13)|0;K=(m+(f>>>13)|0)+(fa>>>26)|0,fa&=67108863,L=Math.imul(X,ft),f=Math.imul(X,pt),f=f+Math.imul(re,ft)|0,m=Math.imul(re,pt),L=L+Math.imul(v,mt)|0,f=f+Math.imul(v,gt)|0,f=f+Math.imul(D,mt)|0,m=m+Math.imul(D,gt)|0,L=L+Math.imul(qe,yt)|0,f=f+Math.imul(qe,wt)|0,f=f+Math.imul(C,yt)|0,m=m+Math.imul(C,wt)|0,L=L+Math.imul(Pe,bt)|0,f=f+Math.imul(Pe,xt)|0,f=f+Math.imul($e,bt)|0,m=m+Math.imul($e,xt)|0,L=L+Math.imul(Ue,vt)|0,f=f+Math.imul(Ue,St)|0,f=f+Math.imul(De,vt)|0,m=m+Math.imul(De,St)|0;var pa=(K+L|0)+((f&8191)<<13)|0;K=(m+(f>>>13)|0)+(pa>>>26)|0,pa&=67108863,L=Math.imul(X,mt),f=Math.imul(X,gt),f=f+Math.imul(re,mt)|0,m=Math.imul(re,gt),L=L+Math.imul(v,yt)|0,f=f+Math.imul(v,wt)|0,f=f+Math.imul(D,yt)|0,m=m+Math.imul(D,wt)|0,L=L+Math.imul(qe,bt)|0,f=f+Math.imul(qe,xt)|0,f=f+Math.imul(C,bt)|0,m=m+Math.imul(C,xt)|0,L=L+Math.imul(Pe,vt)|0,f=f+Math.imul(Pe,St)|0,f=f+Math.imul($e,vt)|0,m=m+Math.imul($e,St)|0;var ma=(K+L|0)+((f&8191)<<13)|0;K=(m+(f>>>13)|0)+(ma>>>26)|0,ma&=67108863,L=Math.imul(X,yt),f=Math.imul(X,wt),f=f+Math.imul(re,yt)|0,m=Math.imul(re,wt),L=L+Math.imul(v,bt)|0,f=f+Math.imul(v,xt)|0,f=f+Math.imul(D,bt)|0,m=m+Math.imul(D,xt)|0,L=L+Math.imul(qe,vt)|0,f=f+Math.imul(qe,St)|0,f=f+Math.imul(C,vt)|0,m=m+Math.imul(C,St)|0;var ga=(K+L|0)+((f&8191)<<13)|0;K=(m+(f>>>13)|0)+(ga>>>26)|0,ga&=67108863,L=Math.imul(X,bt),f=Math.imul(X,xt),f=f+Math.imul(re,bt)|0,m=Math.imul(re,xt),L=L+Math.imul(v,vt)|0,f=f+Math.imul(v,St)|0,f=f+Math.imul(D,vt)|0,m=m+Math.imul(D,St)|0;var ya=(K+L|0)+((f&8191)<<13)|0;K=(m+(f>>>13)|0)+(ya>>>26)|0,ya&=67108863,L=Math.imul(X,vt),f=Math.imul(X,St),f=f+Math.imul(re,vt)|0,m=Math.imul(re,St);var wa=(K+L|0)+((f&8191)<<13)|0;return K=(m+(f>>>13)|0)+(wa>>>26)|0,wa&=67108863,U[0]=ea,U[1]=ta,U[2]=na,U[3]=ra,U[4]=sa,U[5]=ia,U[6]=oa,U[7]=aa,U[8]=ca,U[9]=la,U[10]=ua,U[11]=da,U[12]=ha,U[13]=fa,U[14]=pa,U[15]=ma,U[16]=ga,U[17]=ya,U[18]=wa,K!==0&&(U[19]=K,N.length++),N};Math.imul||(k=A);function M(_,u,b){b.negative=u.negative^_.negative,b.length=_.length+u.length;for(var N=0,j=0,R=0;R<b.length-1;R++){var U=j;j=0;for(var K=N&67108863,L=Math.min(R,u.length-1),f=Math.max(0,R-_.length+1);f<=L;f++){var m=R-f,T=_.words[m]|0,P=u.words[f]|0,Z=T*P,ne=Z&67108863;U=U+(Z/67108864|0)|0,ne=ne+K|0,K=ne&67108863,U=U+(ne>>>26)|0,j+=U>>>26,U&=67108863}b.words[R]=K,N=U,U=j}return N!==0?b.words[R]=N:b.length--,b._strip()}function O(_,u,b){return M(_,u,b)}i.prototype.mulTo=function(u,b){var N,j=this.length+u.length;return this.length===10&&u.length===10?N=k(this,u,b):j<63?N=A(this,u,b):j<1024?N=M(this,u,b):N=O(this,u,b),N},i.prototype.mul=function(u){var b=new i(null);return b.words=new Array(this.length+u.length),this.mulTo(u,b)},i.prototype.mulf=function(u){var b=new i(null);return b.words=new Array(this.length+u.length),O(this,u,b)},i.prototype.imul=function(u){return this.clone().mulTo(u,this)},i.prototype.imuln=function(u){var b=u<0;b&&(u=-u),r(typeof u=="number"),r(u<67108864);for(var N=0,j=0;j<this.length;j++){var R=(this.words[j]|0)*u,U=(R&67108863)+(N&67108863);N>>=26,N+=R/67108864|0,N+=U>>>26,this.words[j]=U&67108863}return N!==0&&(this.words[j]=N,this.length++),b?this.ineg():this},i.prototype.muln=function(u){return this.clone().imuln(u)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(u){var b=S(u);if(b.length===0)return new i(1);for(var N=this,j=0;j<b.length&&b[j]===0;j++,N=N.sqr());if(++j<b.length)for(var R=N.sqr();j<b.length;j++,R=R.sqr())b[j]!==0&&(N=N.mul(R));return N},i.prototype.iushln=function(u){r(typeof u=="number"&&u>=0);var b=u%26,N=(u-b)/26,j=67108863>>>26-b<<26-b,R;if(b!==0){var U=0;for(R=0;R<this.length;R++){var K=this.words[R]&j,L=(this.words[R]|0)-K<<b;this.words[R]=L|U,U=K>>>26-b}U&&(this.words[R]=U,this.length++)}if(N!==0){for(R=this.length-1;R>=0;R--)this.words[R+N]=this.words[R];for(R=0;R<N;R++)this.words[R]=0;this.length+=N}return this._strip()},i.prototype.ishln=function(u){return r(this.negative===0),this.iushln(u)},i.prototype.iushrn=function(u,b,N){r(typeof u=="number"&&u>=0);var j;b?j=(b-b%26)/26:j=0;var R=u%26,U=Math.min((u-R)/26,this.length),K=67108863^67108863>>>R<<R,L=N;if(j-=U,j=Math.max(0,j),L){for(var f=0;f<U;f++)L.words[f]=this.words[f];L.length=U}if(U!==0)if(this.length>U)for(this.length-=U,f=0;f<this.length;f++)this.words[f]=this.words[f+U];else this.words[0]=0,this.length=1;var m=0;for(f=this.length-1;f>=0&&(m!==0||f>=j);f--){var T=this.words[f]|0;this.words[f]=m<<26-R|T>>>R,m=T&K}return L&&m!==0&&(L.words[L.length++]=m),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(u,b,N){return r(this.negative===0),this.iushrn(u,b,N)},i.prototype.shln=function(u){return this.clone().ishln(u)},i.prototype.ushln=function(u){return this.clone().iushln(u)},i.prototype.shrn=function(u){return this.clone().ishrn(u)},i.prototype.ushrn=function(u){return this.clone().iushrn(u)},i.prototype.testn=function(u){r(typeof u=="number"&&u>=0);var b=u%26,N=(u-b)/26,j=1<<b;if(this.length<=N)return!1;var R=this.words[N];return!!(R&j)},i.prototype.imaskn=function(u){r(typeof u=="number"&&u>=0);var b=u%26,N=(u-b)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=N)return this;if(b!==0&&N++,this.length=Math.min(N,this.length),b!==0){var j=67108863^67108863>>>b<<b;this.words[this.length-1]&=j}return this._strip()},i.prototype.maskn=function(u){return this.clone().imaskn(u)},i.prototype.iaddn=function(u){return r(typeof u=="number"),r(u<67108864),u<0?this.isubn(-u):this.negative!==0?this.length===1&&(this.words[0]|0)<=u?(this.words[0]=u-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(u),this.negative=1,this):this._iaddn(u)},i.prototype._iaddn=function(u){this.words[0]+=u;for(var b=0;b<this.length&&this.words[b]>=67108864;b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},i.prototype.isubn=function(u){if(r(typeof u=="number"),r(u<67108864),u<0)return this.iaddn(-u);if(this.negative!==0)return this.negative=0,this.iaddn(u),this.negative=1,this;if(this.words[0]-=u,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=67108864,this.words[b+1]-=1;return this._strip()},i.prototype.addn=function(u){return this.clone().iaddn(u)},i.prototype.subn=function(u){return this.clone().isubn(u)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(u,b,N){var j=u.length+N,R;this._expand(j);var U,K=0;for(R=0;R<u.length;R++){U=(this.words[R+N]|0)+K;var L=(u.words[R]|0)*b;U-=L&67108863,K=(U>>26)-(L/67108864|0),this.words[R+N]=U&67108863}for(;R<this.length-N;R++)U=(this.words[R+N]|0)+K,K=U>>26,this.words[R+N]=U&67108863;if(K===0)return this._strip();for(r(K===-1),K=0,R=0;R<this.length;R++)U=-(this.words[R]|0)+K,K=U>>26,this.words[R]=U&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(u,b){var N=this.length-u.length,j=this.clone(),R=u,U=R.words[R.length-1]|0,K=this._countBits(U);N=26-K,N!==0&&(R=R.ushln(N),j.iushln(N),U=R.words[R.length-1]|0);var L=j.length-R.length,f;if(b!=="mod"){f=new i(null),f.length=L+1,f.words=new Array(f.length);for(var m=0;m<f.length;m++)f.words[m]=0}var T=j.clone()._ishlnsubmul(R,1,L);T.negative===0&&(j=T,f&&(f.words[L]=1));for(var P=L-1;P>=0;P--){var Z=(j.words[R.length+P]|0)*67108864+(j.words[R.length+P-1]|0);for(Z=Math.min(Z/U|0,67108863),j._ishlnsubmul(R,Z,P);j.negative!==0;)Z--,j.negative=0,j._ishlnsubmul(R,1,P),j.isZero()||(j.negative^=1);f&&(f.words[P]=Z)}return f&&f._strip(),j._strip(),b!=="div"&&N!==0&&j.iushrn(N),{div:f||null,mod:j}},i.prototype.divmod=function(u,b,N){if(r(!u.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var j,R,U;return this.negative!==0&&u.negative===0?(U=this.neg().divmod(u,b),b!=="mod"&&(j=U.div.neg()),b!=="div"&&(R=U.mod.neg(),N&&R.negative!==0&&R.iadd(u)),{div:j,mod:R}):this.negative===0&&u.negative!==0?(U=this.divmod(u.neg(),b),b!=="mod"&&(j=U.div.neg()),{div:j,mod:U.mod}):this.negative&u.negative?(U=this.neg().divmod(u.neg(),b),b!=="div"&&(R=U.mod.neg(),N&&R.negative!==0&&R.isub(u)),{div:U.div,mod:R}):u.length>this.length||this.cmp(u)<0?{div:new i(0),mod:this}:u.length===1?b==="div"?{div:this.divn(u.words[0]),mod:null}:b==="mod"?{div:null,mod:new i(this.modrn(u.words[0]))}:{div:this.divn(u.words[0]),mod:new i(this.modrn(u.words[0]))}:this._wordDiv(u,b)},i.prototype.div=function(u){return this.divmod(u,"div",!1).div},i.prototype.mod=function(u){return this.divmod(u,"mod",!1).mod},i.prototype.umod=function(u){return this.divmod(u,"mod",!0).mod},i.prototype.divRound=function(u){var b=this.divmod(u);if(b.mod.isZero())return b.div;var N=b.div.negative!==0?b.mod.isub(u):b.mod,j=u.ushrn(1),R=u.andln(1),U=N.cmp(j);return U<0||R===1&&U===0?b.div:b.div.negative!==0?b.div.isubn(1):b.div.iaddn(1)},i.prototype.modrn=function(u){var b=u<0;b&&(u=-u),r(u<=67108863);for(var N=(1<<26)%u,j=0,R=this.length-1;R>=0;R--)j=(N*j+(this.words[R]|0))%u;return b?-j:j},i.prototype.modn=function(u){return this.modrn(u)},i.prototype.idivn=function(u){var b=u<0;b&&(u=-u),r(u<=67108863);for(var N=0,j=this.length-1;j>=0;j--){var R=(this.words[j]|0)+N*67108864;this.words[j]=R/u|0,N=R%u}return this._strip(),b?this.ineg():this},i.prototype.divn=function(u){return this.clone().idivn(u)},i.prototype.egcd=function(u){r(u.negative===0),r(!u.isZero());var b=this,N=u.clone();b.negative!==0?b=b.umod(u):b=b.clone();for(var j=new i(1),R=new i(0),U=new i(0),K=new i(1),L=0;b.isEven()&&N.isEven();)b.iushrn(1),N.iushrn(1),++L;for(var f=N.clone(),m=b.clone();!b.isZero();){for(var T=0,P=1;!(b.words[0]&P)&&T<26;++T,P<<=1);if(T>0)for(b.iushrn(T);T-- >0;)(j.isOdd()||R.isOdd())&&(j.iadd(f),R.isub(m)),j.iushrn(1),R.iushrn(1);for(var Z=0,ne=1;!(N.words[0]&ne)&&Z<26;++Z,ne<<=1);if(Z>0)for(N.iushrn(Z);Z-- >0;)(U.isOdd()||K.isOdd())&&(U.iadd(f),K.isub(m)),U.iushrn(1),K.iushrn(1);b.cmp(N)>=0?(b.isub(N),j.isub(U),R.isub(K)):(N.isub(b),U.isub(j),K.isub(R))}return{a:U,b:K,gcd:N.iushln(L)}},i.prototype._invmp=function(u){r(u.negative===0),r(!u.isZero());var b=this,N=u.clone();b.negative!==0?b=b.umod(u):b=b.clone();for(var j=new i(1),R=new i(0),U=N.clone();b.cmpn(1)>0&&N.cmpn(1)>0;){for(var K=0,L=1;!(b.words[0]&L)&&K<26;++K,L<<=1);if(K>0)for(b.iushrn(K);K-- >0;)j.isOdd()&&j.iadd(U),j.iushrn(1);for(var f=0,m=1;!(N.words[0]&m)&&f<26;++f,m<<=1);if(f>0)for(N.iushrn(f);f-- >0;)R.isOdd()&&R.iadd(U),R.iushrn(1);b.cmp(N)>=0?(b.isub(N),j.isub(R)):(N.isub(b),R.isub(j))}var T;return b.cmpn(1)===0?T=j:T=R,T.cmpn(0)<0&&T.iadd(u),T},i.prototype.gcd=function(u){if(this.isZero())return u.abs();if(u.isZero())return this.abs();var b=this.clone(),N=u.clone();b.negative=0,N.negative=0;for(var j=0;b.isEven()&&N.isEven();j++)b.iushrn(1),N.iushrn(1);do{for(;b.isEven();)b.iushrn(1);for(;N.isEven();)N.iushrn(1);var R=b.cmp(N);if(R<0){var U=b;b=N,N=U}else if(R===0||N.cmpn(1)===0)break;b.isub(N)}while(!0);return N.iushln(j)},i.prototype.invm=function(u){return this.egcd(u).a.umod(u)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(u){return this.words[0]&u},i.prototype.bincn=function(u){r(typeof u=="number");var b=u%26,N=(u-b)/26,j=1<<b;if(this.length<=N)return this._expand(N+1),this.words[N]|=j,this;for(var R=j,U=N;R!==0&&U<this.length;U++){var K=this.words[U]|0;K+=R,R=K>>>26,K&=67108863,this.words[U]=K}return R!==0&&(this.words[U]=R,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(u){var b=u<0;if(this.negative!==0&&!b)return-1;if(this.negative===0&&b)return 1;this._strip();var N;if(this.length>1)N=1;else{b&&(u=-u),r(u<=67108863,"Number is too big");var j=this.words[0]|0;N=j===u?0:j<u?-1:1}return this.negative!==0?-N|0:N},i.prototype.cmp=function(u){if(this.negative!==0&&u.negative===0)return-1;if(this.negative===0&&u.negative!==0)return 1;var b=this.ucmp(u);return this.negative!==0?-b|0:b},i.prototype.ucmp=function(u){if(this.length>u.length)return 1;if(this.length<u.length)return-1;for(var b=0,N=this.length-1;N>=0;N--){var j=this.words[N]|0,R=u.words[N]|0;if(j!==R){j<R?b=-1:j>R&&(b=1);break}}return b},i.prototype.gtn=function(u){return this.cmpn(u)===1},i.prototype.gt=function(u){return this.cmp(u)===1},i.prototype.gten=function(u){return this.cmpn(u)>=0},i.prototype.gte=function(u){return this.cmp(u)>=0},i.prototype.ltn=function(u){return this.cmpn(u)===-1},i.prototype.lt=function(u){return this.cmp(u)===-1},i.prototype.lten=function(u){return this.cmpn(u)<=0},i.prototype.lte=function(u){return this.cmp(u)<=0},i.prototype.eqn=function(u){return this.cmpn(u)===0},i.prototype.eq=function(u){return this.cmp(u)===0},i.red=function(u){return new q(u)},i.prototype.toRed=function(u){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),u.convertTo(this)._forceRed(u)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(u){return this.red=u,this},i.prototype.forceRed=function(u){return r(!this.red,"Already a number in reduction context"),this._forceRed(u)},i.prototype.redAdd=function(u){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,u)},i.prototype.redIAdd=function(u){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,u)},i.prototype.redSub=function(u){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,u)},i.prototype.redISub=function(u){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,u)},i.prototype.redShl=function(u){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,u)},i.prototype.redMul=function(u){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.mul(this,u)},i.prototype.redIMul=function(u){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.imul(this,u)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(u){return r(this.red&&!u.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,u)};var B={k256:null,p224:null,p192:null,p25519:null};function z(_,u){this.name=_,this.p=new i(u,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}z.prototype._tmp=function(){var u=new i(null);return u.words=new Array(Math.ceil(this.n/13)),u},z.prototype.ireduce=function(u){var b=u,N;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),N=b.bitLength();while(N>this.n);var j=N<this.n?-1:b.ucmp(this.p);return j===0?(b.words[0]=0,b.length=1):j>0?b.isub(this.p):b.strip!==void 0?b.strip():b._strip(),b},z.prototype.split=function(u,b){u.iushrn(this.n,0,b)},z.prototype.imulK=function(u){return u.imul(this.k)};function V(){z.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(V,z),V.prototype.split=function(u,b){for(var N=4194303,j=Math.min(u.length,9),R=0;R<j;R++)b.words[R]=u.words[R];if(b.length=j,u.length<=9){u.words[0]=0,u.length=1;return}var U=u.words[9];for(b.words[b.length++]=U&N,R=10;R<u.length;R++){var K=u.words[R]|0;u.words[R-10]=(K&N)<<4|U>>>22,U=K}U>>>=22,u.words[R-10]=U,U===0&&u.length>10?u.length-=10:u.length-=9},V.prototype.imulK=function(u){u.words[u.length]=0,u.words[u.length+1]=0,u.length+=2;for(var b=0,N=0;N<u.length;N++){var j=u.words[N]|0;b+=j*977,u.words[N]=b&67108863,b=j*64+(b/67108864|0)}return u.words[u.length-1]===0&&(u.length--,u.words[u.length-1]===0&&u.length--),u};function H(){z.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(H,z);function F(){z.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(F,z);function $(){z.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s($,z),$.prototype.imulK=function(u){for(var b=0,N=0;N<u.length;N++){var j=(u.words[N]|0)*19+b,R=j&67108863;j>>>=26,u.words[N]=R,b=j}return b!==0&&(u.words[u.length++]=b),u},i._prime=function(u){if(B[u])return B[u];var b;if(u==="k256")b=new V;else if(u==="p224")b=new H;else if(u==="p192")b=new F;else if(u==="p25519")b=new $;else throw new Error("Unknown prime "+u);return B[u]=b,b};function q(_){if(typeof _=="string"){var u=i._prime(_);this.m=u.p,this.prime=u}else r(_.gtn(1),"modulus must be greater than 1"),this.m=_,this.prime=null}q.prototype._verify1=function(u){r(u.negative===0,"red works only with positives"),r(u.red,"red works only with red numbers")},q.prototype._verify2=function(u,b){r((u.negative|b.negative)===0,"red works only with positives"),r(u.red&&u.red===b.red,"red works only with red numbers")},q.prototype.imod=function(u){return this.prime?this.prime.ireduce(u)._forceRed(this):(h(u,u.umod(this.m)._forceRed(this)),u)},q.prototype.neg=function(u){return u.isZero()?u.clone():this.m.sub(u)._forceRed(this)},q.prototype.add=function(u,b){this._verify2(u,b);var N=u.add(b);return N.cmp(this.m)>=0&&N.isub(this.m),N._forceRed(this)},q.prototype.iadd=function(u,b){this._verify2(u,b);var N=u.iadd(b);return N.cmp(this.m)>=0&&N.isub(this.m),N},q.prototype.sub=function(u,b){this._verify2(u,b);var N=u.sub(b);return N.cmpn(0)<0&&N.iadd(this.m),N._forceRed(this)},q.prototype.isub=function(u,b){this._verify2(u,b);var N=u.isub(b);return N.cmpn(0)<0&&N.iadd(this.m),N},q.prototype.shl=function(u,b){return this._verify1(u),this.imod(u.ushln(b))},q.prototype.imul=function(u,b){return this._verify2(u,b),this.imod(u.imul(b))},q.prototype.mul=function(u,b){return this._verify2(u,b),this.imod(u.mul(b))},q.prototype.isqr=function(u){return this.imul(u,u.clone())},q.prototype.sqr=function(u){return this.mul(u,u)},q.prototype.sqrt=function(u){if(u.isZero())return u.clone();var b=this.m.andln(3);if(r(b%2===1),b===3){var N=this.m.add(new i(1)).iushrn(2);return this.pow(u,N)}for(var j=this.m.subn(1),R=0;!j.isZero()&&j.andln(1)===0;)R++,j.iushrn(1);r(!j.isZero());var U=new i(1).toRed(this),K=U.redNeg(),L=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new i(2*f*f).toRed(this);this.pow(f,L).cmp(K)!==0;)f.redIAdd(K);for(var m=this.pow(f,j),T=this.pow(u,j.addn(1).iushrn(1)),P=this.pow(u,j),Z=R;P.cmp(U)!==0;){for(var ne=P,ie=0;ne.cmp(U)!==0;ie++)ne=ne.redSqr();r(ie<Z);var ae=this.pow(m,new i(1).iushln(Z-ie-1));T=T.redMul(ae),m=ae.redSqr(),P=P.redMul(m),Z=ie}return T},q.prototype.invm=function(u){var b=u._invmp(this.m);return b.negative!==0?(b.negative=0,this.imod(b).redNeg()):this.imod(b)},q.prototype.pow=function(u,b){if(b.isZero())return new i(1).toRed(this);if(b.cmpn(1)===0)return u.clone();var N=4,j=new Array(1<<N);j[0]=new i(1).toRed(this),j[1]=u;for(var R=2;R<j.length;R++)j[R]=this.mul(j[R-1],u);var U=j[0],K=0,L=0,f=b.bitLength()%26;for(f===0&&(f=26),R=b.length-1;R>=0;R--){for(var m=b.words[R],T=f-1;T>=0;T--){var P=m>>T&1;if(U!==j[0]&&(U=this.sqr(U)),P===0&&K===0){L=0;continue}K<<=1,K|=P,L++,!(L!==N&&(R!==0||T!==0))&&(U=this.mul(U,j[K]),L=0,K=0)}f=26}return U},q.prototype.convertTo=function(u){var b=u.umod(this.m);return b===u?b.clone():b},q.prototype.convertFrom=function(u){var b=u.clone();return b.red=null,b},i.mont=function(u){return new Y(u)};function Y(_){q.call(this,_),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(Y,q),Y.prototype.convertTo=function(u){return this.imod(u.ushln(this.shift))},Y.prototype.convertFrom=function(u){var b=this.imod(u.mul(this.rinv));return b.red=null,b},Y.prototype.imul=function(u,b){if(u.isZero()||b.isZero())return u.words[0]=0,u.length=1,u;var N=u.imul(b),j=N.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),R=N.isub(j).iushrn(this.shift),U=R;return R.cmp(this.m)>=0?U=R.isub(this.m):R.cmpn(0)<0&&(U=R.iadd(this.m)),U._forceRed(this)},Y.prototype.mul=function(u,b){if(u.isZero()||b.isZero())return new i(0)._forceRed(this);var N=u.mul(b),j=N.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),R=N.isub(j).iushrn(this.shift),U=R;return R.cmp(this.m)>=0?U=R.isub(this.m):R.cmpn(0)<0&&(U=R.iadd(this.m)),U._forceRed(this)},Y.prototype.invm=function(u){var b=this.imod(u._invmp(this.m).mul(this.r2));return b._forceRed(this)}})(n,Cg)}(Gi)),Gi.exports}var Tg=Tf();const Qu=jr(Tg);var Oi={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Zu;function _f(){return Zu||(Zu=1,function(n,e){var t=ql(),r=t.Buffer;function s(o,a){for(var c in o)a[c]=o[c]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?n.exports=t:(s(t,e),e.Buffer=i);function i(o,a,c){return r(o,a,c)}i.prototype=Object.create(r.prototype),s(r,i),i.from=function(o,a,c){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,a,c)},i.alloc=function(o,a,c){if(typeof o!="number")throw new TypeError("Argument must be a number");var d=r(o);return a!==void 0?typeof c=="string"?d.fill(a,c):d.fill(a):d.fill(0),d},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(o)}}(Oi,Oi.exports)),Oi.exports}var ka,Ju;function _g(){if(Ju)return ka;Ju=1;var n=_f().Buffer;function e(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),a=o.charCodeAt(0);if(r[a]!==255)throw new TypeError(o+" is ambiguous");r[a]=i}var c=t.length,d=t.charAt(0),h=Math.log(c)/Math.log(256),p=Math.log(256)/Math.log(c);function x(g){if((Array.isArray(g)||g instanceof Uint8Array)&&(g=n.from(g)),!n.isBuffer(g))throw new TypeError("Expected Buffer");if(g.length===0)return"";for(var S=0,A=0,k=0,M=g.length;k!==M&&g[k]===0;)k++,S++;for(var O=(M-k)*p+1>>>0,B=new Uint8Array(O);k!==M;){for(var z=g[k],V=0,H=O-1;(z!==0||V<A)&&H!==-1;H--,V++)z+=256*B[H]>>>0,B[H]=z%c>>>0,z=z/c>>>0;if(z!==0)throw new Error("Non-zero carry");A=V,k++}for(var F=O-A;F!==O&&B[F]===0;)F++;for(var $=d.repeat(S);F<O;++F)$+=t.charAt(B[F]);return $}function y(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return n.alloc(0);for(var S=0,A=0,k=0;g[S]===d;)A++,S++;for(var M=(g.length-S)*h+1>>>0,O=new Uint8Array(M);S<g.length;){var B=r[g.charCodeAt(S)];if(B===255)return;for(var z=0,V=M-1;(B!==0||z<k)&&V!==-1;V--,z++)B+=c*O[V]>>>0,O[V]=B%256>>>0,B=B/256>>>0;if(B!==0)throw new Error("Non-zero carry");k=z,S++}for(var H=M-k;H!==M&&O[H]===0;)H++;var F=n.allocUnsafe(A+(M-H));F.fill(0,0,A);for(var $=A;H!==M;)F[$++]=O[H++];return F}function E(g){var S=y(g);if(S)return S;throw new Error("Non-base"+c+" character")}return{encode:x,decodeUnsafe:y,decode:E}}return ka=e,ka}var La,Xu;function kg(){if(Xu)return La;Xu=1;var n=_g(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return La=n(e),La}var Lg=kg();const Pt=jr(Lg),Rg=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),rr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),sr=new Uint32Array(64);class Bg extends bf{constructor(){super(64,32,8,!1),this.A=rr[0]|0,this.B=rr[1]|0,this.C=rr[2]|0,this.D=rr[3]|0,this.E=rr[4]|0,this.F=rr[5]|0,this.G=rr[6]|0,this.H=rr[7]|0}get(){const{A:e,B:t,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,t,r,s,i,o,a,c]}set(e,t,r,s,i,o,a,c){this.A=e|0,this.B=t|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,t){for(let p=0;p<16;p++,t+=4)sr[p]=e.getUint32(t,!1);for(let p=16;p<64;p++){const x=sr[p-15],y=sr[p-2],E=En(x,7)^En(x,18)^x>>>3,g=En(y,17)^En(y,19)^y>>>10;sr[p]=g+sr[p-7]+E+sr[p-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:d,H:h}=this;for(let p=0;p<64;p++){const x=En(a,6)^En(a,11)^En(a,25),y=h+x+bm(a,c,d)+Rg[p]+sr[p]|0,g=(En(r,2)^En(r,13)^En(r,22))+xm(r,s,i)|0;h=d,d=c,c=a,a=o+y|0,o=i,i=s,s=r,r=y+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,d=d+this.G|0,h=h+this.H|0,this.set(r,s,i,o,a,c,d,h)}roundClean(){sr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const sl=yf(()=>new Bg);var Ve={},Ra,ed;function Og(){if(ed)return Ra;ed=1;var n=_f().Buffer;function e(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),a=o.charCodeAt(0);if(r[a]!==255)throw new TypeError(o+" is ambiguous");r[a]=i}var c=t.length,d=t.charAt(0),h=Math.log(c)/Math.log(256),p=Math.log(256)/Math.log(c);function x(g){if((Array.isArray(g)||g instanceof Uint8Array)&&(g=n.from(g)),!n.isBuffer(g))throw new TypeError("Expected Buffer");if(g.length===0)return"";for(var S=0,A=0,k=0,M=g.length;k!==M&&g[k]===0;)k++,S++;for(var O=(M-k)*p+1>>>0,B=new Uint8Array(O);k!==M;){for(var z=g[k],V=0,H=O-1;(z!==0||V<A)&&H!==-1;H--,V++)z+=256*B[H]>>>0,B[H]=z%c>>>0,z=z/c>>>0;if(z!==0)throw new Error("Non-zero carry");A=V,k++}for(var F=O-A;F!==O&&B[F]===0;)F++;for(var $=d.repeat(S);F<O;++F)$+=t.charAt(B[F]);return $}function y(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return n.alloc(0);for(var S=0,A=0,k=0;g[S]===d;)A++,S++;for(var M=(g.length-S)*h+1>>>0,O=new Uint8Array(M);S<g.length;){var B=r[g.charCodeAt(S)];if(B===255)return;for(var z=0,V=M-1;(B!==0||z<k)&&V!==-1;V--,z++)B+=c*O[V]>>>0,O[V]=B%256>>>0,B=B/256>>>0;if(B!==0)throw new Error("Non-zero carry");k=z,S++}for(var H=M-k;H!==M&&O[H]===0;)H++;var F=n.allocUnsafe(A+(M-H));F.fill(0,0,A);for(var $=A;H!==M;)F[$++]=O[H++];return F}function E(g){var S=y(g);if(S)return S;throw new Error("Non-base"+c+" character")}return{encode:x,decodeUnsafe:y,decode:E}}return Ra=e,Ra}var Ba,td;function Dg(){if(td)return Ba;td=1;var n=Og(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return Ba=n(e),Ba}function Un(n,e,t){return e<=n&&n<=t}function Ro(n){if(n===void 0)return{};if(n===Object(n))return n;throw TypeError("Could not convert argument to dictionary")}function Pg(n){for(var e=String(n),t=e.length,r=0,s=[];r<t;){var i=e.charCodeAt(r);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(r===t-1)s.push(65533);else{var o=n.charCodeAt(r+1);if(56320<=o&&o<=57343){var a=i&1023,c=o&1023;s.push(65536+(a<<10)+c),r+=1}else s.push(65533)}r+=1}return s}function Fg(n){for(var e="",t=0;t<n.length;++t){var r=n[t];r<=65535?e+=String.fromCharCode(r):(r-=65536,e+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return e}var co=-1;function Ql(n){this.tokens=[].slice.call(n)}Ql.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():co},prepend:function(n){if(Array.isArray(n))for(var e=n;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(n)},push:function(n){if(Array.isArray(n))for(var e=n;e.length;)this.tokens.push(e.shift());else this.tokens.push(n)}};var Ps=-1;function Oa(n,e){if(n)throw TypeError("Decoder error");return e||65533}var lo="utf-8";function uo(n,e){if(!(this instanceof uo))return new uo(n,e);if(n=n!==void 0?String(n).toLowerCase():lo,n!==lo)throw new Error("Encoding not supported. Only utf-8 is supported");e=Ro(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}uo.prototype={decode:function(e,t){var r;typeof e=="object"&&e instanceof ArrayBuffer?r=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):r=new Uint8Array(0),t=Ro(t),this._streaming||(this._decoder=new Ug({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!t.stream;for(var s=new Ql(r),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==Ps);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===Ps)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),Fg(i)}};function ho(n,e){if(!(this instanceof ho))return new ho(n,e);if(n=n!==void 0?String(n).toLowerCase():lo,n!==lo)throw new Error("Encoding not supported. Only utf-8 is supported");e=Ro(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}ho.prototype={encode:function(e,t){e=e?String(e):"",t=Ro(t),this._streaming||(this._encoder=new zg(this._options)),this._streaming=!!t.stream;for(var r=[],s=new Ql(Pg(e)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==Ps);)Array.isArray(i)?r.push.apply(r,i):r.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==Ps;)Array.isArray(i)?r.push.apply(r,i):r.push(i);this._encoder=null}return new Uint8Array(r)}};function Ug(n){var e=n.fatal,t=0,r=0,s=0,i=128,o=191;this.handler=function(a,c){if(c===co&&s!==0)return s=0,Oa(e);if(c===co)return Ps;if(s===0){if(Un(c,0,127))return c;if(Un(c,194,223))s=1,t=c-192;else if(Un(c,224,239))c===224&&(i=160),c===237&&(o=159),s=2,t=c-224;else if(Un(c,240,244))c===240&&(i=144),c===244&&(o=143),s=3,t=c-240;else return Oa(e);return t=t<<6*s,null}if(!Un(c,i,o))return t=s=r=0,i=128,o=191,a.prepend(c),Oa(e);if(i=128,o=191,r+=1,t+=c-128<<6*(s-r),r!==s)return null;var d=t;return t=s=r=0,d}}function zg(n){n.fatal,this.handler=function(e,t){if(t===co)return Ps;if(Un(t,0,127))return t;var r,s;Un(t,128,2047)?(r=1,s=192):Un(t,2048,65535)?(r=2,s=224):Un(t,65536,1114111)&&(r=3,s=240);for(var i=[(t>>6*r)+s];r>0;){var o=t>>6*(r-1);i.push(128|o&63),r-=1}return i}}const $g=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:uo,TextEncoder:ho},Symbol.toStringTag,{value:"Module"})),qg=Ol($g);var nd;function Wg(){if(nd)return Ve;nd=1;var n=Ve.__createBinding||(Object.create?function(F,$,q,Y){Y===void 0&&(Y=q),Object.defineProperty(F,Y,{enumerable:!0,get:function(){return $[q]}})}:function(F,$,q,Y){Y===void 0&&(Y=q),F[Y]=$[q]}),e=Ve.__setModuleDefault||(Object.create?function(F,$){Object.defineProperty(F,"default",{enumerable:!0,value:$})}:function(F,$){F.default=$}),t=Ve.__decorate||function(F,$,q,Y){var _=arguments.length,u=_<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,q):Y,b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(F,$,q,Y);else for(var N=F.length-1;N>=0;N--)(b=F[N])&&(u=(_<3?b(u):_>3?b($,q,u):b($,q))||u);return _>3&&u&&Object.defineProperty($,q,u),u},r=Ve.__importStar||function(F){if(F&&F.__esModule)return F;var $={};if(F!=null)for(var q in F)q!=="default"&&Object.hasOwnProperty.call(F,q)&&n($,F,q);return e($,F),$},s=Ve.__importDefault||function(F){return F&&F.__esModule?F:{default:F}};Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.deserializeUnchecked=Ve.deserialize=Ve.serialize=Ve.BinaryReader=Ve.BinaryWriter=Ve.BorshError=Ve.baseDecode=Ve.baseEncode=void 0;const i=s(Tf()),o=s(Dg()),a=r(qg),c=typeof TextDecoder!="function"?a.TextDecoder:TextDecoder,d=new c("utf-8",{fatal:!0});function h(F){return typeof F=="string"&&(F=Buffer.from(F,"utf8")),o.default.encode(Buffer.from(F))}Ve.baseEncode=h;function p(F){return Buffer.from(o.default.decode(F))}Ve.baseDecode=p;const x=1024;class y extends Error{constructor($){super($),this.fieldPath=[],this.originalMessage=$}addToFieldPath($){this.fieldPath.splice(0,0,$),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Ve.BorshError=y;class E{constructor(){this.buf=Buffer.alloc(x),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(x)]))}writeU8($){this.maybeResize(),this.buf.writeUInt8($,this.length),this.length+=1}writeU16($){this.maybeResize(),this.buf.writeUInt16LE($,this.length),this.length+=2}writeU32($){this.maybeResize(),this.buf.writeUInt32LE($,this.length),this.length+=4}writeU64($){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default($).toArray("le",8)))}writeU128($){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default($).toArray("le",16)))}writeU256($){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default($).toArray("le",32)))}writeU512($){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default($).toArray("le",64)))}writeBuffer($){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),$,Buffer.alloc(x)]),this.length+=$.length}writeString($){this.maybeResize();const q=Buffer.from($,"utf8");this.writeU32(q.length),this.writeBuffer(q)}writeFixedArray($){this.writeBuffer(Buffer.from($))}writeArray($,q){this.maybeResize(),this.writeU32($.length);for(const Y of $)this.maybeResize(),q(Y)}toArray(){return this.buf.subarray(0,this.length)}}Ve.BinaryWriter=E;function g(F,$,q){const Y=q.value;q.value=function(..._){try{return Y.apply(this,_)}catch(u){if(u instanceof RangeError){const b=u.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(b)>=0)throw new y("Reached the end of buffer when deserializing")}throw u}}}class S{constructor($){this.buf=$,this.offset=0}readU8(){const $=this.buf.readUInt8(this.offset);return this.offset+=1,$}readU16(){const $=this.buf.readUInt16LE(this.offset);return this.offset+=2,$}readU32(){const $=this.buf.readUInt32LE(this.offset);return this.offset+=4,$}readU64(){const $=this.readBuffer(8);return new i.default($,"le")}readU128(){const $=this.readBuffer(16);return new i.default($,"le")}readU256(){const $=this.readBuffer(32);return new i.default($,"le")}readU512(){const $=this.readBuffer(64);return new i.default($,"le")}readBuffer($){if(this.offset+$>this.buf.length)throw new y(`Expected buffer length ${$} isn't within bounds`);const q=this.buf.slice(this.offset,this.offset+$);return this.offset+=$,q}readString(){const $=this.readU32(),q=this.readBuffer($);try{return d.decode(q)}catch(Y){throw new y(`Error decoding UTF-8 string: ${Y}`)}}readFixedArray($){return new Uint8Array(this.readBuffer($))}readArray($){const q=this.readU32(),Y=Array();for(let _=0;_<q;++_)Y.push($());return Y}}t([g],S.prototype,"readU8",null),t([g],S.prototype,"readU16",null),t([g],S.prototype,"readU32",null),t([g],S.prototype,"readU64",null),t([g],S.prototype,"readU128",null),t([g],S.prototype,"readU256",null),t([g],S.prototype,"readU512",null),t([g],S.prototype,"readString",null),t([g],S.prototype,"readFixedArray",null),t([g],S.prototype,"readArray",null),Ve.BinaryReader=S;function A(F){return F.charAt(0).toUpperCase()+F.slice(1)}function k(F,$,q,Y,_){try{if(typeof Y=="string")_[`write${A(Y)}`](q);else if(Y instanceof Array)if(typeof Y[0]=="number"){if(q.length!==Y[0])throw new y(`Expecting byte array of length ${Y[0]}, but got ${q.length} bytes`);_.writeFixedArray(q)}else if(Y.length===2&&typeof Y[1]=="number"){if(q.length!==Y[1])throw new y(`Expecting byte array of length ${Y[1]}, but got ${q.length} bytes`);for(let u=0;u<Y[1];u++)k(F,null,q[u],Y[0],_)}else _.writeArray(q,u=>{k(F,$,u,Y[0],_)});else if(Y.kind!==void 0)switch(Y.kind){case"option":{q==null?_.writeU8(0):(_.writeU8(1),k(F,$,q,Y.type,_));break}case"map":{_.writeU32(q.size),q.forEach((u,b)=>{k(F,$,b,Y.key,_),k(F,$,u,Y.value,_)});break}default:throw new y(`FieldType ${Y} unrecognized`)}else M(F,q,_)}catch(u){throw u instanceof y&&u.addToFieldPath($),u}}function M(F,$,q){if(typeof $.borshSerialize=="function"){$.borshSerialize(q);return}const Y=F.get($.constructor);if(!Y)throw new y(`Class ${$.constructor.name} is missing in schema`);if(Y.kind==="struct")Y.fields.map(([_,u])=>{k(F,_,$[_],u,q)});else if(Y.kind==="enum"){const _=$[Y.field];for(let u=0;u<Y.values.length;++u){const[b,N]=Y.values[u];if(b===_){q.writeU8(u),k(F,b,$[b],N,q);break}}}else throw new y(`Unexpected schema kind: ${Y.kind} for ${$.constructor.name}`)}function O(F,$,q=E){const Y=new q;return M(F,$,Y),Y.toArray()}Ve.serialize=O;function B(F,$,q,Y){try{if(typeof q=="string")return Y[`read${A(q)}`]();if(q instanceof Array){if(typeof q[0]=="number")return Y.readFixedArray(q[0]);if(typeof q[1]=="number"){const _=[];for(let u=0;u<q[1];u++)_.push(B(F,null,q[0],Y));return _}else return Y.readArray(()=>B(F,$,q[0],Y))}if(q.kind==="option")return Y.readU8()?B(F,$,q.type,Y):void 0;if(q.kind==="map"){let _=new Map;const u=Y.readU32();for(let b=0;b<u;b++){const N=B(F,$,q.key,Y),j=B(F,$,q.value,Y);_.set(N,j)}return _}return z(F,q,Y)}catch(_){throw _ instanceof y&&_.addToFieldPath($),_}}function z(F,$,q){if(typeof $.borshDeserialize=="function")return $.borshDeserialize(q);const Y=F.get($);if(!Y)throw new y(`Class ${$.name} is missing in schema`);if(Y.kind==="struct"){const _={};for(const[u,b]of F.get($).fields)_[u]=B(F,u,b,q);return new $(_)}if(Y.kind==="enum"){const _=q.readU8();if(_>=Y.values.length)throw new y(`Enum index: ${_} is out of range`);const[u,b]=Y.values[_],N=B(F,u,b,q);return new $({[u]:N})}throw new y(`Unexpected schema kind: ${Y.kind} for ${$.constructor.name}`)}function V(F,$,q,Y=S){const _=new Y(q),u=z(F,$,_);if(_.offset<q.length)throw new y(`Unexpected ${q.length-_.offset} bytes after deserialized data`);return u}Ve.deserialize=V;function H(F,$,q,Y=S){const _=new Y(q);return z(F,$,_)}return Ve.deserializeUnchecked=H,Ve}var Da=Wg(),te={},rd;function Hg(){if(rd)return te;rd=1,Object.defineProperty(te,"__esModule",{value:!0}),te.s16=te.s8=te.nu64be=te.u48be=te.u40be=te.u32be=te.u24be=te.u16be=te.nu64=te.u48=te.u40=te.u32=te.u24=te.u16=te.u8=te.offset=te.greedy=te.Constant=te.UTF8=te.CString=te.Blob=te.Boolean=te.BitField=te.BitStructure=te.VariantLayout=te.Union=te.UnionLayoutDiscriminator=te.UnionDiscriminator=te.Structure=te.Sequence=te.DoubleBE=te.Double=te.FloatBE=te.Float=te.NearInt64BE=te.NearInt64=te.NearUInt64BE=te.NearUInt64=te.IntBE=te.Int=te.UIntBE=te.UInt=te.OffsetLayout=te.GreedyCount=te.ExternalLayout=te.bindConstructorLayout=te.nameWithProperty=te.Layout=te.uint8ArrayToBuffer=te.checkUint8Array=void 0,te.constant=te.utf8=te.cstr=te.blob=te.unionLayoutDiscriminator=te.union=te.seq=te.bits=te.struct=te.f64be=te.f64=te.f32be=te.f32=te.ns64be=te.s48be=te.s40be=te.s32be=te.s24be=te.s16be=te.ns64=te.s48=te.s40=te.s32=te.s24=void 0;const n=ql();function e(f){if(!(f instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}te.checkUint8Array=e;function t(f){return e(f),n.Buffer.from(f.buffer,f.byteOffset,f.length)}te.uint8ArrayToBuffer=t;let r=class{constructor(m,T){if(!Number.isInteger(m))throw new TypeError("span must be an integer");this.span=m,this.property=T}makeDestinationObject(){return{}}getSpan(m,T){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(m){const T=Object.create(this.constructor.prototype);return Object.assign(T,this),T.property=m,T}fromArray(m){}};te.Layout=r;function s(f,m){return m.property?f+"["+m.property+"]":f}te.nameWithProperty=s;function i(f,m){if(typeof f!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(f,"layout_"))throw new Error("Class is already bound to a layout");if(!(m&&m instanceof r))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(m,"boundConstructor_"))throw new Error("layout is already bound to a constructor");f.layout_=m,m.boundConstructor_=f,m.makeDestinationObject=()=>new f,Object.defineProperty(f.prototype,"encode",{value(T,P){return m.encode(this,T,P)},writable:!0}),Object.defineProperty(f,"decode",{value(T,P){return m.decode(T,P)},writable:!0})}te.bindConstructorLayout=i;class o extends r{isCount(){throw new Error("ExternalLayout is abstract")}}te.ExternalLayout=o;class a extends o{constructor(m=1,T){if(!Number.isInteger(m)||0>=m)throw new TypeError("elementSpan must be a (positive) integer");super(-1,T),this.elementSpan=m}isCount(){return!0}decode(m,T=0){e(m);const P=m.length-T;return Math.floor(P/this.elementSpan)}encode(m,T,P){return 0}}te.GreedyCount=a;class c extends o{constructor(m,T=0,P){if(!(m instanceof r))throw new TypeError("layout must be a Layout");if(!Number.isInteger(T))throw new TypeError("offset must be integer or undefined");super(m.span,P||m.property),this.layout=m,this.offset=T}isCount(){return this.layout instanceof d||this.layout instanceof h}decode(m,T=0){return this.layout.decode(m,T+this.offset)}encode(m,T,P=0){return this.layout.encode(m,T,P+this.offset)}}te.OffsetLayout=c;class d extends r{constructor(m,T){if(super(m,T),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(m,T=0){return t(m).readUIntLE(T,this.span)}encode(m,T,P=0){return t(T).writeUIntLE(m,P,this.span),this.span}}te.UInt=d;class h extends r{constructor(m,T){if(super(m,T),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(m,T=0){return t(m).readUIntBE(T,this.span)}encode(m,T,P=0){return t(T).writeUIntBE(m,P,this.span),this.span}}te.UIntBE=h;class p extends r{constructor(m,T){if(super(m,T),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(m,T=0){return t(m).readIntLE(T,this.span)}encode(m,T,P=0){return t(T).writeIntLE(m,P,this.span),this.span}}te.Int=p;class x extends r{constructor(m,T){if(super(m,T),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(m,T=0){return t(m).readIntBE(T,this.span)}encode(m,T,P=0){return t(T).writeIntBE(m,P,this.span),this.span}}te.IntBE=x;const y=Math.pow(2,32);function E(f){const m=Math.floor(f/y),T=f-m*y;return{hi32:m,lo32:T}}function g(f,m){return f*y+m}class S extends r{constructor(m){super(8,m)}decode(m,T=0){const P=t(m),Z=P.readUInt32LE(T),ne=P.readUInt32LE(T+4);return g(ne,Z)}encode(m,T,P=0){const Z=E(m),ne=t(T);return ne.writeUInt32LE(Z.lo32,P),ne.writeUInt32LE(Z.hi32,P+4),8}}te.NearUInt64=S;class A extends r{constructor(m){super(8,m)}decode(m,T=0){const P=t(m),Z=P.readUInt32BE(T),ne=P.readUInt32BE(T+4);return g(Z,ne)}encode(m,T,P=0){const Z=E(m),ne=t(T);return ne.writeUInt32BE(Z.hi32,P),ne.writeUInt32BE(Z.lo32,P+4),8}}te.NearUInt64BE=A;class k extends r{constructor(m){super(8,m)}decode(m,T=0){const P=t(m),Z=P.readUInt32LE(T),ne=P.readInt32LE(T+4);return g(ne,Z)}encode(m,T,P=0){const Z=E(m),ne=t(T);return ne.writeUInt32LE(Z.lo32,P),ne.writeInt32LE(Z.hi32,P+4),8}}te.NearInt64=k;class M extends r{constructor(m){super(8,m)}decode(m,T=0){const P=t(m),Z=P.readInt32BE(T),ne=P.readUInt32BE(T+4);return g(Z,ne)}encode(m,T,P=0){const Z=E(m),ne=t(T);return ne.writeInt32BE(Z.hi32,P),ne.writeUInt32BE(Z.lo32,P+4),8}}te.NearInt64BE=M;class O extends r{constructor(m){super(4,m)}decode(m,T=0){return t(m).readFloatLE(T)}encode(m,T,P=0){return t(T).writeFloatLE(m,P),4}}te.Float=O;class B extends r{constructor(m){super(4,m)}decode(m,T=0){return t(m).readFloatBE(T)}encode(m,T,P=0){return t(T).writeFloatBE(m,P),4}}te.FloatBE=B;class z extends r{constructor(m){super(8,m)}decode(m,T=0){return t(m).readDoubleLE(T)}encode(m,T,P=0){return t(T).writeDoubleLE(m,P),8}}te.Double=z;class V extends r{constructor(m){super(8,m)}decode(m,T=0){return t(m).readDoubleBE(T)}encode(m,T,P=0){return t(T).writeDoubleBE(m,P),8}}te.DoubleBE=V;class H extends r{constructor(m,T,P){if(!(m instanceof r))throw new TypeError("elementLayout must be a Layout");if(!(T instanceof o&&T.isCount()||Number.isInteger(T)&&0<=T))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let Z=-1;!(T instanceof o)&&0<m.span&&(Z=T*m.span),super(Z,P),this.elementLayout=m,this.count=T}getSpan(m,T=0){if(0<=this.span)return this.span;let P=0,Z=this.count;if(Z instanceof o&&(Z=Z.decode(m,T)),0<this.elementLayout.span)P=Z*this.elementLayout.span;else{let ne=0;for(;ne<Z;)P+=this.elementLayout.getSpan(m,T+P),++ne}return P}decode(m,T=0){const P=[];let Z=0,ne=this.count;for(ne instanceof o&&(ne=ne.decode(m,T));Z<ne;)P.push(this.elementLayout.decode(m,T)),T+=this.elementLayout.getSpan(m,T),Z+=1;return P}encode(m,T,P=0){const Z=this.elementLayout,ne=m.reduce((ie,ae)=>ie+Z.encode(ae,T,P+ie),0);return this.count instanceof o&&this.count.encode(m.length,T,P),ne}}te.Sequence=H;class F extends r{constructor(m,T,P){if(!(Array.isArray(m)&&m.reduce((ne,ie)=>ne&&ie instanceof r,!0)))throw new TypeError("fields must be array of Layout instances");typeof T=="boolean"&&P===void 0&&(P=T,T=void 0);for(const ne of m)if(0>ne.span&&ne.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let Z=-1;try{Z=m.reduce((ne,ie)=>ne+ie.getSpan(),0)}catch{}super(Z,T),this.fields=m,this.decodePrefixes=!!P}getSpan(m,T=0){if(0<=this.span)return this.span;let P=0;try{P=this.fields.reduce((Z,ne)=>{const ie=ne.getSpan(m,T);return T+=ie,Z+ie},0)}catch{throw new RangeError("indeterminate span")}return P}decode(m,T=0){e(m);const P=this.makeDestinationObject();for(const Z of this.fields)if(Z.property!==void 0&&(P[Z.property]=Z.decode(m,T)),T+=Z.getSpan(m,T),this.decodePrefixes&&m.length===T)break;return P}encode(m,T,P=0){const Z=P;let ne=0,ie=0;for(const ae of this.fields){let Ce=ae.span;if(ie=0<Ce?Ce:0,ae.property!==void 0){const ve=m[ae.property];ve!==void 0&&(ie=ae.encode(ve,T,P),0>Ce&&(Ce=ae.getSpan(T,P)))}ne=P,P+=Ce}return ne+ie-Z}fromArray(m){const T=this.makeDestinationObject();for(const P of this.fields)P.property!==void 0&&0<m.length&&(T[P.property]=m.shift());return T}layoutFor(m){if(typeof m!="string")throw new TypeError("property must be string");for(const T of this.fields)if(T.property===m)return T}offsetOf(m){if(typeof m!="string")throw new TypeError("property must be string");let T=0;for(const P of this.fields){if(P.property===m)return T;0>P.span?T=-1:0<=T&&(T+=P.span)}}}te.Structure=F;class ${constructor(m){this.property=m}decode(m,T){throw new Error("UnionDiscriminator is abstract")}encode(m,T,P){throw new Error("UnionDiscriminator is abstract")}}te.UnionDiscriminator=$;class q extends ${constructor(m,T){if(!(m instanceof o&&m.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(T||m.property||"variant"),this.layout=m}decode(m,T){return this.layout.decode(m,T)}encode(m,T,P){return this.layout.encode(m,T,P)}}te.UnionLayoutDiscriminator=q;class Y extends r{constructor(m,T,P){let Z;if(m instanceof d||m instanceof h)Z=new q(new c(m));else if(m instanceof o&&m.isCount())Z=new q(m);else if(m instanceof $)Z=m;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(T===void 0&&(T=null),!(T===null||T instanceof r))throw new TypeError("defaultLayout must be null or a Layout");if(T!==null){if(0>T.span)throw new Error("defaultLayout must have constant span");T.property===void 0&&(T=T.replicate("content"))}let ne=-1;T&&(ne=T.span,0<=ne&&(m instanceof d||m instanceof h)&&(ne+=Z.layout.span)),super(ne,P),this.discriminator=Z,this.usesPrefixDiscriminator=m instanceof d||m instanceof h,this.defaultLayout=T,this.registry={};let ie=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(ae){return ie(ae)},this.configGetSourceVariant=function(ae){ie=ae.bind(this)}}getSpan(m,T=0){if(0<=this.span)return this.span;const P=this.getVariant(m,T);if(!P)throw new Error("unable to determine span for unrecognized variant");return P.getSpan(m,T)}defaultGetSourceVariant(m){if(Object.prototype.hasOwnProperty.call(m,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(m,this.defaultLayout.property))return;const T=this.registry[m[this.discriminator.property]];if(T&&(!T.layout||T.property&&Object.prototype.hasOwnProperty.call(m,T.property)))return T}else for(const T in this.registry){const P=this.registry[T];if(P.property&&Object.prototype.hasOwnProperty.call(m,P.property))return P}throw new Error("unable to infer src variant")}decode(m,T=0){let P;const Z=this.discriminator,ne=Z.decode(m,T),ie=this.registry[ne];if(ie===void 0){const ae=this.defaultLayout;let Ce=0;this.usesPrefixDiscriminator&&(Ce=Z.layout.span),P=this.makeDestinationObject(),P[Z.property]=ne,P[ae.property]=ae.decode(m,T+Ce)}else P=ie.decode(m,T);return P}encode(m,T,P=0){const Z=this.getSourceVariant(m);if(Z===void 0){const ne=this.discriminator,ie=this.defaultLayout;let ae=0;return this.usesPrefixDiscriminator&&(ae=ne.layout.span),ne.encode(m[ne.property],T,P),ae+ie.encode(m[ie.property],T,P+ae)}return Z.encode(m,T,P)}addVariant(m,T,P){const Z=new _(this,m,T,P);return this.registry[m]=Z,Z}getVariant(m,T=0){let P;return m instanceof Uint8Array?P=this.discriminator.decode(m,T):P=m,this.registry[P]}}te.Union=Y;class _ extends r{constructor(m,T,P,Z){if(!(m instanceof Y))throw new TypeError("union must be a Union");if(!Number.isInteger(T)||0>T)throw new TypeError("variant must be a (non-negative) integer");if(typeof P=="string"&&Z===void 0&&(Z=P,P=null),P){if(!(P instanceof r))throw new TypeError("layout must be a Layout");if(m.defaultLayout!==null&&0<=P.span&&P.span>m.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof Z!="string")throw new TypeError("variant must have a String property")}let ne=m.span;0>m.span&&(ne=P?P.span:0,0<=ne&&m.usesPrefixDiscriminator&&(ne+=m.discriminator.layout.span)),super(ne,Z),this.union=m,this.variant=T,this.layout=P||null}getSpan(m,T=0){if(0<=this.span)return this.span;let P=0;this.union.usesPrefixDiscriminator&&(P=this.union.discriminator.layout.span);let Z=0;return this.layout&&(Z=this.layout.getSpan(m,T+P)),P+Z}decode(m,T=0){const P=this.makeDestinationObject();if(this!==this.union.getVariant(m,T))throw new Error("variant mismatch");let Z=0;return this.union.usesPrefixDiscriminator&&(Z=this.union.discriminator.layout.span),this.layout?P[this.property]=this.layout.decode(m,T+Z):this.property?P[this.property]=!0:this.union.usesPrefixDiscriminator&&(P[this.union.discriminator.property]=this.variant),P}encode(m,T,P=0){let Z=0;if(this.union.usesPrefixDiscriminator&&(Z=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(m,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,T,P);let ne=Z;if(this.layout&&(this.layout.encode(m[this.property],T,P+Z),ne+=this.layout.getSpan(T,P+Z),0<=this.union.span&&ne>this.union.span))throw new Error("encoded variant overruns containing union");return ne}fromArray(m){if(this.layout)return this.layout.fromArray(m)}}te.VariantLayout=_;function u(f){return 0>f&&(f+=4294967296),f}class b extends r{constructor(m,T,P){if(!(m instanceof d||m instanceof h))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof T=="string"&&P===void 0&&(P=T,T=!1),4<m.span)throw new RangeError("word cannot exceed 32 bits");super(m.span,P),this.word=m,this.msb=!!T,this.fields=[];let Z=0;this._packedSetValue=function(ne){return Z=u(ne),this},this._packedGetValue=function(){return Z}}decode(m,T=0){const P=this.makeDestinationObject(),Z=this.word.decode(m,T);this._packedSetValue(Z);for(const ne of this.fields)ne.property!==void 0&&(P[ne.property]=ne.decode(m));return P}encode(m,T,P=0){const Z=this.word.decode(T,P);this._packedSetValue(Z);for(const ne of this.fields)if(ne.property!==void 0){const ie=m[ne.property];ie!==void 0&&ne.encode(ie)}return this.word.encode(this._packedGetValue(),T,P)}addField(m,T){const P=new N(this,m,T);return this.fields.push(P),P}addBoolean(m){const T=new j(this,m);return this.fields.push(T),T}fieldFor(m){if(typeof m!="string")throw new TypeError("property must be string");for(const T of this.fields)if(T.property===m)return T}}te.BitStructure=b;class N{constructor(m,T,P){if(!(m instanceof b))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(T)||0>=T)throw new TypeError("bits must be positive integer");const Z=8*m.span,ne=m.fields.reduce((ie,ae)=>ie+ae.bits,0);if(T+ne>Z)throw new Error("bits too long for span remainder ("+(Z-ne)+" of "+Z+" remain)");this.container=m,this.bits=T,this.valueMask=(1<<T)-1,T===32&&(this.valueMask=4294967295),this.start=ne,this.container.msb&&(this.start=Z-ne-T),this.wordMask=u(this.valueMask<<this.start),this.property=P}decode(m,T){const P=this.container._packedGetValue();return u(P&this.wordMask)>>>this.start}encode(m){if(typeof m!="number"||!Number.isInteger(m)||m!==u(m&this.valueMask))throw new TypeError(s("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const T=this.container._packedGetValue(),P=u(m<<this.start);this.container._packedSetValue(u(T&~this.wordMask)|P)}}te.BitField=N;class j extends N{constructor(m,T){super(m,1,T)}decode(m,T){return!!super.decode(m,T)}encode(m){typeof m=="boolean"&&(m=+m),super.encode(m)}}te.Boolean=j;class R extends r{constructor(m,T){if(!(m instanceof o&&m.isCount()||Number.isInteger(m)&&0<=m))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let P=-1;m instanceof o||(P=m),super(P,T),this.length=m}getSpan(m,T){let P=this.span;return 0>P&&(P=this.length.decode(m,T)),P}decode(m,T=0){let P=this.span;return 0>P&&(P=this.length.decode(m,T)),t(m).slice(T,T+P)}encode(m,T,P){let Z=this.length;if(this.length instanceof o&&(Z=m.length),!(m instanceof Uint8Array&&Z===m.length))throw new TypeError(s("Blob.encode",this)+" requires (length "+Z+") Uint8Array as src");if(P+Z>T.length)throw new RangeError("encoding overruns Uint8Array");const ne=t(m);return t(T).write(ne.toString("hex"),P,Z,"hex"),this.length instanceof o&&this.length.encode(Z,T,P),Z}}te.Blob=R;class U extends r{constructor(m){super(-1,m)}getSpan(m,T=0){e(m);let P=T;for(;P<m.length&&m[P]!==0;)P+=1;return 1+P-T}decode(m,T=0){const P=this.getSpan(m,T);return t(m).slice(T,T+P-1).toString("utf-8")}encode(m,T,P=0){typeof m!="string"&&(m=String(m));const Z=n.Buffer.from(m,"utf8"),ne=Z.length;if(P+ne>T.length)throw new RangeError("encoding overruns Buffer");const ie=t(T);return Z.copy(ie,P),ie[P+ne]=0,ne+1}}te.CString=U;class K extends r{constructor(m,T){if(typeof m=="string"&&T===void 0&&(T=m,m=void 0),m===void 0)m=-1;else if(!Number.isInteger(m))throw new TypeError("maxSpan must be an integer");super(-1,T),this.maxSpan=m}getSpan(m,T=0){return e(m),m.length-T}decode(m,T=0){const P=this.getSpan(m,T);if(0<=this.maxSpan&&this.maxSpan<P)throw new RangeError("text length exceeds maxSpan");return t(m).slice(T,T+P).toString("utf-8")}encode(m,T,P=0){typeof m!="string"&&(m=String(m));const Z=n.Buffer.from(m,"utf8"),ne=Z.length;if(0<=this.maxSpan&&this.maxSpan<ne)throw new RangeError("text length exceeds maxSpan");if(P+ne>T.length)throw new RangeError("encoding overruns Buffer");return Z.copy(t(T),P),ne}}te.UTF8=K;class L extends r{constructor(m,T){super(0,T),this.value=m}decode(m,T){return this.value}encode(m,T,P){return 0}}return te.Constant=L,te.greedy=(f,m)=>new a(f,m),te.offset=(f,m,T)=>new c(f,m,T),te.u8=f=>new d(1,f),te.u16=f=>new d(2,f),te.u24=f=>new d(3,f),te.u32=f=>new d(4,f),te.u40=f=>new d(5,f),te.u48=f=>new d(6,f),te.nu64=f=>new S(f),te.u16be=f=>new h(2,f),te.u24be=f=>new h(3,f),te.u32be=f=>new h(4,f),te.u40be=f=>new h(5,f),te.u48be=f=>new h(6,f),te.nu64be=f=>new A(f),te.s8=f=>new p(1,f),te.s16=f=>new p(2,f),te.s24=f=>new p(3,f),te.s32=f=>new p(4,f),te.s40=f=>new p(5,f),te.s48=f=>new p(6,f),te.ns64=f=>new k(f),te.s16be=f=>new x(2,f),te.s24be=f=>new x(3,f),te.s32be=f=>new x(4,f),te.s40be=f=>new x(5,f),te.s48be=f=>new x(6,f),te.ns64be=f=>new M(f),te.f32=f=>new O(f),te.f32be=f=>new B(f),te.f64=f=>new z(f),te.f64be=f=>new V(f),te.struct=(f,m,T)=>new F(f,m,T),te.bits=(f,m,T)=>new b(f,m,T),te.seq=(f,m,T)=>new H(f,m,T),te.union=(f,m,T)=>new Y(f,m,T),te.unionLayoutDiscriminator=(f,m)=>new q(f,m),te.blob=(f,m)=>new R(f,m),te.cstr=f=>new U(f),te.utf8=(f,m)=>new K(f,m),te.constant=(f,m)=>new L(f,m),te}var W=Hg(),Cr={},sd;function Kg(){if(sd)return Cr;sd=1,Object.defineProperty(Cr,"__esModule",{value:!0});function n(s){{const i=Buffer.from(s);i.reverse();const o=i.toString("hex");return o.length===0?BigInt(0):BigInt(`0x${o}`)}}Cr.toBigIntLE=n;function e(s){{const i=s.toString("hex");return i.length===0?BigInt(0):BigInt(`0x${i}`)}}Cr.toBigIntBE=e;function t(s,i){{const o=s.toString(16),a=Buffer.from(o.padStart(i*2,"0").slice(0,i*2),"hex");return a.reverse(),a}}Cr.toBufferLE=t;function r(s,i){{const o=s.toString(16);return Buffer.from(o.padStart(i*2,"0").slice(0,i*2),"hex")}}return Cr.toBufferBE=r,Cr}var id=Kg();class Vg extends TypeError{constructor(e,t){let r;const{message:s,explanation:i,...o}=e,{path:a}=e,c=a.length===0?s:`At path: ${a.join(".")} -- ${s}`;super(i??c),i!=null&&(this.cause=c),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...t()])}}function Gg(n){return Ei(n)&&typeof n[Symbol.iterator]=="function"}function Ei(n){return typeof n=="object"&&n!=null}function fo(n){return Ei(n)&&!Array.isArray(n)}function vn(n){return typeof n=="symbol"?n.toString():typeof n=="string"?JSON.stringify(n):`${n}`}function Yg(n){const{done:e,value:t}=n.next();return e?void 0:t}function Qg(n,e,t,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:s,branch:i}=e,{type:o}=t,{refinement:a,message:c=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${vn(r)}\``}=n;return{value:r,type:o,refinement:a,key:s[s.length-1],path:s,branch:i,...n,message:c}}function*od(n,e,t,r){Gg(n)||(n=[n]);for(const s of n){const i=Qg(s,e,t,r);i&&(yield i)}}function*Zl(n,e,t={}){const{path:r=[],branch:s=[n],coerce:i=!1,mask:o=!1}=t,a={path:r,branch:s,mask:o};i&&(n=e.coercer(n,a));let c="valid";for(const d of e.validator(n,a))d.explanation=t.message,c="not_valid",yield[d,void 0];for(let[d,h,p]of e.entries(n,a)){const x=Zl(h,p,{path:d===void 0?r:[...r,d],branch:d===void 0?s:[...s,h],coerce:i,mask:o,message:t.message});for(const y of x)y[0]?(c=y[0].refinement!=null?"not_refined":"not_valid",yield[y[0],void 0]):i&&(h=y[1],d===void 0?n=h:n instanceof Map?n.set(d,h):n instanceof Set?n.add(h):Ei(n)&&(h!==void 0||d in n)&&(n[d]=h))}if(c!=="not_valid")for(const d of e.refiner(n,a))d.explanation=t.message,c="not_refined",yield[d,void 0];c==="valid"&&(yield[void 0,n])}let _n=class{constructor(e){const{type:t,schema:r,validator:s,refiner:i,coercer:o=c=>c,entries:a=function*(){}}=e;this.type=t,this.schema=r,this.entries=a,this.coercer=o,s?this.validator=(c,d)=>{const h=s(c,d);return od(h,d,this,c)}:this.validator=()=>[],i?this.refiner=(c,d)=>{const h=i(c,d);return od(h,d,this,c)}:this.refiner=()=>[]}assert(e,t){return Zg(e,this,t)}create(e,t){return ce(e,this,t)}is(e){return kf(e,this)}mask(e,t){return Jg(e,this,t)}validate(e,t={}){return Ni(e,this,t)}};function Zg(n,e,t){const r=Ni(n,e,{message:t});if(r[0])throw r[0]}function ce(n,e,t){const r=Ni(n,e,{coerce:!0,message:t});if(r[0])throw r[0];return r[1]}function Jg(n,e,t){const r=Ni(n,e,{coerce:!0,mask:!0,message:t});if(r[0])throw r[0];return r[1]}function kf(n,e){return!Ni(n,e)[0]}function Ni(n,e,t={}){const r=Zl(n,e,t),s=Yg(r);return s[0]?[new Vg(s[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function rs(n,e){return new _n({type:n,schema:null,validator:e})}function Xg(){return rs("any",()=>!0)}function le(n){return new _n({type:"array",schema:n,*entries(e){if(n&&Array.isArray(e))for(const[t,r]of e.entries())yield[t,r,n]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${vn(e)}`}})}function Tn(){return rs("boolean",n=>typeof n=="boolean")}function Jl(n){return rs("instance",e=>e instanceof n||`Expected a \`${n.name}\` instance, but received: ${vn(e)}`)}function Ze(n){const e=vn(n),t=typeof n;return new _n({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?n:null,validator(r){return r===n||`Expected the literal \`${e}\`, but received: ${vn(r)}`}})}function ey(){return rs("never",()=>!1)}function ue(n){return new _n({...n,validator:(e,t)=>e===null||n.validator(e,t),refiner:(e,t)=>e===null||n.refiner(e,t)})}function ee(){return rs("number",n=>typeof n=="number"&&!isNaN(n)||`Expected a number, but received: ${vn(n)}`)}function ge(n){return new _n({...n,validator:(e,t)=>e===void 0||n.validator(e,t),refiner:(e,t)=>e===void 0||n.refiner(e,t)})}function Lf(n,e){return new _n({type:"record",schema:null,*entries(t){if(Ei(t))for(const r in t){const s=t[r];yield[r,r,n],yield[r,s,e]}},validator(t){return fo(t)||`Expected an object, but received: ${vn(t)}`},coercer(t){return fo(t)?{...t}:t}})}function oe(){return rs("string",n=>typeof n=="string"||`Expected a string, but received: ${vn(n)}`)}function Xl(n){const e=ey();return new _n({type:"tuple",schema:null,*entries(t){if(Array.isArray(t)){const r=Math.max(n.length,t.length);for(let s=0;s<r;s++)yield[s,t[s],n[s]||e]}},validator(t){return Array.isArray(t)||`Expected an array, but received: ${vn(t)}`},coercer(t){return Array.isArray(t)?t.slice():t}})}function se(n){const e=Object.keys(n);return new _n({type:"type",schema:n,*entries(t){if(Ei(t))for(const r of e)yield[r,t[r],n[r]]},validator(t){return fo(t)||`Expected an object, but received: ${vn(t)}`},coercer(t){return fo(t)?{...t}:t}})}function Gt(n){const e=n.map(t=>t.type).join(" | ");return new _n({type:"union",schema:null,coercer(t,r){for(const s of n){const[i,o]=s.validate(t,{coerce:!0,mask:r.mask});if(!i)return o}return t},validator(t,r){const s=[];for(const i of n){const[...o]=Zl(t,i,r),[a]=o;if(a[0])for(const[c]of o)c&&s.push(c);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${vn(t)}`,...s]}})}function Ws(){return rs("unknown",()=>!0)}function Mi(n,e,t){return new _n({...n,coercer:(r,s)=>kf(r,e)?n.coercer(t(r,s),s):n.coercer(r,s)})}var Di,ty=new Uint8Array(16);function Rf(){if(!Di&&(Di=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Di))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Di(ty)}const ny=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Bo(n){return typeof n=="string"&&ny.test(n)}var Ot=[];for(var Pa=0;Pa<256;++Pa)Ot.push((Pa+256).toString(16).substr(1));function Oo(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(Ot[n[e+0]]+Ot[n[e+1]]+Ot[n[e+2]]+Ot[n[e+3]]+"-"+Ot[n[e+4]]+Ot[n[e+5]]+"-"+Ot[n[e+6]]+Ot[n[e+7]]+"-"+Ot[n[e+8]]+Ot[n[e+9]]+"-"+Ot[n[e+10]]+Ot[n[e+11]]+Ot[n[e+12]]+Ot[n[e+13]]+Ot[n[e+14]]+Ot[n[e+15]]).toLowerCase();if(!Bo(t))throw TypeError("Stringified UUID is invalid");return t}var ad,Fa,Ua=0,za=0;function ry(n,e,t){var r=e&&t||0,s=e||new Array(16);n=n||{};var i=n.node||ad,o=n.clockseq!==void 0?n.clockseq:Fa;if(i==null||o==null){var a=n.random||(n.rng||Rf)();i==null&&(i=ad=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=Fa=(a[6]<<8|a[7])&16383)}var c=n.msecs!==void 0?n.msecs:Date.now(),d=n.nsecs!==void 0?n.nsecs:za+1,h=c-Ua+(d-za)/1e4;if(h<0&&n.clockseq===void 0&&(o=o+1&16383),(h<0||c>Ua)&&n.nsecs===void 0&&(d=0),d>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Ua=c,za=d,Fa=o,c+=122192928e5;var p=((c&268435455)*1e4+d)%4294967296;s[r++]=p>>>24&255,s[r++]=p>>>16&255,s[r++]=p>>>8&255,s[r++]=p&255;var x=c/4294967296*1e4&268435455;s[r++]=x>>>8&255,s[r++]=x&255,s[r++]=x>>>24&15|16,s[r++]=x>>>16&255,s[r++]=o>>>8|128,s[r++]=o&255;for(var y=0;y<6;++y)s[r+y]=i[y];return e||Oo(s)}function Bf(n){if(!Bo(n))throw TypeError("Invalid UUID");var e,t=new Uint8Array(16);return t[0]=(e=parseInt(n.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(n.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(n.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(n.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(n.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}function sy(n){n=unescape(encodeURIComponent(n));for(var e=[],t=0;t<n.length;++t)e.push(n.charCodeAt(t));return e}var iy="6ba7b810-9dad-11d1-80b4-00c04fd430c8",oy="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Of(n,e,t){function r(s,i,o,a){if(typeof s=="string"&&(s=sy(s)),typeof i=="string"&&(i=Bf(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+s.length);if(c.set(i),c.set(s,i.length),c=t(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,o){a=a||0;for(var d=0;d<16;++d)o[a+d]=c[d];return o}return Oo(c)}try{r.name=n}catch{}return r.DNS=iy,r.URL=oy,r}function ay(n){if(typeof n=="string"){var e=unescape(encodeURIComponent(n));n=new Uint8Array(e.length);for(var t=0;t<e.length;++t)n[t]=e.charCodeAt(t)}return cy(ly(uy(n),n.length*8))}function cy(n){for(var e=[],t=n.length*32,r="0123456789abcdef",s=0;s<t;s+=8){var i=n[s>>5]>>>s%32&255,o=parseInt(r.charAt(i>>>4&15)+r.charAt(i&15),16);e.push(o)}return e}function Df(n){return(n+64>>>9<<4)+14+1}function ly(n,e){n[e>>5]|=128<<e%32,n[Df(e)-1]=e;for(var t=1732584193,r=-271733879,s=-1732584194,i=271733878,o=0;o<n.length;o+=16){var a=t,c=r,d=s,h=i;t=Ft(t,r,s,i,n[o],7,-680876936),i=Ft(i,t,r,s,n[o+1],12,-389564586),s=Ft(s,i,t,r,n[o+2],17,606105819),r=Ft(r,s,i,t,n[o+3],22,-1044525330),t=Ft(t,r,s,i,n[o+4],7,-176418897),i=Ft(i,t,r,s,n[o+5],12,1200080426),s=Ft(s,i,t,r,n[o+6],17,-1473231341),r=Ft(r,s,i,t,n[o+7],22,-45705983),t=Ft(t,r,s,i,n[o+8],7,1770035416),i=Ft(i,t,r,s,n[o+9],12,-1958414417),s=Ft(s,i,t,r,n[o+10],17,-42063),r=Ft(r,s,i,t,n[o+11],22,-1990404162),t=Ft(t,r,s,i,n[o+12],7,1804603682),i=Ft(i,t,r,s,n[o+13],12,-40341101),s=Ft(s,i,t,r,n[o+14],17,-1502002290),r=Ft(r,s,i,t,n[o+15],22,1236535329),t=Ut(t,r,s,i,n[o+1],5,-165796510),i=Ut(i,t,r,s,n[o+6],9,-1069501632),s=Ut(s,i,t,r,n[o+11],14,643717713),r=Ut(r,s,i,t,n[o],20,-373897302),t=Ut(t,r,s,i,n[o+5],5,-701558691),i=Ut(i,t,r,s,n[o+10],9,38016083),s=Ut(s,i,t,r,n[o+15],14,-660478335),r=Ut(r,s,i,t,n[o+4],20,-405537848),t=Ut(t,r,s,i,n[o+9],5,568446438),i=Ut(i,t,r,s,n[o+14],9,-1019803690),s=Ut(s,i,t,r,n[o+3],14,-187363961),r=Ut(r,s,i,t,n[o+8],20,1163531501),t=Ut(t,r,s,i,n[o+13],5,-1444681467),i=Ut(i,t,r,s,n[o+2],9,-51403784),s=Ut(s,i,t,r,n[o+7],14,1735328473),r=Ut(r,s,i,t,n[o+12],20,-1926607734),t=zt(t,r,s,i,n[o+5],4,-378558),i=zt(i,t,r,s,n[o+8],11,-2022574463),s=zt(s,i,t,r,n[o+11],16,1839030562),r=zt(r,s,i,t,n[o+14],23,-35309556),t=zt(t,r,s,i,n[o+1],4,-1530992060),i=zt(i,t,r,s,n[o+4],11,1272893353),s=zt(s,i,t,r,n[o+7],16,-155497632),r=zt(r,s,i,t,n[o+10],23,-1094730640),t=zt(t,r,s,i,n[o+13],4,681279174),i=zt(i,t,r,s,n[o],11,-358537222),s=zt(s,i,t,r,n[o+3],16,-722521979),r=zt(r,s,i,t,n[o+6],23,76029189),t=zt(t,r,s,i,n[o+9],4,-640364487),i=zt(i,t,r,s,n[o+12],11,-421815835),s=zt(s,i,t,r,n[o+15],16,530742520),r=zt(r,s,i,t,n[o+2],23,-995338651),t=$t(t,r,s,i,n[o],6,-198630844),i=$t(i,t,r,s,n[o+7],10,1126891415),s=$t(s,i,t,r,n[o+14],15,-1416354905),r=$t(r,s,i,t,n[o+5],21,-57434055),t=$t(t,r,s,i,n[o+12],6,1700485571),i=$t(i,t,r,s,n[o+3],10,-1894986606),s=$t(s,i,t,r,n[o+10],15,-1051523),r=$t(r,s,i,t,n[o+1],21,-2054922799),t=$t(t,r,s,i,n[o+8],6,1873313359),i=$t(i,t,r,s,n[o+15],10,-30611744),s=$t(s,i,t,r,n[o+6],15,-1560198380),r=$t(r,s,i,t,n[o+13],21,1309151649),t=$t(t,r,s,i,n[o+4],6,-145523070),i=$t(i,t,r,s,n[o+11],10,-1120210379),s=$t(s,i,t,r,n[o+2],15,718787259),r=$t(r,s,i,t,n[o+9],21,-343485551),t=Sr(t,a),r=Sr(r,c),s=Sr(s,d),i=Sr(i,h)}return[t,r,s,i]}function uy(n){if(n.length===0)return[];for(var e=n.length*8,t=new Uint32Array(Df(e)),r=0;r<e;r+=8)t[r>>5]|=(n[r/8]&255)<<r%32;return t}function Sr(n,e){var t=(n&65535)+(e&65535),r=(n>>16)+(e>>16)+(t>>16);return r<<16|t&65535}function dy(n,e){return n<<e|n>>>32-e}function Do(n,e,t,r,s,i){return Sr(dy(Sr(Sr(e,n),Sr(r,i)),s),t)}function Ft(n,e,t,r,s,i,o){return Do(e&t|~e&r,n,e,s,i,o)}function Ut(n,e,t,r,s,i,o){return Do(e&r|t&~r,n,e,s,i,o)}function zt(n,e,t,r,s,i,o){return Do(e^t^r,n,e,s,i,o)}function $t(n,e,t,r,s,i,o){return Do(t^(e|~r),n,e,s,i,o)}var hy=Of("v3",48,ay);function fy(n,e,t){n=n||{};var r=n.random||(n.rng||Rf)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){t=t||0;for(var s=0;s<16;++s)e[t+s]=r[s];return e}return Oo(r)}function py(n,e,t,r){switch(n){case 0:return e&t^~e&r;case 1:return e^t^r;case 2:return e&t^e&r^t&r;case 3:return e^t^r}}function $a(n,e){return n<<e|n>>>32-e}function my(n){var e=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof n=="string"){var r=unescape(encodeURIComponent(n));n=[];for(var s=0;s<r.length;++s)n.push(r.charCodeAt(s))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);for(var i=n.length/4+2,o=Math.ceil(i/16),a=new Array(o),c=0;c<o;++c){for(var d=new Uint32Array(16),h=0;h<16;++h)d[h]=n[c*64+h*4]<<24|n[c*64+h*4+1]<<16|n[c*64+h*4+2]<<8|n[c*64+h*4+3];a[c]=d}a[o-1][14]=(n.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(n.length-1)*8&4294967295;for(var p=0;p<o;++p){for(var x=new Uint32Array(80),y=0;y<16;++y)x[y]=a[p][y];for(var E=16;E<80;++E)x[E]=$a(x[E-3]^x[E-8]^x[E-14]^x[E-16],1);for(var g=t[0],S=t[1],A=t[2],k=t[3],M=t[4],O=0;O<80;++O){var B=Math.floor(O/20),z=$a(g,5)+py(B,S,A,k)+M+e[B]+x[O]>>>0;M=k,k=A,A=$a(S,30)>>>0,S=g,g=z}t[0]=t[0]+g>>>0,t[1]=t[1]+S>>>0,t[2]=t[2]+A>>>0,t[3]=t[3]+k>>>0,t[4]=t[4]+M>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var gy=Of("v5",80,my);const yy="00000000-0000-0000-0000-000000000000";function wy(n){if(!Bo(n))throw TypeError("Invalid UUID");return parseInt(n.substr(14,1),16)}const by=Object.freeze(Object.defineProperty({__proto__:null,NIL:yy,parse:Bf,stringify:Oo,v1:ry,v3:hy,v4:fy,v5:gy,validate:Bo,version:wy},Symbol.toStringTag,{value:"Module"})),Pf=Ol(by);var qa,cd;function xy(){if(cd)return qa;cd=1;const n=Pf.v4;return qa=function(t,r,s,i){if(typeof t!="string")throw new TypeError(t+" must be a string");i=i||{};const o=typeof i.version=="number"?i.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const a={method:t};if(o===2&&(a.jsonrpc="2.0"),r){if(typeof r!="object"&&!Array.isArray(r))throw new TypeError(r+" must be an object, array or omitted");a.params=r}if(typeof s>"u"){const c=typeof i.generator=="function"?i.generator:function(){return n()};a.id=c(a,i)}else o===2&&s===null?i.notificationIdNull&&(a.id=null):a.id=s;return a},qa}var Wa,ld;function vy(){if(ld)return Wa;ld=1;const n=Pf.v4,e=xy(),t=function(r,s){if(!(this instanceof t))return new t(r,s);s||(s={}),this.options={reviver:typeof s.reviver<"u"?s.reviver:null,replacer:typeof s.replacer<"u"?s.replacer:null,generator:typeof s.generator<"u"?s.generator:function(){return n()},version:typeof s.version<"u"?s.version:2,notificationIdNull:typeof s.notificationIdNull=="boolean"?s.notificationIdNull:!1},this.callServer=r};return Wa=t,t.prototype.request=function(r,s,i,o){const a=this;let c=null;const d=Array.isArray(r)&&typeof s=="function";if(this.options.version===1&&d)throw new TypeError("JSON-RPC 1.0 does not support batching");if(d||!d&&r&&typeof r=="object"&&typeof s=="function")o=s,c=r;else{typeof i=="function"&&(o=i,i=void 0);const x=typeof o=="function";try{c=e(r,s,i,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(y){if(x)return o(y);throw y}if(!x)return c}let p;try{p=JSON.stringify(c,this.options.replacer)}catch(x){return o(x)}return this.callServer(p,function(x,y){a._parseResponse(x,y,o)}),c},t.prototype._parseResponse=function(r,s,i){if(r){i(r);return}if(!s)return i();let o;try{o=JSON.parse(s,this.options.reviver)}catch(a){return i(a)}if(i.length===3)if(Array.isArray(o)){const a=function(d){return typeof d.error<"u"},c=function(d){return!a(d)};return i(null,o.filter(a),o.filter(c))}else return i(null,o.error,o.result);i(null,o)},Wa}var Sy=vy();const Ey=jr(Sy);var Ha={exports:{}},ud;function Ny(){return ud||(ud=1,function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function s(c,d,h){this.fn=c,this.context=d,this.once=h||!1}function i(c,d,h,p,x){if(typeof h!="function")throw new TypeError("The listener must be a function");var y=new s(h,p||c,x),E=t?t+d:d;return c._events[E]?c._events[E].fn?c._events[E]=[c._events[E],y]:c._events[E].push(y):(c._events[E]=y,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new r:delete c._events[d]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var d=[],h,p;if(this._eventsCount===0)return d;for(p in h=this._events)e.call(h,p)&&d.push(t?p.slice(1):p);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(h)):d},a.prototype.listeners=function(d){var h=t?t+d:d,p=this._events[h];if(!p)return[];if(p.fn)return[p.fn];for(var x=0,y=p.length,E=new Array(y);x<y;x++)E[x]=p[x].fn;return E},a.prototype.listenerCount=function(d){var h=t?t+d:d,p=this._events[h];return p?p.fn?1:p.length:0},a.prototype.emit=function(d,h,p,x,y,E){var g=t?t+d:d;if(!this._events[g])return!1;var S=this._events[g],A=arguments.length,k,M;if(S.fn){switch(S.once&&this.removeListener(d,S.fn,void 0,!0),A){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,h),!0;case 3:return S.fn.call(S.context,h,p),!0;case 4:return S.fn.call(S.context,h,p,x),!0;case 5:return S.fn.call(S.context,h,p,x,y),!0;case 6:return S.fn.call(S.context,h,p,x,y,E),!0}for(M=1,k=new Array(A-1);M<A;M++)k[M-1]=arguments[M];S.fn.apply(S.context,k)}else{var O=S.length,B;for(M=0;M<O;M++)switch(S[M].once&&this.removeListener(d,S[M].fn,void 0,!0),A){case 1:S[M].fn.call(S[M].context);break;case 2:S[M].fn.call(S[M].context,h);break;case 3:S[M].fn.call(S[M].context,h,p);break;case 4:S[M].fn.call(S[M].context,h,p,x);break;default:if(!k)for(B=1,k=new Array(A-1);B<A;B++)k[B-1]=arguments[B];S[M].fn.apply(S[M].context,k)}}return!0},a.prototype.on=function(d,h,p){return i(this,d,h,p,!1)},a.prototype.once=function(d,h,p){return i(this,d,h,p,!0)},a.prototype.removeListener=function(d,h,p,x){var y=t?t+d:d;if(!this._events[y])return this;if(!h)return o(this,y),this;var E=this._events[y];if(E.fn)E.fn===h&&(!x||E.once)&&(!p||E.context===p)&&o(this,y);else{for(var g=0,S=[],A=E.length;g<A;g++)(E[g].fn!==h||x&&!E[g].once||p&&E[g].context!==p)&&S.push(E[g]);S.length?this._events[y]=S.length===1?S[0]:S:o(this,y)}return this},a.prototype.removeAllListeners=function(d){var h;return d?(h=t?t+d:d,this._events[h]&&o(this,h)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,n.exports=a}(Ha)),Ha.exports}var My=Ny();const Ff=jr(My);var jy=class extends Ff{constructor(e,t,r){super();_t(this,"socket");this.socket=new window.WebSocket(e,r),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=s=>this.emit("message",s.data),this.socket.onerror=s=>this.emit("error",s),this.socket.onclose=s=>{this.emit("close",s.code,s.reason)}}send(e,t,r){const s=r||t;try{this.socket.send(e),s()}catch(i){s(i)}}close(e,t){this.socket.close(e,t)}addEventListener(e,t,r){this.socket.addEventListener(e,t,r)}};function Ay(n,e){return new jy(n,e)}var Iy=class{encode(n){return JSON.stringify(n)}decode(n){return JSON.parse(n)}},Cy=class extends Ff{constructor(e,t="ws://localhost:8080",{autoconnect:r=!0,reconnect:s=!0,reconnect_interval:i=1e3,max_reconnects:o=5,...a}={},c,d){super();_t(this,"address");_t(this,"rpc_id");_t(this,"queue");_t(this,"options");_t(this,"autoconnect");_t(this,"ready");_t(this,"reconnect");_t(this,"reconnect_timer_id");_t(this,"reconnect_interval");_t(this,"max_reconnects");_t(this,"rest_options");_t(this,"current_reconnects");_t(this,"generate_request_id");_t(this,"socket");_t(this,"webSocketFactory");_t(this,"dataPack");this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=t,this.autoconnect=r,this.ready=!1,this.reconnect=s,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=o,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=c||(()=>++this.rpc_id),d?this.dataPack=d:this.dataPack=new Iy,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,t,r,s){return!s&&typeof r=="object"&&(s=r,r=null),new Promise((i,o)=>{if(!this.ready)return o(new Error("socket not ready"));const a=this.generate_request_id(e,t),c={jsonrpc:"2.0",method:e,params:t||void 0,id:a};this.socket.send(this.dataPack.encode(c),s,d=>{if(d)return o(d);this.queue[a]={promise:[i,o]},r&&(this.queue[a].timeout=setTimeout(()=>{delete this.queue[a],o(new Error("reply timeout"))},r))})})}async login(e){const t=await this.call("rpc.login",e);if(!t)throw new Error("authentication failed");return t}async listMethods(){return await this.call("__listMethods")}notify(e,t){return new Promise((r,s)=>{if(!this.ready)return s(new Error("socket not ready"));const i={jsonrpc:"2.0",method:e,params:t};this.socket.send(this.dataPack.encode(i),o=>{if(o)return s(o);r()})})}async subscribe(e){typeof e=="string"&&(e=[e]);const t=await this.call("rpc.on",e);if(typeof e=="string"&&t[e]!=="ok")throw new Error("Failed subscribing to an event '"+e+"' with: "+t[e]);return t}async unsubscribe(e){typeof e=="string"&&(e=[e]);const t=await this.call("rpc.off",e);if(typeof e=="string"&&t[e]!=="ok")throw new Error("Failed unsubscribing from an event with: "+t);return t}close(e,t){this.socket.close(e||1e3,t)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}_connect(e,t){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,t),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:r})=>{r instanceof ArrayBuffer&&(r=je.Buffer.from(r).toString());try{r=this.dataPack.decode(r)}catch{return}if(r.notification&&this.listeners(r.notification).length){if(!Object.keys(r.params).length)return this.emit(r.notification);const s=[r.notification];if(r.params.constructor===Object)s.push(r.params);else for(let i=0;i<r.params.length;i++)s.push(r.params[i]);return Promise.resolve().then(()=>{this.emit.apply(this,s)})}if(!this.queue[r.id])return r.method?Promise.resolve().then(()=>{this.emit(r.method,r==null?void 0:r.params)}):void 0;"error"in r=="result"in r&&this.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[r.id].timeout&&clearTimeout(this.queue[r.id].timeout),r.error?this.queue[r.id].promise[1](r.error):this.queue[r.id].promise[0](r.result),delete this.queue[r.id]}),this.socket.addEventListener("error",r=>this.emit("error",r)),this.socket.addEventListener("close",({code:r,reason:s})=>{this.ready&&setTimeout(()=>this.emit("close",r,s),0),this.ready=!1,this.socket=void 0,r!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(e,t),this.reconnect_interval)))})}};class Uf extends gf{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,pm(e);const r=Wl(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return ao(this),this.iHash.update(e),this}digestInto(e){ao(this),Co(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const zf=(n,e,t)=>new Uf(n,e).update(t).digest();zf.create=(n,e)=>new Uf(n,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function dd(n){n.lowS!==void 0&&Gn("lowS",n.lowS),n.prehash!==void 0&&Gn("prehash",n.prehash)}function Ty(n){const e=Vl(n);qs(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:r,a:s}=e;if(t){if(!r.eql(s,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:_y,hexToBytes:ky}=tg;class Ly extends Error{constructor(e=""){super(e)}}const On={Err:Ly,_tlv:{encode:(n,e)=>{const{Err:t}=On;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");const r=e.length/2,s=gs(r);if(s.length/2&128)throw new t("tlv.encode: long form length too big");const i=r>127?gs(s.length/2|128):"";return gs(n)+i+s+e},decode(n,e){const{Err:t}=On;let r=0;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[r++]!==n)throw new t("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new t("tlv.decode(long): indefinite length not supported");if(c>4)throw new t("tlv.decode(long): byte length is too big");const d=e.subarray(r,r+c);if(d.length!==c)throw new t("tlv.decode: length bytes not complete");if(d[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const h of d)o=o<<8|h;if(r+=c,o<128)throw new t("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new t("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(n){const{Err:e}=On;if(n<zn)throw new e("integer: negative integers are not allowed");let t=gs(n);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(n){const{Err:e}=On;if(n[0]&128)throw new e("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return _y(n)}},toSig(n){const{Err:e,_int:t,_tlv:r}=On,s=typeof n=="string"?ky(n):n;Si(s);const{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:d,l:h}=r.decode(2,c);if(h.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(a),s:t.decode(d)}},hexFromSig(n){const{_tlv:e,_int:t}=On,r=e.encode(2,t.encode(n.r)),s=e.encode(2,t.encode(n.s)),i=r+s;return e.encode(48,i)}},zn=BigInt(0),kt=BigInt(1);BigInt(2);const hd=BigInt(3);BigInt(4);function Ry(n){const e=Ty(n),{Fp:t}=e,r=Lo(e.n,e.nBitLength),s=e.toBytes||((g,S,A)=>{const k=S.toAffine();return ns(Uint8Array.from([4]),t.toBytes(k.x),t.toBytes(k.y))}),i=e.fromBytes||(g=>{const S=g.subarray(1),A=t.fromBytes(S.subarray(0,t.BYTES)),k=t.fromBytes(S.subarray(t.BYTES,2*t.BYTES));return{x:A,y:k}});function o(g){const{a:S,b:A}=e,k=t.sqr(g),M=t.mul(k,g);return t.add(t.add(M,t.mul(g,S)),A)}if(!t.eql(t.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(g){return ko(g,kt,e.n)}function c(g){const{allowedPrivateKeyLengths:S,nByteLength:A,wrapPrivateKey:k,n:M}=e;if(S&&typeof g!="bigint"){if(es(g)&&(g=ts(g)),typeof g!="string"||!S.includes(g.length))throw new Error("invalid private key");g=g.padStart(A*2,"0")}let O;try{O=typeof g=="bigint"?g:Yr(Nt("private key",g,A))}catch{throw new Error("invalid private key, expected hex or "+A+" bytes, got "+typeof g)}return k&&(O=Ye(O,M)),dn("private key",O,kt,M),O}function d(g){if(!(g instanceof x))throw new Error("ProjectivePoint expected")}const h=hi((g,S)=>{const{px:A,py:k,pz:M}=g;if(t.eql(M,t.ONE))return{x:A,y:k};const O=g.is0();S==null&&(S=O?t.ONE:t.inv(M));const B=t.mul(A,S),z=t.mul(k,S),V=t.mul(M,S);if(O)return{x:t.ZERO,y:t.ZERO};if(!t.eql(V,t.ONE))throw new Error("invZ was invalid");return{x:B,y:z}}),p=hi(g=>{if(g.is0()){if(e.allowInfinityPoint&&!t.is0(g.py))return;throw new Error("bad point: ZERO")}const{x:S,y:A}=g.toAffine();if(!t.isValid(S)||!t.isValid(A))throw new Error("bad point: x or y not FE");const k=t.sqr(A),M=o(S);if(!t.eql(k,M))throw new Error("bad point: equation left != right");if(!g.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class x{constructor(S,A,k){if(this.px=S,this.py=A,this.pz=k,S==null||!t.isValid(S))throw new Error("x required");if(A==null||!t.isValid(A))throw new Error("y required");if(k==null||!t.isValid(k))throw new Error("z required");Object.freeze(this)}static fromAffine(S){const{x:A,y:k}=S||{};if(!S||!t.isValid(A)||!t.isValid(k))throw new Error("invalid affine point");if(S instanceof x)throw new Error("projective point not allowed");const M=O=>t.eql(O,t.ZERO);return M(A)&&M(k)?x.ZERO:new x(A,k,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(S){const A=t.invertBatch(S.map(k=>k.pz));return S.map((k,M)=>k.toAffine(A[M])).map(x.fromAffine)}static fromHex(S){const A=x.fromAffine(i(Nt("pointHex",S)));return A.assertValidity(),A}static fromPrivateKey(S){return x.BASE.multiply(c(S))}static msm(S,A){return Cf(x,r,S,A)}_setWindowSize(S){E.setWindowSize(this,S)}assertValidity(){p(this)}hasEvenY(){const{y:S}=this.toAffine();if(t.isOdd)return!t.isOdd(S);throw new Error("Field doesn't support isOdd")}equals(S){d(S);const{px:A,py:k,pz:M}=this,{px:O,py:B,pz:z}=S,V=t.eql(t.mul(A,z),t.mul(O,M)),H=t.eql(t.mul(k,z),t.mul(B,M));return V&&H}negate(){return new x(this.px,t.neg(this.py),this.pz)}double(){const{a:S,b:A}=e,k=t.mul(A,hd),{px:M,py:O,pz:B}=this;let z=t.ZERO,V=t.ZERO,H=t.ZERO,F=t.mul(M,M),$=t.mul(O,O),q=t.mul(B,B),Y=t.mul(M,O);return Y=t.add(Y,Y),H=t.mul(M,B),H=t.add(H,H),z=t.mul(S,H),V=t.mul(k,q),V=t.add(z,V),z=t.sub($,V),V=t.add($,V),V=t.mul(z,V),z=t.mul(Y,z),H=t.mul(k,H),q=t.mul(S,q),Y=t.sub(F,q),Y=t.mul(S,Y),Y=t.add(Y,H),H=t.add(F,F),F=t.add(H,F),F=t.add(F,q),F=t.mul(F,Y),V=t.add(V,F),q=t.mul(O,B),q=t.add(q,q),F=t.mul(q,Y),z=t.sub(z,F),H=t.mul(q,$),H=t.add(H,H),H=t.add(H,H),new x(z,V,H)}add(S){d(S);const{px:A,py:k,pz:M}=this,{px:O,py:B,pz:z}=S;let V=t.ZERO,H=t.ZERO,F=t.ZERO;const $=e.a,q=t.mul(e.b,hd);let Y=t.mul(A,O),_=t.mul(k,B),u=t.mul(M,z),b=t.add(A,k),N=t.add(O,B);b=t.mul(b,N),N=t.add(Y,_),b=t.sub(b,N),N=t.add(A,M);let j=t.add(O,z);return N=t.mul(N,j),j=t.add(Y,u),N=t.sub(N,j),j=t.add(k,M),V=t.add(B,z),j=t.mul(j,V),V=t.add(_,u),j=t.sub(j,V),F=t.mul($,N),V=t.mul(q,u),F=t.add(V,F),V=t.sub(_,F),F=t.add(_,F),H=t.mul(V,F),_=t.add(Y,Y),_=t.add(_,Y),u=t.mul($,u),N=t.mul(q,N),_=t.add(_,u),u=t.sub(Y,u),u=t.mul($,u),N=t.add(N,u),Y=t.mul(_,N),H=t.add(H,Y),Y=t.mul(j,N),V=t.mul(b,V),V=t.sub(V,Y),Y=t.mul(b,_),F=t.mul(j,F),F=t.add(F,Y),new x(V,H,F)}subtract(S){return this.add(S.negate())}is0(){return this.equals(x.ZERO)}wNAF(S){return E.wNAFCached(this,S,x.normalizeZ)}multiplyUnsafe(S){const{endo:A,n:k}=e;dn("scalar",S,zn,k);const M=x.ZERO;if(S===zn)return M;if(this.is0()||S===kt)return this;if(!A||E.hasPrecomputes(this))return E.wNAFCachedUnsafe(this,S,x.normalizeZ);let{k1neg:O,k1:B,k2neg:z,k2:V}=A.splitScalar(S),H=M,F=M,$=this;for(;B>zn||V>zn;)B&kt&&(H=H.add($)),V&kt&&(F=F.add($)),$=$.double(),B>>=kt,V>>=kt;return O&&(H=H.negate()),z&&(F=F.negate()),F=new x(t.mul(F.px,A.beta),F.py,F.pz),H.add(F)}multiply(S){const{endo:A,n:k}=e;dn("scalar",S,kt,k);let M,O;if(A){const{k1neg:B,k1:z,k2neg:V,k2:H}=A.splitScalar(S);let{p:F,f:$}=this.wNAF(z),{p:q,f:Y}=this.wNAF(H);F=E.constTimeNegate(B,F),q=E.constTimeNegate(V,q),q=new x(t.mul(q.px,A.beta),q.py,q.pz),M=F.add(q),O=$.add(Y)}else{const{p:B,f:z}=this.wNAF(S);M=B,O=z}return x.normalizeZ([M,O])[0]}multiplyAndAddUnsafe(S,A,k){const M=x.BASE,O=(z,V)=>V===zn||V===kt||!z.equals(M)?z.multiplyUnsafe(V):z.multiply(V),B=O(this,A).add(O(S,k));return B.is0()?void 0:B}toAffine(S){return h(this,S)}isTorsionFree(){const{h:S,isTorsionFree:A}=e;if(S===kt)return!0;if(A)return A(x,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:S,clearCofactor:A}=e;return S===kt?this:A?A(x,this):this.multiplyUnsafe(e.h)}toRawBytes(S=!0){return Gn("isCompressed",S),this.assertValidity(),s(x,this,S)}toHex(S=!0){return Gn("isCompressed",S),ts(this.toRawBytes(S))}}x.BASE=new x(e.Gx,e.Gy,t.ONE),x.ZERO=new x(t.ZERO,t.ONE,t.ZERO);const y=e.nBitLength,E=If(x,e.endo?Math.ceil(y/2):y);return{CURVE:e,ProjectivePoint:x,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function By(n){const e=Vl(n);return qs(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function Oy(n){const e=By(n),{Fp:t,n:r}=e,s=t.BYTES+1,i=2*t.BYTES+1;function o(u){return Ye(u,r)}function a(u){return rl(u,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:d,weierstrassEquation:h,isWithinCurveOrder:p}=Ry({...e,toBytes(u,b,N){const j=b.toAffine(),R=t.toBytes(j.x),U=ns;return Gn("isCompressed",N),N?U(Uint8Array.from([b.hasEvenY()?2:3]),R):U(Uint8Array.from([4]),R,t.toBytes(j.y))},fromBytes(u){const b=u.length,N=u[0],j=u.subarray(1);if(b===s&&(N===2||N===3)){const R=Yr(j);if(!ko(R,kt,t.ORDER))throw new Error("Point is not on curve");const U=h(R);let K;try{K=t.sqrt(U)}catch(m){const T=m instanceof Error?": "+m.message:"";throw new Error("Point is not on curve"+T)}const L=(K&kt)===kt;return(N&1)===1!==L&&(K=t.neg(K)),{x:R,y:K}}else if(b===i&&N===4){const R=t.fromBytes(j.subarray(0,t.BYTES)),U=t.fromBytes(j.subarray(t.BYTES,2*t.BYTES));return{x:R,y:U}}else{const R=s,U=i;throw new Error("invalid Point, expected length of "+R+", or uncompressed "+U+", got "+b)}}}),x=u=>ts(Ds(u,e.nByteLength));function y(u){const b=r>>kt;return u>b}function E(u){return y(u)?o(-u):u}const g=(u,b,N)=>Yr(u.slice(b,N));class S{constructor(b,N,j){this.r=b,this.s=N,this.recovery=j,this.assertValidity()}static fromCompact(b){const N=e.nByteLength;return b=Nt("compactSignature",b,N*2),new S(g(b,0,N),g(b,N,2*N))}static fromDER(b){const{r:N,s:j}=On.toSig(Nt("DER",b));return new S(N,j)}assertValidity(){dn("r",this.r,kt,r),dn("s",this.s,kt,r)}addRecoveryBit(b){return new S(this.r,this.s,b)}recoverPublicKey(b){const{r:N,s:j,recovery:R}=this,U=z(Nt("msgHash",b));if(R==null||![0,1,2,3].includes(R))throw new Error("recovery id invalid");const K=R===2||R===3?N+e.n:N;if(K>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const L=R&1?"03":"02",f=c.fromHex(L+x(K)),m=a(K),T=o(-U*m),P=o(j*m),Z=c.BASE.multiplyAndAddUnsafe(f,T,P);if(!Z)throw new Error("point at infinify");return Z.assertValidity(),Z}hasHighS(){return y(this.s)}normalizeS(){return this.hasHighS()?new S(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Os(this.toDERHex())}toDERHex(){return On.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Os(this.toCompactHex())}toCompactHex(){return x(this.r)+x(this.s)}}const A={isValidPrivateKey(u){try{return d(u),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const u=Mf(e.n);return dg(e.randomBytes(u),e.n)},precompute(u=8,b=c.BASE){return b._setWindowSize(u),b.multiply(BigInt(3)),b}};function k(u,b=!0){return c.fromPrivateKey(u).toRawBytes(b)}function M(u){const b=es(u),N=typeof u=="string",j=(b||N)&&u.length;return b?j===s||j===i:N?j===2*s||j===2*i:u instanceof c}function O(u,b,N=!0){if(M(u))throw new Error("first arg must be private key");if(!M(b))throw new Error("second arg must be public key");return c.fromHex(b).multiply(d(u)).toRawBytes(N)}const B=e.bits2int||function(u){if(u.length>8192)throw new Error("input is too large");const b=Yr(u),N=u.length*8-e.nBitLength;return N>0?b>>BigInt(N):b},z=e.bits2int_modN||function(u){return o(B(u))},V=Kl(e.nBitLength);function H(u){return dn("num < 2^"+e.nBitLength,u,zn,V),Ds(u,e.nByteLength)}function F(u,b,N=$){if(["recovered","canonical"].some(ie=>ie in N))throw new Error("sign() legacy options not supported");const{hash:j,randomBytes:R}=e;let{lowS:U,prehash:K,extraEntropy:L}=N;U==null&&(U=!0),u=Nt("msgHash",u),dd(N),K&&(u=Nt("prehashed msgHash",j(u)));const f=z(u),m=d(b),T=[H(m),H(f)];if(L!=null&&L!==!1){const ie=L===!0?R(t.BYTES):L;T.push(Nt("extraEntropy",ie))}const P=ns(...T),Z=f;function ne(ie){const ae=B(ie);if(!p(ae))return;const Ce=a(ae),ve=c.BASE.multiply(ae).toAffine(),Ae=o(ve.x);if(Ae===zn)return;const it=o(Ce*o(Z+Ae*m));if(it===zn)return;let Te=(ve.x===Ae?0:2)|Number(ve.y&kt),ke=it;return U&&y(it)&&(ke=E(it),Te^=1),new S(Ae,ke,Te)}return{seed:P,k2sig:ne}}const $={lowS:e.lowS,prehash:!1},q={lowS:e.lowS,prehash:!1};function Y(u,b,N=$){const{seed:j,k2sig:R}=F(u,b,N),U=e;return Sf(U.hash.outputLen,U.nByteLength,U.hmac)(j,R)}c.BASE._setWindowSize(8);function _(u,b,N,j=q){var Te;const R=u;b=Nt("msgHash",b),N=Nt("publicKey",N);const{lowS:U,prehash:K,format:L}=j;if(dd(j),"strict"in j)throw new Error("options.strict was renamed to lowS");if(L!==void 0&&L!=="compact"&&L!=="der")throw new Error("format must be compact or der");const f=typeof R=="string"||es(R),m=!f&&!L&&typeof R=="object"&&R!==null&&typeof R.r=="bigint"&&typeof R.s=="bigint";if(!f&&!m)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let T,P;try{if(m&&(T=new S(R.r,R.s)),f){try{L!=="compact"&&(T=S.fromDER(R))}catch(ke){if(!(ke instanceof On.Err))throw ke}!T&&L!=="der"&&(T=S.fromCompact(R))}P=c.fromHex(N)}catch{return!1}if(!T||U&&T.hasHighS())return!1;K&&(b=e.hash(b));const{r:Z,s:ne}=T,ie=z(b),ae=a(ne),Ce=o(ie*ae),ve=o(Z*ae),Ae=(Te=c.BASE.multiplyAndAddUnsafe(P,Ce,ve))==null?void 0:Te.toAffine();return Ae?o(Ae.x)===Z:!1}return{CURVE:e,getPublicKey:k,getSharedSecret:O,sign:Y,verify:_,ProjectivePoint:c,Signature:S,utils:A}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Dy(n){return{hash:n,hmac:(e,...t)=>zf(n,e,ym(...t)),randomBytes:wf}}function Py(n,e){const t=r=>Oy({...n,...Dy(r)});return{...t(e),create:t}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $f=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),fd=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Fy=BigInt(1),il=BigInt(2),pd=(n,e)=>(n+e/il)/e;function Uy(n){const e=$f,t=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),d=n*n*n%e,h=d*d*n%e,p=nt(h,t,e)*h%e,x=nt(p,t,e)*h%e,y=nt(x,il,e)*d%e,E=nt(y,s,e)*y%e,g=nt(E,i,e)*E%e,S=nt(g,a,e)*g%e,A=nt(S,c,e)*S%e,k=nt(A,a,e)*g%e,M=nt(k,t,e)*h%e,O=nt(M,o,e)*E%e,B=nt(O,r,e)*d%e,z=nt(B,il,e);if(!ol.eql(ol.sqr(z),n))throw new Error("Cannot find square root");return z}const ol=Lo($f,void 0,void 0,{sqrt:Uy}),zy=Py({a:BigInt(0),b:BigInt(7),Fp:ol,n:fd,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const e=fd,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Fy*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=t,o=BigInt("0x100000000000000000000000000000000"),a=pd(i*n,e),c=pd(-r*n,e);let d=Ye(n-a*t-c*s,e),h=Ye(-a*r-c*i,e);const p=d>o,x=h>o;if(p&&(d=e-d),x&&(h=e-h),d>o||h>o)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:p,k1:d,k2neg:x,k2:h}}}},sl);BigInt(0);function md(n){try{return Yl.ExtendedPoint.fromHex(n),!0}catch{return!1}}const qf=(n,e)=>Yl.sign(n,e.slice(0,32)),$y=Yl.verify,Fs=n=>je.Buffer.isBuffer(n)?n:n instanceof Uint8Array?je.Buffer.from(n.buffer,n.byteOffset,n.byteLength):je.Buffer.from(n);class qy{constructor(e){Object.assign(this,e)}encode(){return je.Buffer.from(Da.serialize(Yi,this))}static decode(e){return Da.deserialize(Yi,this,e)}static decodeUnchecked(e){return Da.deserializeUnchecked(Yi,this,e)}}const Yi=new Map;var Wf;const Wy=32,Nr=32;function Hy(n){return n._bn!==void 0}let gd=1;class pe extends qy{constructor(e){if(super({}),this._bn=void 0,Hy(e))this._bn=e._bn;else{if(typeof e=="string"){const t=Pt.decode(e);if(t.length!=Nr)throw new Error("Invalid public key input");this._bn=new Qu(t)}else this._bn=new Qu(e);if(this._bn.byteLength()>Nr)throw new Error("Invalid public key input")}}static unique(){const e=new pe(gd);return gd+=1,new pe(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return Pt.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(je.Buffer);if(e.length===Nr)return e;const t=je.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,r){const s=je.Buffer.concat([e.toBuffer(),je.Buffer.from(t),r.toBuffer()]),i=sl(s);return new pe(i)}static createProgramAddressSync(e,t){let r=je.Buffer.alloc(0);e.forEach(function(i){if(i.length>Wy)throw new TypeError("Max seed length exceeded");r=je.Buffer.concat([r,Fs(i)])}),r=je.Buffer.concat([r,t.toBuffer(),je.Buffer.from("ProgramDerivedAddress")]);const s=sl(r);if(md(s))throw new Error("Invalid seeds, address must fall off the curve");return new pe(s)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let r=255,s;for(;r!=0;){try{const i=e.concat(je.Buffer.from([r]));s=this.createProgramAddressSync(i,t)}catch(i){if(i instanceof TypeError)throw i;r--;continue}return[s,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new pe(e);return md(t.toBytes())}}Wf=pe;pe.default=new Wf("11111111111111111111111111111111");Yi.set(pe,{kind:"struct",fields:[["_bn","u256"]]});new pe("BPFLoader1111111111111111111111111111111111");const vs=1232,eu=127,fi=64;class Hf extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Hf.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Kf extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Kf.prototype,"name",{value:"TransactionExpiredTimeoutError"});class ni extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(ni.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class po{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((i,o)=>{r.set(i.toBase58(),o)});const s=i=>{const o=r.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}}const Ie=(n="publicKey")=>W.blob(32,n),Ky=(n="signature")=>W.blob(64,n),ys=(n="string")=>{const e=W.struct([W.u32("length"),W.u32("lengthPadding"),W.blob(W.offset(W.u32(),-8),"chars")],n),t=e.decode.bind(e),r=e.encode.bind(e),s=e;return s.decode=(i,o)=>t(i,o).chars.toString(),s.encode=(i,o,a)=>{const c={chars:je.Buffer.from(i,"utf8")};return r(c,o,a)},s.alloc=i=>W.u32().span+W.u32().span+je.Buffer.from(i,"utf8").length,s},Vy=(n="authorized")=>W.struct([Ie("staker"),Ie("withdrawer")],n),Gy=(n="lockup")=>W.struct([W.ns64("unixTimestamp"),W.ns64("epoch"),Ie("custodian")],n),Yy=(n="voteInit")=>W.struct([Ie("nodePubkey"),Ie("authorizedVoter"),Ie("authorizedWithdrawer"),W.u8("commission")],n),Qy=(n="voteAuthorizeWithSeedArgs")=>W.struct([W.u32("voteAuthorizationType"),Ie("currentAuthorityDerivedKeyOwnerPubkey"),ys("currentAuthorityDerivedKeySeed"),Ie("newAuthorized")],n);function sn(n){let e=0,t=0;for(;;){let r=n.shift();if(e|=(r&127)<<t*7,t+=1,!(r&128))break}return e}function on(n,e){let t=e;for(;;){let r=t&127;if(t>>=7,t==0){n.push(r);break}else r|=128,n.push(r)}}function Ge(n,e){if(!n)throw new Error(e||"Assertion failed")}class Po{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const r=new Map,s=o=>{const a=o.toBase58();let c=r.get(a);return c===void 0&&(c={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(a,c)),c},i=s(t);i.isSigner=!0,i.isWritable=!0;for(const o of e){s(o.programId).isInvoked=!0;for(const a of o.keys){const c=s(a.pubkey);c.isSigner||(c.isSigner=a.isSigner),c.isWritable||(c.isWritable=a.isWritable)}}return new Po(t,r)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];Ge(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,c])=>c.isSigner&&c.isWritable),r=e.filter(([,c])=>c.isSigner&&!c.isWritable),s=e.filter(([,c])=>!c.isSigner&&c.isWritable),i=e.filter(([,c])=>!c.isSigner&&!c.isWritable),o={numRequiredSignatures:t.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{Ge(t.length>0,"Expected at least one writable signer key");const[c]=t[0];Ge(c===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...t.map(([c])=>new pe(c)),...r.map(([c])=>new pe(c)),...s.map(([c])=>new pe(c)),...i.map(([c])=>new pe(c))];return[o,a]}extractTableLookup(e){const[t,r]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(t.length===0&&s.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:s},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(e,t){const r=new Array,s=new Array;for(const[i,o]of this.keyMetaMap.entries())if(t(o)){const a=new pe(i),c=e.findIndex(d=>d.equals(a));c>=0&&(Ge(c<256,"Max lookup table index exceeded"),r.push(c),s.push(a),this.keyMetaMap.delete(i))}return[r,s]}}const Vf="Reached end of buffer unexpectedly";function $n(n){if(n.length===0)throw new Error(Vf);return n.shift()}function an(n,...e){const[t]=e;if(e.length===2?t+(e[1]??0)>n.length:t>=n.length)throw new Error(Vf);return n.splice(...e)}class Zn{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new pe(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Pt.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new po(this.staticAccountKeys)}static compile(e){const t=Po.compile(e.instructions,e.payerKey),[r,s]=t.getMessageComponents(),o=new po(s).compileInstructions(e.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:Pt.encode(a.data)}));return new Zn({header:r,accountKeys:s,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const r=e-t,i=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return r<i}else{const r=t-this.header.numReadonlySignedAccounts;return e<r}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];on(t,e);const r=this.instructions.map(p=>{const{accounts:x,programIdIndex:y}=p,E=Array.from(Pt.decode(p.data));let g=[];on(g,x.length);let S=[];return on(S,E.length),{programIdIndex:y,keyIndicesCount:je.Buffer.from(g),keyIndices:x,dataLength:je.Buffer.from(S),data:E}});let s=[];on(s,r.length);let i=je.Buffer.alloc(vs);je.Buffer.from(s).copy(i);let o=s.length;r.forEach(p=>{const y=W.struct([W.u8("programIdIndex"),W.blob(p.keyIndicesCount.length,"keyIndicesCount"),W.seq(W.u8("keyIndex"),p.keyIndices.length,"keyIndices"),W.blob(p.dataLength.length,"dataLength"),W.seq(W.u8("userdatum"),p.data.length,"data")]).encode(p,i,o);o+=y}),i=i.slice(0,o);const a=W.struct([W.blob(1,"numRequiredSignatures"),W.blob(1,"numReadonlySignedAccounts"),W.blob(1,"numReadonlyUnsignedAccounts"),W.blob(t.length,"keyCount"),W.seq(Ie("key"),e,"keys"),Ie("recentBlockhash")]),c={numRequiredSignatures:je.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:je.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:je.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:je.Buffer.from(t),keys:this.accountKeys.map(p=>Fs(p.toBytes())),recentBlockhash:Pt.decode(this.recentBlockhash)};let d=je.Buffer.alloc(2048);const h=a.encode(c,d);return i.copy(d,h),d.slice(0,h+i.length)}static from(e){let t=[...e];const r=$n(t);if(r!==(r&eu))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=$n(t),i=$n(t),o=sn(t);let a=[];for(let x=0;x<o;x++){const y=an(t,0,Nr);a.push(new pe(je.Buffer.from(y)))}const c=an(t,0,Nr),d=sn(t);let h=[];for(let x=0;x<d;x++){const y=$n(t),E=sn(t),g=an(t,0,E),S=sn(t),A=an(t,0,S),k=Pt.encode(je.Buffer.from(A));h.push({programIdIndex:y,accounts:g,data:k})}const p={header:{numRequiredSignatures:r,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:Pt.encode(je.Buffer.from(c)),accountKeys:a,instructions:h};return new Zn(p)}}class pi{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new po(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(e>=r){const s=e-r,i=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return s<i}else if(e>=this.header.numRequiredSignatures){const s=e-t,o=r-t-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=t-this.header.numReadonlySignedAccounts;return e<s}}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const r of this.addressTableLookups){const s=e.find(i=>i.key.equals(r.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const i of r.writableIndexes)if(i<s.state.addresses.length)t.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`);for(const i of r.readonlyIndexes)if(i<s.state.addresses.length)t.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`)}return t}static compile(e){const t=Po.compile(e.instructions,e.payerKey),r=new Array,s={writable:new Array,readonly:new Array},i=e.addressLookupTableAccounts||[];for(const h of i){const p=t.extractTableLookup(h);if(p!==void 0){const[x,{writable:y,readonly:E}]=p;r.push(x),s.writable.push(...y),s.readonly.push(...E)}}const[o,a]=t.getMessageComponents(),d=new po(a,s).compileInstructions(e.instructions);return new pi({header:o,staticAccountKeys:a,recentBlockhash:e.recentBlockhash,compiledInstructions:d,addressTableLookups:r})}serialize(){const e=Array();on(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),r=Array();on(r,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();on(i,this.addressTableLookups.length);const o=W.struct([W.u8("prefix"),W.struct([W.u8("numRequiredSignatures"),W.u8("numReadonlySignedAccounts"),W.u8("numReadonlyUnsignedAccounts")],"header"),W.blob(e.length,"staticAccountKeysLength"),W.seq(Ie(),this.staticAccountKeys.length,"staticAccountKeys"),Ie("recentBlockhash"),W.blob(r.length,"instructionsLength"),W.blob(t.length,"serializedInstructions"),W.blob(i.length,"addressTableLookupsLength"),W.blob(s.length,"serializedAddressTableLookups")]),a=new Uint8Array(vs),d=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(h=>h.toBytes()),recentBlockhash:Pt.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},a);return a.slice(0,d)}serializeInstructions(){let e=0;const t=new Uint8Array(vs);for(const r of this.compiledInstructions){const s=Array();on(s,r.accountKeyIndexes.length);const i=Array();on(i,r.data.length);const o=W.struct([W.u8("programIdIndex"),W.blob(s.length,"encodedAccountKeyIndexesLength"),W.seq(W.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),W.blob(i.length,"encodedDataLength"),W.blob(r.data.length,"data")]);e+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(vs);for(const r of this.addressTableLookups){const s=Array();on(s,r.writableIndexes.length);const i=Array();on(i,r.readonlyIndexes.length);const o=W.struct([Ie("accountKey"),W.blob(s.length,"encodedWritableIndexesLength"),W.seq(W.u8(),r.writableIndexes.length,"writableIndexes"),W.blob(i.length,"encodedReadonlyIndexesLength"),W.seq(W.u8(),r.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const r=$n(t),s=r&eu;Ge(r!==s,"Expected versioned message but received legacy message");const i=s;Ge(i===0,`Expected versioned message with version 0 but found version ${i}`);const o={numRequiredSignatures:$n(t),numReadonlySignedAccounts:$n(t),numReadonlyUnsignedAccounts:$n(t)},a=[],c=sn(t);for(let E=0;E<c;E++)a.push(new pe(an(t,0,Nr)));const d=Pt.encode(an(t,0,Nr)),h=sn(t),p=[];for(let E=0;E<h;E++){const g=$n(t),S=sn(t),A=an(t,0,S),k=sn(t),M=new Uint8Array(an(t,0,k));p.push({programIdIndex:g,accountKeyIndexes:A,data:M})}const x=sn(t),y=[];for(let E=0;E<x;E++){const g=new pe(an(t,0,Nr)),S=sn(t),A=an(t,0,S),k=sn(t),M=an(t,0,k);y.push({accountKey:g,writableIndexes:A,readonlyIndexes:M})}return new pi({header:o,staticAccountKeys:a,recentBlockhash:d,compiledInstructions:p,addressTableLookups:y})}}const tu={deserializeMessageVersion(n){const e=n[0],t=e&eu;return t===e?"legacy":t},deserialize:n=>{const e=tu.deserializeMessageVersion(n);if(e==="legacy")return Zn.from(n);if(e===0)return pi.deserialize(n);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let ir=function(n){return n[n.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",n[n.PROCESSED=1]="PROCESSED",n[n.TIMED_OUT=2]="TIMED_OUT",n[n.NONCE_INVALID=3]="NONCE_INVALID",n}({});const Zy=je.Buffer.alloc(fi).fill(0);class yd{constructor(e){this.keys=void 0,this.programId=void 0,this.data=je.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:r})=>({pubkey:e.toJSON(),isSigner:t,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class bn{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:r}=e;this.minNonceContextSlot=t,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:r}=e;this.recentBlockhash=t,this.lastValidBlockHeight=r}else{const{recentBlockhash:t,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new yd(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let g=0;g<t.length;g++)if(t[g].programId===void 0)throw new Error(`Transaction instruction index ${g} has undefined program id`);const s=[],i=[];t.forEach(g=>{g.keys.forEach(A=>{i.push({...A})});const S=g.programId.toString();s.includes(S)||s.push(S)}),s.forEach(g=>{i.push({pubkey:new pe(g),isSigner:!1,isWritable:!1})});const o=[];i.forEach(g=>{const S=g.pubkey.toString(),A=o.findIndex(k=>k.pubkey.toString()===S);A>-1?(o[A].isWritable=o[A].isWritable||g.isWritable,o[A].isSigner=o[A].isSigner||g.isSigner):o.push(g)}),o.sort(function(g,S){if(g.isSigner!==S.isSigner)return g.isSigner?-1:1;if(g.isWritable!==S.isWritable)return g.isWritable?-1:1;const A={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return g.pubkey.toBase58().localeCompare(S.pubkey.toBase58(),"en",A)});const a=o.findIndex(g=>g.pubkey.equals(r));if(a>-1){const[g]=o.splice(a,1);g.isSigner=!0,g.isWritable=!0,o.unshift(g)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const g of this.signatures){const S=o.findIndex(A=>A.pubkey.equals(g.publicKey));if(S>-1)o[S].isSigner||(o[S].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${g.publicKey.toString()}`)}let c=0,d=0,h=0;const p=[],x=[];o.forEach(({pubkey:g,isSigner:S,isWritable:A})=>{S?(p.push(g.toString()),c+=1,A||(d+=1)):(x.push(g.toString()),A||(h+=1))});const y=p.concat(x),E=t.map(g=>{const{data:S,programId:A}=g;return{programIdIndex:y.indexOf(A.toString()),accounts:g.keys.map(k=>y.indexOf(k.pubkey.toString())),data:Pt.encode(S)}});return E.forEach(g=>{Ge(g.programIdIndex>=0),g.accounts.forEach(S=>Ge(S>=0))}),new Zn({header:{numRequiredSignatures:c,numReadonlySignedAccounts:d,numReadonlyUnsignedAccounts:h},accountKeys:y,recentBlockhash:e,instructions:E})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((s,i)=>t[i].equals(s.publicKey))||(this.signatures=t.map(r=>({signature:null,publicKey:r}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(r=>{const s=r.toString();return t.has(s)?!1:(t.add(s),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,r=[];for(const i of e){const o=i.publicKey.toString();t.has(o)||(t.add(o),r.push(i))}this.signatures=r.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...r)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,r=[];for(const i of e){const o=i.publicKey.toString();t.has(o)||(t.add(o),r.push(i))}const s=this._compile();this._partialSign(s,...r)}_partialSign(e,...t){const r=e.serialize();t.forEach(s=>{const i=qf(r,s.secretKey);this._addSignature(s.publicKey,Fs(i))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){Ge(t.length===64);const r=this.signatures.findIndex(s=>e.equals(s.publicKey));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=je.Buffer.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){const r={};for(const{signature:s,publicKey:i}of this.signatures)s===null?t&&(r.missing||(r.missing=[])).push(i):$y(s,e,i.toBytes())||(r.invalid||(r.invalid=[])).push(i);return r.invalid||r.missing?r:void 0}serialize(e){const{requireAllSignatures:t,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),s=this.serializeMessage();if(r){const i=this._getMessageSignednessErrors(s,t);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(e){const{signatures:t}=this,r=[];on(r,t.length);const s=r.length+t.length*64+e.length,i=je.Buffer.alloc(s);return Ge(t.length<256),je.Buffer.from(r).copy(i,0),t.forEach(({signature:o},a)=>{o!==null&&(Ge(o.length===64,"signature has invalid length"),je.Buffer.from(o).copy(i,r.length+a*64))}),e.copy(i,r.length+t.length*64),Ge(i.length<=vs,`Transaction too large: ${i.length} > ${vs}`),i}get keys(){return Ge(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return Ge(this.instructions.length===1),this.instructions[0].programId}get data(){return Ge(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const r=sn(t);let s=[];for(let i=0;i<r;i++){const o=an(t,0,fi);s.push(Pt.encode(je.Buffer.from(o)))}return bn.populate(Zn.from(t),s)}static populate(e,t=[]){const r=new bn;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),t.forEach((s,i)=>{const o={signature:s==Pt.encode(Zy)?null:Pt.decode(s),publicKey:e.accountKeys[i]};r.signatures.push(o)}),e.instructions.forEach(s=>{const i=s.accounts.map(o=>{const a=e.accountKeys[o];return{pubkey:a,isSigner:r.signatures.some(c=>c.publicKey.toString()===a.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});r.instructions.push(new yd({keys:i,programId:e.accountKeys[s.programIdIndex],data:Pt.decode(s.data)}))}),r._message=e,r._json=r.toJSON(),r}}class mi{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,t!==void 0)Ge(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const r=[];for(let s=0;s<e.header.numRequiredSignatures;s++)r.push(new Uint8Array(fi));this.signatures=r}this.message=e}serialize(){const e=this.message.serialize(),t=Array();on(t,this.signatures.length);const r=W.struct([W.blob(t.length,"encodedSignaturesLength"),W.seq(Ky(),this.signatures.length,"signatures"),W.blob(e.length,"serializedMessage")]),s=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},s);return s.slice(0,i)}static deserialize(e){let t=[...e];const r=[],s=sn(t);for(let o=0;o<s;o++)r.push(new Uint8Array(an(t,0,fi)));const i=tu.deserialize(new Uint8Array(t));return new mi(i,r)}sign(e){const t=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of e){const i=r.findIndex(o=>o.equals(s.publicKey));Ge(i>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[i]=qf(t,s.secretKey)}}addSignature(e,t){Ge(t.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(e));Ge(s>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=t}}const Jy=160,Xy=64,ew=Jy/Xy,tw=1e3/ew;new pe("SysvarC1ock11111111111111111111111111111111");new pe("SysvarEpochSchedu1e111111111111111111111111");new pe("Sysvar1nstructions1111111111111111111111111");new pe("SysvarRecentB1ockHashes11111111111111111111");new pe("SysvarRent111111111111111111111111111111111");new pe("SysvarRewards111111111111111111111111111111");new pe("SysvarS1otHashes111111111111111111111111111");new pe("SysvarS1otHistory11111111111111111111111111");new pe("SysvarStakeHistory1111111111111111111111111");class wd extends Error{constructor({action:e,signature:t,transactionMessage:r,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(e){case"send":a=`Transaction ${t} resulted in an error. 
${r}. `+i+o;break;case"simulate":a=`Simulation failed. 
Message: ${r}. 
`+i+o;break;default:a=`Unknown action '${(c=>c)(e)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=r,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((t,r)=>{e.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,t(i)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}class fe extends Error{constructor({code:e,message:t,data:r},s){super(s!=null?`${s}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=r,this.name="SolanaJSONRPCError"}}function ms(n){return new Promise(e=>setTimeout(e,n))}const nw=W.nu64("lamportsPerSignature"),Gf=W.struct([W.u32("version"),W.u32("state"),Ie("authorizedPubkey"),Ie("nonce"),W.struct([nw],"feeCalculator")]);Gf.span;class nu{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=Gf.decode(Fs(e),0);return new nu({authorizedPubkey:new pe(t.authorizedPubkey),nonce:new pe(t.nonce).toString(),feeCalculator:t.feeCalculator})}}const rw=n=>{const e=n.decode.bind(n),t=n.encode.bind(n);return{decode:e,encode:t}},sw=n=>e=>{const t=W.blob(n,e),{encode:r,decode:s}=rw(t),i=t;return i.decode=(o,a)=>{const c=s(o,a);return id.toBigIntLE(je.Buffer.from(c))},i.encode=(o,a,c)=>{const d=id.toBufferLE(o,n);return r(d,a,c)},i},Us=sw(8);Object.freeze({Create:{index:0,layout:W.struct([W.u32("instruction"),W.ns64("lamports"),W.ns64("space"),Ie("programId")])},Assign:{index:1,layout:W.struct([W.u32("instruction"),Ie("programId")])},Transfer:{index:2,layout:W.struct([W.u32("instruction"),Us("lamports")])},CreateWithSeed:{index:3,layout:W.struct([W.u32("instruction"),Ie("base"),ys("seed"),W.ns64("lamports"),W.ns64("space"),Ie("programId")])},AdvanceNonceAccount:{index:4,layout:W.struct([W.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:W.struct([W.u32("instruction"),W.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:W.struct([W.u32("instruction"),Ie("authorized")])},AuthorizeNonceAccount:{index:7,layout:W.struct([W.u32("instruction"),Ie("authorized")])},Allocate:{index:8,layout:W.struct([W.u32("instruction"),W.ns64("space")])},AllocateWithSeed:{index:9,layout:W.struct([W.u32("instruction"),Ie("base"),ys("seed"),W.ns64("space"),Ie("programId")])},AssignWithSeed:{index:10,layout:W.struct([W.u32("instruction"),Ie("base"),ys("seed"),Ie("programId")])},TransferWithSeed:{index:11,layout:W.struct([W.u32("instruction"),Us("lamports"),ys("seed"),Ie("programId")])},UpgradeNonceAccount:{index:12,layout:W.struct([W.u32("instruction")])}});new pe("11111111111111111111111111111111");new pe("BPFLoader2111111111111111111111111111111111");function iw(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ka,bd;function ow(){if(bd)return Ka;bd=1;var n=Object.prototype.toString,e=Object.keys||function(r){var s=[];for(var i in r)s.push(i);return s};function t(r,s){var i,o,a,c,d,h,p;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return t(r.toJSON(),s);if(p=n.call(r),p==="[object Array]"){for(a="[",o=r.length-1,i=0;i<o;i++)a+=t(r[i],!0)+",";return o>-1&&(a+=t(r[i],!0)),a+"]"}else if(p==="[object Object]"){for(c=e(r).sort(),o=c.length,a="",i=0;i<o;)d=c[i],h=t(r[d],!1),h!==void 0&&(a&&(a+=","),a+=JSON.stringify(d)+":"+h),i++;return"{"+a+"}"}else return JSON.stringify(r);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return Ka=function(r){var s=t(r,!1);if(s!==void 0)return""+s},Ka}var aw=ow(),xd=iw(aw);const Ys=32;function Va(n){let e=0;for(;n>1;)n/=2,e++;return e}function cw(n){return n===0?1:(n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,n|=n>>32,n+1)}class lw{constructor(e,t,r,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=r,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const t=Va(cw(e+Ys+1))-Va(Ys)-1,r=this.getSlotsInEpoch(t),s=e-(r-Ys);return[t,s]}else{const t=e-this.firstNormalSlot,r=Math.floor(t/this.slotsPerEpoch),s=this.firstNormalEpoch+r,i=t%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*Ys:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+Va(Ys)):this.slotsPerEpoch}}var uw=globalThis.fetch;class dw extends Cy{constructor(e,t,r){const s=i=>{const o=Ay(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(s,e,t,r),this.underlyingSocket=void 0}call(...e){var r;const t=(r=this.underlyingSocket)==null?void 0:r.readyState;return t===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){var r;const t=(r=this.underlyingSocket)==null?void 0:r.readyState;return t===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}function hw(n,e){let t;try{t=n.layout.decode(e)}catch(r){throw new Error("invalid instruction; "+r)}if(t.typeIndex!==n.index)throw new Error(`invalid account data; account type mismatch ${t.typeIndex} != ${n.index}`);return t}const vd=56;class Sd{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=hw(fw,e),r=e.length-vd;Ge(r>=0,"lookup table is invalid"),Ge(r%32===0,"lookup table is invalid");const s=r/32,{addresses:i}=W.struct([W.seq(Ie(),s,"addresses")]).decode(e.slice(vd));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:t.authority.length!==0?new pe(t.authority[0]):void 0,addresses:i.map(o=>new pe(o))}}}const fw={index:1,layout:W.struct([W.u32("typeIndex"),Us("deactivationSlot"),W.nu64("lastExtendedSlot"),W.u8("lastExtendedStartIndex"),W.u8(),W.seq(Ie(),W.offset(W.u8(),-1),"authority")])},pw=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function mw(n){const e=n.match(pw);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${n}\``);const[t,r,s,i]=e,o=n.startsWith("https:")?"wss:":"ws:",a=s==null?null:parseInt(s.slice(1),10),c=a==null?"":`:${a+1}`;return`${o}//${r}${c}${i}`}const et=Mi(Jl(pe),oe(),n=>new pe(n)),Yf=Xl([oe(),Ze("base64")]),ru=Mi(Jl(je.Buffer),Yf,n=>je.Buffer.from(n[0],"base64")),gw=30*1e3;function yw(n){if(/^https?:/.test(n)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return n}function ze(n){let e,t;if(typeof n=="string")e=n;else if(n){const{commitment:r,...s}=n;e=r,t=s}return{commitment:e,config:t}}function Ed(n){return n.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function Qf(n){return Gt([se({jsonrpc:Ze("2.0"),id:oe(),result:n}),se({jsonrpc:Ze("2.0"),id:oe(),error:se({code:Ws(),message:oe(),data:ge(Xg())})})])}const ww=Qf(Ws());function Me(n){return Mi(Qf(n),ww,e=>"error"in e?e:{...e,result:ce(e.result,n)})}function st(n){return Me(se({context:se({slot:ee()}),value:n}))}function Fo(n){return se({context:se({slot:ee()}),value:n})}function Ga(n,e){return n===0?new pi({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new pe(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:Pt.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new Zn(e)}const bw=se({foundation:ee(),foundationTerm:ee(),initial:ee(),taper:ee(),terminal:ee()}),xw=Me(le(ue(se({epoch:ee(),effectiveSlot:ee(),amount:ee(),postBalance:ee(),commission:ge(ue(ee()))})))),vw=le(se({slot:ee(),prioritizationFee:ee()})),Sw=se({total:ee(),validator:ee(),foundation:ee(),epoch:ee()}),Ew=se({epoch:ee(),slotIndex:ee(),slotsInEpoch:ee(),absoluteSlot:ee(),blockHeight:ge(ee()),transactionCount:ge(ee())}),Nw=se({slotsPerEpoch:ee(),leaderScheduleSlotOffset:ee(),warmup:Tn(),firstNormalEpoch:ee(),firstNormalSlot:ee()}),Mw=Lf(oe(),le(ee())),ss=ue(Gt([se({}),oe()])),jw=se({err:ss}),Aw=Ze("receivedSignature"),Iw=se({"solana-core":oe(),"feature-set":ge(ee())}),Cw=se({program:oe(),programId:et,parsed:Ws()}),Tw=se({programId:et,accounts:le(et),data:oe()}),Nd=st(se({err:ue(Gt([se({}),oe()])),logs:ue(le(oe())),accounts:ge(ue(le(ue(se({executable:Tn(),owner:oe(),lamports:ee(),data:le(oe()),rentEpoch:ge(ee())}))))),unitsConsumed:ge(ee()),returnData:ge(ue(se({programId:oe(),data:Xl([oe(),Ze("base64")])}))),innerInstructions:ge(ue(le(se({index:ee(),instructions:le(Gt([Cw,Tw]))}))))})),_w=st(se({byIdentity:Lf(oe(),le(ee())),range:se({firstSlot:ee(),lastSlot:ee()})}));function kw(n,e,t,r,s,i){const o=t||uw;let a;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let c;return r&&(c=async(h,p)=>{const x=await new Promise((y,E)=>{try{r(h,p,(g,S)=>y([g,S]))}catch(g){E(g)}});return await o(...x)}),new Ey(async(h,p)=>{const x={method:"POST",body:h,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},kb)};try{let y=5,E,g=500;for(;c?E=await c(n,x):E=await o(n,x),!(E.status!==429||s===!0||(y-=1,y===0));)console.error(`Server responded with ${E.status} ${E.statusText}.  Retrying after ${g}ms delay...`),await ms(g),g*=2;const S=await E.text();E.ok?p(null,S):p(new Error(`${E.status} ${E.statusText}: ${S}`))}catch(y){y instanceof Error&&p(y)}},{})}function Lw(n){return(e,t)=>new Promise((r,s)=>{n.request(e,t,(i,o)=>{if(i){s(i);return}r(o)})})}function Rw(n){return e=>new Promise((t,r)=>{e.length===0&&t([]);const s=e.map(i=>n.request(i.methodName,i.args));n.request(s,(i,o)=>{if(i){r(i);return}t(o)})})}const Bw=Me(bw),Ow=Me(Sw),Dw=Me(vw),Pw=Me(Ew),Fw=Me(Nw),Uw=Me(Mw),zw=Me(ee()),$w=st(se({total:ee(),circulating:ee(),nonCirculating:ee(),nonCirculatingAccounts:le(et)})),al=se({amount:oe(),uiAmount:ue(ee()),decimals:ee(),uiAmountString:ge(oe())}),qw=st(le(se({address:et,amount:oe(),uiAmount:ue(ee()),decimals:ee(),uiAmountString:ge(oe())}))),Ww=st(le(se({pubkey:et,account:se({executable:Tn(),owner:et,lamports:ee(),data:ru,rentEpoch:ee()})}))),cl=se({program:oe(),parsed:Ws(),space:ee()}),Hw=st(le(se({pubkey:et,account:se({executable:Tn(),owner:et,lamports:ee(),data:cl,rentEpoch:ee()})}))),Kw=st(le(se({lamports:ee(),address:et}))),gi=se({executable:Tn(),owner:et,lamports:ee(),data:ru,rentEpoch:ee()}),Vw=se({pubkey:et,account:gi}),Gw=Mi(Gt([Jl(je.Buffer),cl]),Gt([Yf,cl]),n=>Array.isArray(n)?ce(n,ru):n),ll=se({executable:Tn(),owner:et,lamports:ee(),data:Gw,rentEpoch:ee()}),Yw=se({pubkey:et,account:ll}),Qw=se({state:Gt([Ze("active"),Ze("inactive"),Ze("activating"),Ze("deactivating")]),active:ee(),inactive:ee()}),Zw=Me(le(se({signature:oe(),slot:ee(),err:ss,memo:ue(oe()),blockTime:ge(ue(ee()))}))),Jw=Me(le(se({signature:oe(),slot:ee(),err:ss,memo:ue(oe()),blockTime:ge(ue(ee()))}))),Xw=se({subscription:ee(),result:Fo(gi)}),eb=se({pubkey:et,account:gi}),tb=se({subscription:ee(),result:Fo(eb)}),nb=se({parent:ee(),slot:ee(),root:ee()}),rb=se({subscription:ee(),result:nb}),sb=Gt([se({type:Gt([Ze("firstShredReceived"),Ze("completed"),Ze("optimisticConfirmation"),Ze("root")]),slot:ee(),timestamp:ee()}),se({type:Ze("createdBank"),parent:ee(),slot:ee(),timestamp:ee()}),se({type:Ze("frozen"),slot:ee(),timestamp:ee(),stats:se({numTransactionEntries:ee(),numSuccessfulTransactions:ee(),numFailedTransactions:ee(),maxTransactionsPerEntry:ee()})}),se({type:Ze("dead"),slot:ee(),timestamp:ee(),err:oe()})]),ib=se({subscription:ee(),result:sb}),ob=se({subscription:ee(),result:Fo(Gt([jw,Aw]))}),ab=se({subscription:ee(),result:ee()}),cb=se({pubkey:oe(),gossip:ue(oe()),tpu:ue(oe()),rpc:ue(oe()),version:ue(oe())}),Md=se({votePubkey:oe(),nodePubkey:oe(),activatedStake:ee(),epochVoteAccount:Tn(),epochCredits:le(Xl([ee(),ee(),ee()])),commission:ee(),lastVote:ee(),rootSlot:ue(ee())}),lb=Me(se({current:le(Md),delinquent:le(Md)})),ub=Gt([Ze("processed"),Ze("confirmed"),Ze("finalized")]),db=se({slot:ee(),confirmations:ue(ee()),err:ss,confirmationStatus:ge(ub)}),hb=st(le(ue(db))),fb=Me(ee()),Zf=se({accountKey:et,writableIndexes:le(ee()),readonlyIndexes:le(ee())}),su=se({signatures:le(oe()),message:se({accountKeys:le(oe()),header:se({numRequiredSignatures:ee(),numReadonlySignedAccounts:ee(),numReadonlyUnsignedAccounts:ee()}),instructions:le(se({accounts:le(ee()),data:oe(),programIdIndex:ee()})),recentBlockhash:oe(),addressTableLookups:ge(le(Zf))})}),Jf=se({pubkey:et,signer:Tn(),writable:Tn(),source:ge(Gt([Ze("transaction"),Ze("lookupTable")]))}),Xf=se({accountKeys:le(Jf),signatures:le(oe())}),e0=se({parsed:Ws(),program:oe(),programId:et}),t0=se({accounts:le(et),data:oe(),programId:et}),pb=Gt([t0,e0]),mb=Gt([se({parsed:Ws(),program:oe(),programId:oe()}),se({accounts:le(oe()),data:oe(),programId:oe()})]),n0=Mi(pb,mb,n=>"accounts"in n?ce(n,t0):ce(n,e0)),r0=se({signatures:le(oe()),message:se({accountKeys:le(Jf),instructions:le(n0),recentBlockhash:oe(),addressTableLookups:ge(ue(le(Zf)))})}),mo=se({accountIndex:ee(),mint:oe(),owner:ge(oe()),programId:ge(oe()),uiTokenAmount:al}),s0=se({writable:le(et),readonly:le(et)}),Uo=se({err:ss,fee:ee(),innerInstructions:ge(ue(le(se({index:ee(),instructions:le(se({accounts:le(ee()),data:oe(),programIdIndex:ee()}))})))),preBalances:le(ee()),postBalances:le(ee()),logMessages:ge(ue(le(oe()))),preTokenBalances:ge(ue(le(mo))),postTokenBalances:ge(ue(le(mo))),loadedAddresses:ge(s0),computeUnitsConsumed:ge(ee())}),iu=se({err:ss,fee:ee(),innerInstructions:ge(ue(le(se({index:ee(),instructions:le(n0)})))),preBalances:le(ee()),postBalances:le(ee()),logMessages:ge(ue(le(oe()))),preTokenBalances:ge(ue(le(mo))),postTokenBalances:ge(ue(le(mo))),loadedAddresses:ge(s0),computeUnitsConsumed:ge(ee())}),Hs=Gt([Ze(0),Ze("legacy")]),is=se({pubkey:oe(),lamports:ee(),postBalance:ue(ee()),rewardType:ue(oe()),commission:ge(ue(ee()))}),gb=Me(ue(se({blockhash:oe(),previousBlockhash:oe(),parentSlot:ee(),transactions:le(se({transaction:su,meta:ue(Uo),version:ge(Hs)})),rewards:ge(le(is)),blockTime:ue(ee()),blockHeight:ue(ee())}))),yb=Me(ue(se({blockhash:oe(),previousBlockhash:oe(),parentSlot:ee(),rewards:ge(le(is)),blockTime:ue(ee()),blockHeight:ue(ee())}))),wb=Me(ue(se({blockhash:oe(),previousBlockhash:oe(),parentSlot:ee(),transactions:le(se({transaction:Xf,meta:ue(Uo),version:ge(Hs)})),rewards:ge(le(is)),blockTime:ue(ee()),blockHeight:ue(ee())}))),bb=Me(ue(se({blockhash:oe(),previousBlockhash:oe(),parentSlot:ee(),transactions:le(se({transaction:r0,meta:ue(iu),version:ge(Hs)})),rewards:ge(le(is)),blockTime:ue(ee()),blockHeight:ue(ee())}))),xb=Me(ue(se({blockhash:oe(),previousBlockhash:oe(),parentSlot:ee(),transactions:le(se({transaction:Xf,meta:ue(iu),version:ge(Hs)})),rewards:ge(le(is)),blockTime:ue(ee()),blockHeight:ue(ee())}))),vb=Me(ue(se({blockhash:oe(),previousBlockhash:oe(),parentSlot:ee(),rewards:ge(le(is)),blockTime:ue(ee()),blockHeight:ue(ee())}))),Sb=Me(ue(se({blockhash:oe(),previousBlockhash:oe(),parentSlot:ee(),transactions:le(se({transaction:su,meta:ue(Uo)})),rewards:ge(le(is)),blockTime:ue(ee())}))),jd=Me(ue(se({blockhash:oe(),previousBlockhash:oe(),parentSlot:ee(),signatures:le(oe()),blockTime:ue(ee())}))),Ya=Me(ue(se({slot:ee(),meta:ue(Uo),blockTime:ge(ue(ee())),transaction:su,version:ge(Hs)}))),Pi=Me(ue(se({slot:ee(),transaction:r0,meta:ue(iu),blockTime:ge(ue(ee())),version:ge(Hs)}))),Eb=st(se({blockhash:oe(),lastValidBlockHeight:ee()})),Nb=st(Tn()),Mb=se({slot:ee(),numTransactions:ee(),numSlots:ee(),samplePeriodSecs:ee()}),jb=Me(le(Mb)),Ab=st(ue(se({feeCalculator:se({lamportsPerSignature:ee()})}))),Ib=Me(oe()),Cb=Me(oe()),Tb=se({err:ss,logs:le(oe()),signature:oe()}),_b=se({result:Fo(Tb),subscription:ee()}),kb={"solana-client":"js/1.0.0-maintenance"};class Lb{constructor(e,t){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const d={};return async h=>{const{commitment:p,config:x}=ze(h),y=this._buildArgs([],p,void 0,x),E=xd(y);return d[E]=d[E]??(async()=>{try{const g=await this._rpcRequest("getBlockHeight",y),S=ce(g,Me(ee()));if("error"in S)throw new fe(S.error,"failed to get block height information");return S.result}finally{delete d[E]}})(),await d[E]}})();let r,s,i,o,a,c;t&&typeof t=="string"?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,r=t.wsEndpoint,s=t.httpHeaders,i=t.fetch,o=t.fetchMiddleware,a=t.disableRetryOnRateLimit,c=t.httpAgent),this._rpcEndpoint=yw(e),this._rpcWsEndpoint=r||mw(e),this._rpcClient=kw(e,s,i,o,a,c),this._rpcRequest=Lw(this._rpcClient),this._rpcBatchRequest=Rw(this._rpcClient),this._rpcWebSocket=new dw(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:r,config:s}=ze(t),i=this._buildArgs([e.toBase58()],r,void 0,s),o=await this._rpcRequest("getBalance",i),a=ce(o,st(ee()));if("error"in a)throw new fe(a.error,`failed to get balance for ${e.toBase58()}`);return a.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+r)})}async getBlockTime(e){const t=await this._rpcRequest("getBlockTime",[e]),r=ce(t,Me(ue(ee())));if("error"in r)throw new fe(r.error,`failed to get block time for slot ${e}`);return r.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),t=ce(e,Me(ee()));if("error"in t)throw new fe(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),t=ce(e,zw);if("error"in t)throw new fe(t.error,"failed to get first available block");return t.result}async getSupply(e){let t={};typeof e=="string"?t={commitment:e}:e?t={...e,commitment:e&&e.commitment||this.commitment}:t={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[t]),s=ce(r,$w);if("error"in s)throw new fe(s.error,"failed to get supply");return s.result}async getTokenSupply(e,t){const r=this._buildArgs([e.toBase58()],t),s=await this._rpcRequest("getTokenSupply",r),i=ce(s,st(al));if("error"in i)throw new fe(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(e,t){const r=this._buildArgs([e.toBase58()],t),s=await this._rpcRequest("getTokenAccountBalance",r),i=ce(s,st(al));if("error"in i)throw new fe(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(e,t,r){const{commitment:s,config:i}=ze(r);let o=[e.toBase58()];"mint"in t?o.push({mint:t.mint.toBase58()}):o.push({programId:t.programId.toBase58()});const a=this._buildArgs(o,s,"base64",i),c=await this._rpcRequest("getTokenAccountsByOwner",a),d=ce(c,Ww);if("error"in d)throw new fe(d.error,`failed to get token accounts owned by account ${e.toBase58()}`);return d.result}async getParsedTokenAccountsByOwner(e,t,r){let s=[e.toBase58()];"mint"in t?s.push({mint:t.mint.toBase58()}):s.push({programId:t.programId.toBase58()});const i=this._buildArgs(s,r,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),a=ce(o,Hw);if("error"in a)throw new fe(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},r=t.filter||t.commitment?[t]:[],s=await this._rpcRequest("getLargestAccounts",r),i=ce(s,Kw);if("error"in i)throw new fe(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(e,t){const r=this._buildArgs([e.toBase58()],t),s=await this._rpcRequest("getTokenLargestAccounts",r),i=ce(s,qw);if("error"in i)throw new fe(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(e,t){const{commitment:r,config:s}=ze(t),i=this._buildArgs([e.toBase58()],r,"base64",s),o=await this._rpcRequest("getAccountInfo",i),a=ce(o,st(ue(gi)));if("error"in a)throw new fe(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getParsedAccountInfo(e,t){const{commitment:r,config:s}=ze(t),i=this._buildArgs([e.toBase58()],r,"jsonParsed",s),o=await this._rpcRequest("getAccountInfo",i),a=ce(o,st(ue(ll)));if("error"in a)throw new fe(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(r){throw new Error("failed to get info about account "+e.toBase58()+": "+r)}}async getMultipleParsedAccounts(e,t){const{commitment:r,config:s}=ze(t),i=e.map(d=>d.toBase58()),o=this._buildArgs([i],r,"jsonParsed",s),a=await this._rpcRequest("getMultipleAccounts",o),c=ce(a,st(le(ue(ll))));if("error"in c)throw new fe(c.error,`failed to get info for accounts ${i}`);return c.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:r,config:s}=ze(t),i=e.map(d=>d.toBase58()),o=this._buildArgs([i],r,"base64",s),a=await this._rpcRequest("getMultipleAccounts",o),c=ce(a,st(le(ue(gi))));if("error"in c)throw new fe(c.error,`failed to get info for accounts ${i}`);return c.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,r){const{commitment:s,config:i}=ze(t),o=this._buildArgs([e.toBase58()],s,void 0,{...i,epoch:r??(i==null?void 0:i.epoch)}),a=await this._rpcRequest("getStakeActivation",o),c=ce(a,Me(Qw));if("error"in c)throw new fe(c.error,`failed to get Stake Activation ${e.toBase58()}`);return c.result}async getProgramAccounts(e,t){const{commitment:r,config:s}=ze(t),{encoding:i,...o}=s||{},a=this._buildArgs([e.toBase58()],r,i||"base64",{...o,...o.filters?{filters:Ed(o.filters)}:null}),c=await this._rpcRequest("getProgramAccounts",a),d=le(Vw),h=o.withContext===!0?ce(c,st(d)):ce(c,Me(d));if("error"in h)throw new fe(h.error,`failed to get accounts owned by program ${e.toBase58()}`);return h.result}async getParsedProgramAccounts(e,t){const{commitment:r,config:s}=ze(t),i=this._buildArgs([e.toBase58()],r,"jsonParsed",s),o=await this._rpcRequest("getProgramAccounts",i),a=ce(o,Me(le(Yw)));if("error"in a)throw new fe(a.error,`failed to get accounts owned by program ${e.toBase58()}`);return a.result}async confirmTransaction(e,t){var i;let r;if(typeof e=="string")r=e;else{const o=e;if((i=o.abortSignal)!=null&&i.aborted)return Promise.reject(o.abortSignal.reason);r=o.signature}let s;try{s=Pt.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return Ge(s.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:r}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,r)=>{e!=null&&(e.aborted?r(e.reason):e.addEventListener("abort",()=>{r(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let r,s,i=!1;const o=new Promise((c,d)=>{try{r=this.onSignature(t,(p,x)=>{r=void 0;const y={context:x,value:p};c({__type:ir.PROCESSED,response:y})},e);const h=new Promise(p=>{r==null?p():s=this._onSubscriptionStateChange(r,x=>{x==="subscribed"&&p()})});(async()=>{if(await h,i)return;const p=await this.getSignatureStatus(t);if(i||p==null)return;const{context:x,value:y}=p;if(y!=null)if(y!=null&&y.err)d(y.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(y.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(y.confirmationStatus==="processed"||y.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,c({__type:ir.PROCESSED,response:{context:x,value:y}})}})()}catch(h){d(h)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:r,signature:s}}){let i=!1;const o=new Promise(p=>{const x=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let y=await x();if(!i){for(;y<=r;)if(await ms(1e3),i||(y=await x(),i))return;p({__type:ir.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:c}=this.getTransactionConfirmationPromise({commitment:e,signature:s}),d=this.getCancellationPromise(t);let h;try{const p=await Promise.race([d,c,o]);if(p.__type===ir.PROCESSED)h=p.response;else throw new Hf(s)}finally{i=!0,a()}return h}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:r,nonceAccountPubkey:s,nonceValue:i,signature:o}}){let a=!1;const c=new Promise(y=>{let E=i,g=null;const S=async()=>{try{const{context:A,value:k}=await this.getNonceAndContext(s,{commitment:e,minContextSlot:r});return g=A.slot,k==null?void 0:k.nonce}catch{return E}};(async()=>{if(E=await S(),!a)for(;;){if(i!==E){y({__type:ir.NONCE_INVALID,slotInWhichNonceDidAdvance:g});return}if(await ms(2e3),a||(E=await S(),a))return}})()}),{abortConfirmation:d,confirmationPromise:h}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),p=this.getCancellationPromise(t);let x;try{const y=await Promise.race([p,h,c]);if(y.__type===ir.PROCESSED)x=y.response;else{let E;for(;;){const g=await this.getSignatureStatus(o);if(g==null)break;if(g.context.slot<(y.slotInWhichNonceDidAdvance??r)){await ms(400);continue}E=g;break}if(E!=null&&E.value){const g=e||"finalized",{confirmationStatus:S}=E.value;switch(g){case"processed":case"recent":if(S!=="processed"&&S!=="confirmed"&&S!=="finalized")throw new ni(o);break;case"confirmed":case"single":case"singleGossip":if(S!=="confirmed"&&S!=="finalized")throw new ni(o);break;case"finalized":case"max":case"root":if(S!=="finalized")throw new ni(o);break;default:}x={context:E.context,value:{err:E.value.err}}}else throw new ni(o)}}finally{a=!0,d()}return x}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let r;const s=new Promise(c=>{let d=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{d=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>c({__type:ir.TIMED_OUT,timeoutMs:d}),d)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:t});let a;try{const c=await Promise.race([o,s]);if(c.__type===ir.PROCESSED)a=c.response;else throw new Kf(t,c.timeoutMs/1e3)}finally{clearTimeout(r),i()}return a}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),t=ce(e,Me(le(cb)));if("error"in t)throw new fe(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(e){const t=this._buildArgs([],e),r=await this._rpcRequest("getVoteAccounts",t),s=ce(r,lb);if("error"in s)throw new fe(s.error,"failed to get vote accounts");return s.result}async getSlot(e){const{commitment:t,config:r}=ze(e),s=this._buildArgs([],t,void 0,r),i=await this._rpcRequest("getSlot",s),o=ce(i,Me(ee()));if("error"in o)throw new fe(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:t,config:r}=ze(e),s=this._buildArgs([],t,void 0,r),i=await this._rpcRequest("getSlotLeader",s),o=ce(i,Me(oe()));if("error"in o)throw new fe(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,t){const r=[e,t],s=await this._rpcRequest("getSlotLeaders",r),i=ce(s,Me(le(et)));if("error"in i)throw new fe(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(e,t){const{context:r,value:s}=await this.getSignatureStatuses([e],t);Ge(s.length===1);const i=s[0];return{context:r,value:i}}async getSignatureStatuses(e,t){const r=[e];t&&r.push(t);const s=await this._rpcRequest("getSignatureStatuses",r),i=ce(s,hb);if("error"in i)throw new fe(i.error,"failed to get signature status");return i.result}async getTransactionCount(e){const{commitment:t,config:r}=ze(e),s=this._buildArgs([],t,void 0,r),i=await this._rpcRequest("getTransactionCount",s),o=ce(i,Me(ee()));if("error"in o)throw new fe(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),r=await this._rpcRequest("getInflationGovernor",t),s=ce(r,Bw);if("error"in s)throw new fe(s.error,"failed to get inflation");return s.result}async getInflationReward(e,t,r){const{commitment:s,config:i}=ze(r),o=this._buildArgs([e.map(d=>d.toBase58())],s,void 0,{...i,epoch:t??(i==null?void 0:i.epoch)}),a=await this._rpcRequest("getInflationReward",o),c=ce(a,xw);if("error"in c)throw new fe(c.error,"failed to get inflation reward");return c.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),t=ce(e,Ow);if("error"in t)throw new fe(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(e){const{commitment:t,config:r}=ze(e),s=this._buildArgs([],t,void 0,r),i=await this._rpcRequest("getEpochInfo",s),o=ce(i,Pw);if("error"in o)throw new fe(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),t=ce(e,Fw);if("error"in t)throw new fe(t.error,"failed to get epoch schedule");const r=t.result;return new lw(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),t=ce(e,Uw);if("error"in t)throw new fe(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(e,t){const r=this._buildArgs([e],t),s=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=ce(s,fb);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(e){const{context:t,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(e);return{context:t,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const t=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),r=ce(t,jb);if("error"in r)throw new fe(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(e,t){const r=this._buildArgs([e],t),s=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=ce(s,Ab);if("error"in i)throw new fe(i.error,"failed to get fee calculator");const{context:o,value:a}=i.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(e,t){const r=Fs(e.serialize()).toString("base64"),s=this._buildArgs([r],t),i=await this._rpcRequest("getFeeForMessage",s),o=ce(i,st(ue(ee())));if("error"in o)throw new fe(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){var o;const t=(o=e==null?void 0:e.lockedWritableAccounts)==null?void 0:o.map(a=>a.toBase58()),r=t!=null&&t.length?[t]:[],s=await this._rpcRequest("getRecentPrioritizationFees",r),i=ce(s,Dw);if("error"in i)throw new fe(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:r}=ze(e),s=this._buildArgs([],t,void 0,r),i=await this._rpcRequest("getLatestBlockhash",s),o=ce(i,Eb);if("error"in o)throw new fe(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,t){const{commitment:r,config:s}=ze(t),i=this._buildArgs([e],r,void 0,s),o=await this._rpcRequest("isBlockhashValid",i),a=ce(o,Nb);if("error"in a)throw new fe(a.error,"failed to determine if the blockhash `"+e+"`is valid");return a.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),t=ce(e,Me(Iw));if("error"in t)throw new fe(t.error,"failed to get version");return t.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),t=ce(e,Me(oe()));if("error"in t)throw new fe(t.error,"failed to get genesis hash");return t.result}async getBlock(e,t){const{commitment:r,config:s}=ze(t),i=this._buildArgsAtLeastConfirmed([e],r,void 0,s),o=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const a=ce(o,wb);if("error"in a)throw a.error;return a.result}case"none":{const a=ce(o,yb);if("error"in a)throw a.error;return a.result}default:{const a=ce(o,gb);if("error"in a)throw a.error;const{result:c}=a;return c?{...c,transactions:c.transactions.map(({transaction:d,meta:h,version:p})=>({meta:h,transaction:{...d,message:Ga(p,d.message)},version:p}))}:null}}}catch(a){throw new fe(a,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:r,config:s}=ze(t),i=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",s),o=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const a=ce(o,xb);if("error"in a)throw a.error;return a.result}case"none":{const a=ce(o,vb);if("error"in a)throw a.error;return a.result}default:{const a=ce(o,bb);if("error"in a)throw a.error;return a.result}}}catch(a){throw new fe(a,"failed to get block")}}async getBlockProduction(e){let t,r;if(typeof e=="string")r=e;else if(e){const{commitment:a,...c}=e;r=a,t=c}const s=this._buildArgs([],r,"base64",t),i=await this._rpcRequest("getBlockProduction",s),o=ce(i,_w);if("error"in o)throw new fe(o.error,"failed to get block production information");return o.result}async getTransaction(e,t){const{commitment:r,config:s}=ze(t),i=this._buildArgsAtLeastConfirmed([e],r,void 0,s),o=await this._rpcRequest("getTransaction",i),a=ce(o,Ya);if("error"in a)throw new fe(a.error,"failed to get transaction");const c=a.result;return c&&{...c,transaction:{...c.transaction,message:Ga(c.version,c.transaction.message)}}}async getParsedTransaction(e,t){const{commitment:r,config:s}=ze(t),i=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",s),o=await this._rpcRequest("getTransaction",i),a=ce(o,Pi);if("error"in a)throw new fe(a.error,"failed to get transaction");return a.result}async getParsedTransactions(e,t){const{commitment:r,config:s}=ze(t),i=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],r,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(c=>{const d=ce(c,Pi);if("error"in d)throw new fe(d.error,"failed to get transactions");return d.result})}async getTransactions(e,t){const{commitment:r,config:s}=ze(t),i=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],r,void 0,s)}));return(await this._rpcBatchRequest(i)).map(c=>{const d=ce(c,Ya);if("error"in d)throw new fe(d.error,"failed to get transactions");const h=d.result;return h&&{...h,transaction:{...h.transaction,message:Ga(h.version,h.transaction.message)}}})}async getConfirmedBlock(e,t){const r=this._buildArgsAtLeastConfirmed([e],t),s=await this._rpcRequest("getBlock",r),i=ce(s,Sb);if("error"in i)throw new fe(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+e+" not found");const a={...o,transactions:o.transactions.map(({transaction:c,meta:d})=>{const h=new Zn(c.message);return{meta:d,transaction:{...c,message:h}}})};return{...a,transactions:a.transactions.map(({transaction:c,meta:d})=>({meta:d,transaction:bn.populate(c.message,c.signatures)}))}}async getBlocks(e,t,r){const s=this._buildArgsAtLeastConfirmed(t!==void 0?[e,t]:[e],r),i=await this._rpcRequest("getBlocks",s),o=ce(i,Me(le(ee())));if("error"in o)throw new fe(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=ce(s,jd);if("error"in i)throw new fe(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=ce(s,jd);if("error"in i)throw new fe(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,t){const r=this._buildArgsAtLeastConfirmed([e],t),s=await this._rpcRequest("getTransaction",r),i=ce(s,Ya);if("error"in i)throw new fe(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const a=new Zn(o.transaction.message),c=o.transaction.signatures;return{...o,transaction:bn.populate(a,c)}}async getParsedConfirmedTransaction(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),s=await this._rpcRequest("getTransaction",r),i=ce(s,Pi);if("error"in i)throw new fe(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(e,t){const r=e.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],t,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(o=>{const a=ce(o,Pi);if("error"in a)throw new fe(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(e,t,r){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(t--,!(t<=0||t<i));)try{const c=await this.getConfirmedBlockSignatures(t,"finalized");c.signatures.length>0&&(s.until=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}let o=await this.getSlot("finalized");for(;!("before"in s)&&(r++,!(r>o));)try{const c=await this.getConfirmedBlockSignatures(r);c.signatures.length>0&&(s.before=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}return(await this.getConfirmedSignaturesForAddress2(e,s)).map(c=>c.signature)}async getConfirmedSignaturesForAddress2(e,t,r){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),o=ce(i,Zw);if("error"in o)throw new fe(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,t,r){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),i=await this._rpcRequest("getSignaturesForAddress",s),o=ce(i,Jw);if("error"in o)throw new fe(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,t){const{context:r,value:s}=await this.getAccountInfoAndContext(e,t);let i=null;return s!==null&&(i=new Sd({key:e,state:Sd.deserialize(s.data)})),{context:r,value:i}}async getNonceAndContext(e,t){const{context:r,value:s}=await this.getAccountInfoAndContext(e,t);let i=null;return s!==null&&(i=nu.fromAccountData(s.data)),{context:r,value:i}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+r)})}async requestAirdrop(e,t){const r=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),s=ce(r,Ib);if("error"in s)throw new fe(s.error,`airdrop to ${e.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await ms(100);const r=Date.now()-this._blockhashInfo.lastFetch>=gw;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,r=t?t.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(r!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await ms(tw/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:r}=ze(e),s=this._buildArgs([],t,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",s),o=ce(i,st(ee()));if("error"in o)throw new fe(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,t,r){if("message"in e){const g=e.serialize(),S=je.Buffer.from(g).toString("base64");if(Array.isArray(t)||r!==void 0)throw new Error("Invalid arguments");const A=t||{};A.encoding="base64","commitment"in A||(A.commitment=this.commitment),t&&typeof t=="object"&&"innerInstructions"in t&&(A.innerInstructions=t.innerInstructions);const k=[S,A],M=await this._rpcRequest("simulateTransaction",k),O=ce(M,Nd);if("error"in O)throw new Error("failed to simulate transaction: "+O.error.message);return O.result}let s;if(e instanceof bn){let E=e;s=new bn,s.feePayer=E.feePayer,s.instructions=e.instructions,s.nonceInfo=E.nonceInfo,s.signatures=E.signatures}else s=bn.populate(e),s._message=s._json=void 0;if(t!==void 0&&!Array.isArray(t))throw new Error("Invalid arguments");const i=t;if(s.nonceInfo&&i)s.sign(...i);else{let E=this._disableBlockhashCaching;for(;;){const g=await this._blockhashWithExpiryBlockHeight(E);if(s.lastValidBlockHeight=g.lastValidBlockHeight,s.recentBlockhash=g.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const S=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(S)&&!this._blockhashInfo.transactionSignatures.includes(S)){this._blockhashInfo.simulatedSignatures.push(S);break}else E=!0}}const o=s._compile(),a=o.serialize(),d=s._serialize(a).toString("base64"),h={encoding:"base64",commitment:this.commitment};if(r){const E=(Array.isArray(r)?r:o.nonProgramIds()).map(g=>g.toBase58());h.accounts={encoding:"base64",addresses:E}}i&&(h.sigVerify=!0),t&&typeof t=="object"&&"innerInstructions"in t&&(h.innerInstructions=t.innerInstructions);const p=[d,h],x=await this._rpcRequest("simulateTransaction",p),y=ce(x,Nd);if("error"in y){let E;if("data"in y.error&&(E=y.error.data.logs,E&&Array.isArray(E))){const g=`
    `,S=g+E.join(g);console.error(y.error.message,S)}throw new wd({action:"simulate",signature:"",transactionMessage:y.error.message,logs:E})}return y.result}async sendTransaction(e,t,r){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,t)}if(t===void 0||!Array.isArray(t))throw new Error("Invalid arguments");const s=t;if(e.nonceInfo)e.sign(...s);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=a.lastValidBlockHeight,e.recentBlockhash=a.blockhash,e.sign(...s),!e.signature)throw new Error("!signature");const c=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(c))o=!0;else{this._blockhashInfo.transactionSignatures.push(c);break}}}const i=e.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(e,t){const r=Fs(e).toString("base64");return await this.sendEncodedTransaction(r,t)}async sendEncodedTransaction(e,t){const r={encoding:"base64"},s=t&&t.skipPreflight,i=s===!0?"processed":t&&t.preflightCommitment||this.commitment;t&&t.maxRetries!=null&&(r.maxRetries=t.maxRetries),t&&t.minContextSlot!=null&&(r.minContextSlot=t.minContextSlot),s&&(r.skipPreflight=s),i&&(r.preflightCommitment=i);const o=[e,r],a=await this._rpcRequest("sendTransaction",o),c=ce(a,Cb);if("error"in c){let d;throw"data"in c.error&&(d=c.error.data.logs),new wd({action:s?"send":"simulate",signature:"",transactionMessage:c.error.message,logs:d})}return c.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,r])=>{this._setSubscription(t,{...r,state:"pending"})})}_setSubscription(e,t){var s;const r=(s=this._subscriptionsByHash[e])==null?void 0:s.state;if(this._subscriptionsByHash[e]=t,r!==t.state){const i=this._subscriptionStateChangeCallbacksByHash[e];i&&i.forEach(o=>{try{o(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){var i;const r=this._subscriptionHashByClientSubscriptionId[e];if(r==null)return()=>{};const s=(i=this._subscriptionStateChangeCallbacksByHash)[r]||(i[r]=new Set);return s.add(t),()=>{s.delete(t),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const s=this._subscriptionsByHash[r];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[r],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:o}=s;try{this._setSubscription(r,{...s,state:"subscribing"});const a=await this._rpcWebSocket.call(o,i);this._setSubscription(r,{...s,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=s.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:i,error:a}),!t())return;this._setSubscription(r,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:o}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(r,{...s,state:"unsubscribing"}),this._setSubscription(r,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[i])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!t())return;this._setSubscription(r,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,t){const r=this._subscriptionCallbacksByServerSubscriptionId[e];r!==void 0&&r.forEach(s=>{try{s(...t)}catch(i){console.error(i)}})}_wsOnAccountNotification(e){const{result:t,subscription:r}=ce(e,Xw);this._handleServerNotification(r,[t.value,t.context])}_makeSubscription(e,t){const r=this._nextClientSubscriptionId++,s=xd([e.method,t]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:i.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const o=this._subscriptionsByHash[s];Ge(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,t,r){const{commitment:s,config:i}=ze(r),o=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:r}=ce(e,tb);this._handleServerNotification(r,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,r,s){const{commitment:i,config:o}=ze(r),a=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",o||(s?{filters:Ed(s)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,r){const s=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:r}=ce(e,_b);this._handleServerNotification(r,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:r}=ce(e,rb);this._handleServerNotification(r,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:r}=ce(e,ib);this._handleServerNotification(r,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,r,s){const i=t||this._commitment;if(i||r||s){let o={};r&&(o.encoding=r),i&&(o.commitment=i),s&&(o=Object.assign(o,s)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,t,r,s){const i=t||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,r,s)}_wsOnSignatureNotification(e){const{result:t,subscription:r}=ce(e,ob);t.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,t.value==="receivedSignature"?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,r){const s=this._buildArgs([e],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){t(o.result,a);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(e,t,r){const{commitment:s,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([e],s,void 0,i),a=this._makeSubscription({callback:(c,d)=>{t(c,d);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:r}=ce(e,ab);this._handleServerNotification(r,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}Object.freeze({CreateLookupTable:{index:0,layout:W.struct([W.u32("instruction"),Us("recentSlot"),W.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:W.struct([W.u32("instruction")])},ExtendLookupTable:{index:2,layout:W.struct([W.u32("instruction"),Us(),W.seq(Ie(),W.offset(W.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:W.struct([W.u32("instruction")])},CloseLookupTable:{index:4,layout:W.struct([W.u32("instruction")])}});new pe("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:W.struct([W.u8("instruction"),W.u32("units"),W.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:W.struct([W.u8("instruction"),W.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:W.struct([W.u8("instruction"),W.u32("units")])},SetComputeUnitPrice:{index:3,layout:W.struct([W.u8("instruction"),Us("microLamports")])}});new pe("ComputeBudget111111111111111111111111111111");W.struct([W.u8("numSignatures"),W.u8("padding"),W.u16("signatureOffset"),W.u16("signatureInstructionIndex"),W.u16("publicKeyOffset"),W.u16("publicKeyInstructionIndex"),W.u16("messageDataOffset"),W.u16("messageDataSize"),W.u16("messageInstructionIndex")]);new pe("Ed25519SigVerify111111111111111111111111111");zy.utils.isValidPrivateKey;W.struct([W.u8("numSignatures"),W.u16("signatureOffset"),W.u8("signatureInstructionIndex"),W.u16("ethAddressOffset"),W.u8("ethAddressInstructionIndex"),W.u16("messageDataOffset"),W.u16("messageDataSize"),W.u8("messageInstructionIndex"),W.blob(20,"ethAddress"),W.blob(64,"signature"),W.u8("recoveryId")]);new pe("KeccakSecp256k11111111111111111111111111111");var i0;new pe("StakeConfig11111111111111111111111111111111");class o0{constructor(e,t,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=r}}i0=o0;o0.default=new i0(0,0,pe.default);Object.freeze({Initialize:{index:0,layout:W.struct([W.u32("instruction"),Vy(),Gy()])},Authorize:{index:1,layout:W.struct([W.u32("instruction"),Ie("newAuthorized"),W.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:W.struct([W.u32("instruction")])},Split:{index:3,layout:W.struct([W.u32("instruction"),W.ns64("lamports")])},Withdraw:{index:4,layout:W.struct([W.u32("instruction"),W.ns64("lamports")])},Deactivate:{index:5,layout:W.struct([W.u32("instruction")])},Merge:{index:7,layout:W.struct([W.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:W.struct([W.u32("instruction"),Ie("newAuthorized"),W.u32("stakeAuthorizationType"),ys("authoritySeed"),Ie("authorityOwner")])}});new pe("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:W.struct([W.u32("instruction"),Yy()])},Authorize:{index:1,layout:W.struct([W.u32("instruction"),Ie("newAuthorized"),W.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:W.struct([W.u32("instruction"),W.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:W.struct([W.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:W.struct([W.u32("instruction"),Qy()])}});new pe("Vote111111111111111111111111111111111111111");new pe("Va1idator1nfo111111111111111111111111111111");se({name:oe(),website:ge(oe()),details:ge(oe()),iconUrl:ge(oe()),keybaseUsername:ge(oe())});new pe("Vote111111111111111111111111111111111111111");W.struct([Ie("nodePubkey"),Ie("authorizedWithdrawer"),W.u8("commission"),W.nu64(),W.seq(W.struct([W.nu64("slot"),W.u32("confirmationCount")]),W.offset(W.u32(),-8),"votes"),W.u8("rootSlotValid"),W.nu64("rootSlot"),W.nu64(),W.seq(W.struct([W.nu64("epoch"),Ie("authorizedVoter")]),W.offset(W.u32(),-8),"authorizedVoters"),W.struct([W.seq(W.struct([Ie("authorizedPubkey"),W.nu64("epochOfLastAuthorizedSwitch"),W.nu64("targetEpoch")]),32,"buf"),W.nu64("idx"),W.u8("isEmpty")],"priorVoters"),W.nu64(),W.seq(W.struct([W.nu64("epoch"),W.nu64("credits"),W.nu64("prevCredits")]),W.offset(W.u32(),-8),"epochCredits"),W.struct([W.nu64("slot"),W.nu64("timestamp")],"lastTimestamp")]);const Ad={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function Rb(n,e){const t="https";if(!n)return Ad[t].devnet;const r=Ad[t][n];if(!r)throw new Error(`Unknown ${t} cluster: ${n}`);return r}const a0=I.createContext({});function Bb(){return I.useContext(a0)}const Ob=({children:n,endpoint:e,config:t={commitment:"confirmed"}})=>{const r=I.useMemo(()=>new Lb(e,t),[e,t]);return J.createElement(a0.Provider,{value:{connection:r}},n)};class Id extends Tt{constructor(){super(...arguments),this.name="WalletNotSelectedError"}}const Db=[],zo={autoConnect:!1,connecting:!1,connected:!1,disconnecting:!1,select(){mn("call","select")},connect(){return Promise.reject(mn("call","connect"))},disconnect(){return Promise.reject(mn("call","disconnect"))},sendTransaction(){return Promise.reject(mn("call","sendTransaction"))},signTransaction(){return Promise.reject(mn("call","signTransaction"))},signAllTransactions(){return Promise.reject(mn("call","signAllTransactions"))},signMessage(){return Promise.reject(mn("call","signMessage"))},signIn(){return Promise.reject(mn("call","signIn"))}};Object.defineProperty(zo,"wallets",{get(){return mn("read","wallets"),Db}});Object.defineProperty(zo,"wallet",{get(){return mn("read","wallet"),null}});Object.defineProperty(zo,"publicKey",{get(){return mn("read","publicKey"),null}});function mn(n,e){const t=new Error(`You have tried to ${n} "${e}" on a WalletContext without providing one. Make sure to render a WalletProvider as an ancestor of the component that uses WalletContext.`);return console.error(t),t}const c0=I.createContext(zo);function $o(){return I.useContext(c0)}function Pb(n,e){const t=I.useState(()=>{try{const i=localStorage.getItem(n);if(i)return JSON.parse(i)}catch(i){typeof window<"u"&&console.error(i)}return e}),r=t[0],s=I.useRef(!0);return I.useEffect(()=>{if(s.current){s.current=!1;return}try{r===null?localStorage.removeItem(n):localStorage.setItem(n,JSON.stringify(r))}catch(i){typeof window<"u"&&console.error(i)}},[r,n]),t}function Qa(n){switch(n){case"processed":case"confirmed":case"finalized":case void 0:return n;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}const ul="solana:mainnet",l0="solana:devnet",u0="solana:testnet",Fb="solana:localnet",Ub="https://api.mainnet-beta.solana.com";function zb(n){return n.includes(Ub)?ul:/\bdevnet\b/i.test(n)?l0:/\btestnet\b/i.test(n)?u0:/\blocalhost\b/i.test(n)||/\b127\.0\.0\.1\b/.test(n)?Fb:ul}function $b(n){let e=`${n.domain} wants you to sign in with your Solana account:
`;e+=`${n.address}`,n.statement&&(e+=`

${n.statement}`);const t=[];if(n.uri&&t.push(`URI: ${n.uri}`),n.version&&t.push(`Version: ${n.version}`),n.chainId&&t.push(`Chain ID: ${n.chainId}`),n.nonce&&t.push(`Nonce: ${n.nonce}`),n.issuedAt&&t.push(`Issued At: ${n.issuedAt}`),n.expirationTime&&t.push(`Expiration Time: ${n.expirationTime}`),n.notBefore&&t.push(`Not Before: ${n.notBefore}`),n.requestId&&t.push(`Request ID: ${n.requestId}`),n.resources){t.push("Resources:");for(const r of n.resources)t.push(`- ${r}`)}return t.length&&(e+=`

${t.join(`
`)}`),e}const Jn={ERROR_ASSOCIATION_PORT_OUT_OF_RANGE:"ERROR_ASSOCIATION_PORT_OUT_OF_RANGE",ERROR_REFLECTOR_ID_OUT_OF_RANGE:"ERROR_REFLECTOR_ID_OUT_OF_RANGE",ERROR_FORBIDDEN_WALLET_BASE_URL:"ERROR_FORBIDDEN_WALLET_BASE_URL",ERROR_SECURE_CONTEXT_REQUIRED:"ERROR_SECURE_CONTEXT_REQUIRED",ERROR_SESSION_CLOSED:"ERROR_SESSION_CLOSED",ERROR_SESSION_TIMEOUT:"ERROR_SESSION_TIMEOUT",ERROR_WALLET_NOT_FOUND:"ERROR_WALLET_NOT_FOUND",ERROR_INVALID_PROTOCOL_VERSION:"ERROR_INVALID_PROTOCOL_VERSION"};class Xn extends Error{constructor(...e){const[t,r,s]=e;super(r),this.code=t,this.data=s,this.name="SolanaMobileWalletAdapterError"}}class d0 extends Error{constructor(...e){const[t,r,s,i]=e;super(s),this.code=r,this.data=i,this.jsonRpcMessageId=t,this.name="SolanaMobileWalletAdapterProtocolError"}}function Mt(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(h){try{d(r.next(h))}catch(p){o(p)}}function c(h){try{d(r.throw(h))}catch(p){o(p)}}function d(h){h.done?i(h.value):s(h.value).then(a,c)}d((r=r.apply(n,[])).next())})}function Za(n,e){return Mt(this,void 0,void 0,function*(){const t=yield crypto.subtle.exportKey("raw",n),r=yield crypto.subtle.sign({hash:"SHA-256",name:"ECDSA"},e,t),s=new Uint8Array(t.byteLength+r.byteLength);return s.set(new Uint8Array(t),0),s.set(new Uint8Array(r),t.byteLength),s})}function qb(n){return window.btoa(n)}function Wb(n){return $b(n)}function Hb(n){return qb(Wb(n))}const Kb="solana:signTransactions",Cd="solana:cloneAuthorization";function Vb(n,e){return new Proxy({},{get(t,r){return t[r]==null&&(t[r]=function(s){return Mt(this,void 0,void 0,function*(){const{method:i,params:o}=Gb(r,s,n),a=yield e(i,o);return i==="authorize"&&o.sign_in_payload&&!a.sign_in_result&&(a.sign_in_result=yield Qb(o.sign_in_payload,a,e)),Yb(r,a,n)})}),t[r]},defineProperty(){return!1},deleteProperty(){return!1}})}function Gb(n,e,t){let r=e,s=n.toString().replace(/[A-Z]/g,i=>`_${i.toLowerCase()}`).toLowerCase();switch(n){case"authorize":{let{chain:i}=r;if(t==="legacy"){switch(i){case"solana:testnet":{i="testnet";break}case"solana:devnet":{i="devnet";break}case"solana:mainnet":{i="mainnet-beta";break}default:i=r.cluster}r.cluster=i}else{switch(i){case"testnet":case"devnet":{i=`solana:${i}`;break}case"mainnet-beta":{i="solana:mainnet";break}}r.chain=i}}case"reauthorize":{const{auth_token:i,identity:o}=r;if(i)switch(t){case"legacy":{s="reauthorize",r={auth_token:i,identity:o};break}default:{s="authorize";break}}break}}return{method:s,params:r}}function Yb(n,e,t){switch(n){case"getCapabilities":{const r=e;switch(t){case"legacy":{const s=[Kb];return r.supports_clone_authorization===!0&&s.push(Cd),Object.assign(Object.assign({},r),{features:s})}case"v1":return Object.assign(Object.assign({},r),{supports_sign_and_send_transactions:!0,supports_clone_authorization:r.features.includes(Cd)})}}}return e}function Qb(n,e,t){var r;return Mt(this,void 0,void 0,function*(){const s=(r=n.domain)!==null&&r!==void 0?r:window.location.host,i=e.accounts[0].address,o=Hb(Object.assign(Object.assign({},n),{domain:s,address:i})),a=yield t("sign_messages",{addresses:[i],payloads:[o]});return{address:i,signed_message:o,signature:a.signed_payloads[0].slice(o.length)}})}const Or=4;function Zb(n){if(n>=4294967296)throw new Error("Outbound sequence number overflow. The maximum sequence number is 32-bytes.");const e=new ArrayBuffer(Or);return new DataView(e).setUint32(0,n,!1),new Uint8Array(e)}const dl=12,h0=65;function Jb(n,e,t){return Mt(this,void 0,void 0,function*(){const r=Zb(e),s=new Uint8Array(dl);crypto.getRandomValues(s);const i=yield crypto.subtle.encrypt(p0(r,s),t,new TextEncoder().encode(n)),o=new Uint8Array(r.byteLength+s.byteLength+i.byteLength);return o.set(new Uint8Array(r),0),o.set(new Uint8Array(s),r.byteLength),o.set(new Uint8Array(i),r.byteLength+s.byteLength),o})}function f0(n,e){return Mt(this,void 0,void 0,function*(){const t=n.slice(0,Or),r=n.slice(Or,Or+dl),s=n.slice(Or+dl),i=yield crypto.subtle.decrypt(p0(t,r),e,s);return Xb().decode(i)})}function p0(n,e){return{additionalData:n,iv:e,name:"AES-GCM",tagLength:128}}let Ja;function Xb(){return Ja===void 0&&(Ja=new TextDecoder("utf-8")),Ja}function ex(){return Mt(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"])})}function Xa(){return Mt(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!1,["deriveKey","deriveBits"])})}function tx(n,e){return Mt(this,void 0,void 0,function*(){const t=JSON.stringify(n),r=n.id;return Jb(t,r,e)})}function nx(n,e){return Mt(this,void 0,void 0,function*(){const t=yield f0(n,e),r=JSON.parse(t);if(Object.hasOwnProperty.call(r,"error"))throw new d0(r.id,r.error.code,r.error.message);return r})}function rx(n,e,t){return Mt(this,void 0,void 0,function*(){const[r,s]=yield Promise.all([crypto.subtle.exportKey("raw",e),crypto.subtle.importKey("raw",n.slice(0,h0),{name:"ECDH",namedCurve:"P-256"},!1,[])]),i=yield crypto.subtle.deriveBits({name:"ECDH",public:s},t,256),o=yield crypto.subtle.importKey("raw",i,"HKDF",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array(r),info:new Uint8Array},o,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"])})}function sx(n,e){return Mt(this,void 0,void 0,function*(){const t=yield f0(n,e),r=JSON.parse(t);let s="legacy";if(Object.hasOwnProperty.call(r,"v"))switch(r.v){case 1:case"1":case"v1":s="v1";break;case"legacy":s="legacy";break;default:throw new Xn(Jn.ERROR_INVALID_PROTOCOL_VERSION,`Unknown/unsupported protocol version: ${r.v}`)}return{protocol_version:s}})}function ix(){return m0(49152+Math.floor(Math.random()*16384))}function m0(n){if(n<49152||n>65535)throw new Xn(Jn.ERROR_ASSOCIATION_PORT_OUT_OF_RANGE,`Association port number must be between 49152 and 65535. ${n} given.`,{port:n});return n}function ox(n){let e="";const t=new Uint8Array(n),r=t.byteLength;for(let s=0;s<r;s++)e+=String.fromCharCode(t[s]);return window.btoa(e)}function ax(n){return n.replace(/[/+=]/g,e=>({"/":"_","+":"-","=":"."})[e])}const cx="solana-wallet";function Td(n){return n.replace(/(^\/+|\/+$)/g,"").split("/")}function lx(n,e){let t=null;if(e){try{t=new URL(e)}catch{}if((t==null?void 0:t.protocol)!=="https:")throw new Xn(Jn.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}t||(t=new URL(`${cx}:/`));const r=n.startsWith("/")?n:[...Td(t.pathname),...Td(n)].join("/");return new URL(r,t)}function ux(n,e,t,r=["v1"]){return Mt(this,void 0,void 0,function*(){const s=m0(e),i=yield crypto.subtle.exportKey("raw",n),o=ox(i),a=lx("v1/associate/local",t);return a.searchParams.set("association",ax(o)),a.searchParams.set("port",`${s}`),r.forEach(c=>{a.searchParams.set("v",c)}),a})}const go={Firefox:0,Other:1};function dx(){return navigator.userAgent.indexOf("Firefox/")!==-1?go.Firefox:go.Other}function hx(){return new Promise((n,e)=>{function t(){clearTimeout(s),window.removeEventListener("blur",r)}function r(){t(),n()}window.addEventListener("blur",r);const s=setTimeout(()=>{t(),e()},2e3)})}let Qs=null;function fx(n){Qs==null&&(Qs=document.createElement("iframe"),Qs.style.display="none",document.body.appendChild(Qs)),Qs.contentWindow.location.href=n.toString()}function px(n){return Mt(this,void 0,void 0,function*(){if(n.protocol==="https:")window.location.assign(n);else try{const e=dx();switch(e){case go.Firefox:fx(n);break;case go.Other:{const t=hx();window.location.assign(n),yield t;break}default:}}catch{throw new Xn(Jn.ERROR_WALLET_NOT_FOUND,"Found no installed wallet that supports the mobile wallet protocol.")}})}function mx(n,e){return Mt(this,void 0,void 0,function*(){const t=ix(),r=yield ux(n,t,e);return yield px(r),t})}const _d={retryDelayScheduleMs:[150,150,200,500,500,750,750,1e3],timeoutMs:3e4},gx="com.solana.mobilewalletadapter.v1";function yx(){if(typeof window>"u"||window.isSecureContext!==!0)throw new Xn(Jn.ERROR_SECURE_CONTEXT_REQUIRED,"The mobile wallet adapter protocol must be used in a secure context (`https`).")}function wx(n){let e;try{e=new URL(n)}catch{throw new Xn(Jn.ERROR_FORBIDDEN_WALLET_BASE_URL,"Invalid base URL supplied by wallet")}if(e.protocol!=="https:")throw new Xn(Jn.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}function kd(n){return new DataView(n).getUint32(0,!1)}function bx(n,e){return Mt(this,void 0,void 0,function*(){yx();const t=yield ex(),s=`ws://localhost:${yield mx(t.publicKey,e==null?void 0:e.baseUri)}/solana-wallet`;let i;const o=(()=>{const h=[..._d.retryDelayScheduleMs];return()=>h.length>1?h.shift():h[0]})();let a=1,c=0,d={__type:"disconnected"};return new Promise((h,p)=>{let x;const y={},E=()=>Mt(this,void 0,void 0,function*(){if(d.__type!=="connecting"){console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${d.__type}\`.`);return}x.removeEventListener("open",E);const{associationKeypair:B}=d,z=yield Xa();x.send(yield Za(z.publicKey,B.privateKey)),d={__type:"hello_req_sent",associationPublicKey:B.publicKey,ecdhPrivateKey:z.privateKey}}),g=B=>{B.wasClean?d={__type:"disconnected"}:p(new Xn(Jn.ERROR_SESSION_CLOSED,`The wallet session dropped unexpectedly (${B.code}: ${B.reason}).`,{closeEvent:B})),k()},S=B=>Mt(this,void 0,void 0,function*(){k(),Date.now()-i>=_d.timeoutMs?p(new Xn(Jn.ERROR_SESSION_TIMEOUT,`Failed to connect to the wallet websocket at ${s}.`)):(yield new Promise(z=>{const V=o();M=window.setTimeout(z,V)}),O())}),A=B=>Mt(this,void 0,void 0,function*(){const z=yield B.data.arrayBuffer();switch(d.__type){case"connecting":if(z.byteLength!==0)throw new Error("Encountered unexpected message while connecting");const V=yield Xa();x.send(yield Za(V.publicKey,t.privateKey)),d={__type:"hello_req_sent",associationPublicKey:t.publicKey,ecdhPrivateKey:V.privateKey};break;case"connected":try{const H=z.slice(0,Or),F=kd(H);if(F!==c+1)throw new Error("Encrypted message has invalid sequence number");c=F;const $=yield nx(z,d.sharedSecret),q=y[$.id];delete y[$.id],q.resolve($.result)}catch(H){if(H instanceof d0){const F=y[H.jsonRpcMessageId];delete y[H.jsonRpcMessageId],F.reject(H)}else throw H}break;case"hello_req_sent":{if(z.byteLength===0){const Y=yield Xa();x.send(yield Za(Y.publicKey,t.privateKey)),d={__type:"hello_req_sent",associationPublicKey:t.publicKey,ecdhPrivateKey:Y.privateKey};break}const H=yield rx(z,d.associationPublicKey,d.ecdhPrivateKey),F=z.slice(h0),$=F.byteLength!==0?yield Mt(this,void 0,void 0,function*(){const Y=F.slice(0,Or),_=kd(Y);if(_!==c+1)throw new Error("Encrypted message has invalid sequence number");return c=_,sx(F,H)}):{protocol_version:"legacy"};d={__type:"connected",sharedSecret:H,sessionProperties:$};const q=Vb($.protocol_version,(Y,_)=>Mt(this,void 0,void 0,function*(){const u=a++;return x.send(yield tx({id:u,jsonrpc:"2.0",method:Y,params:_??{}},H)),new Promise((b,N)=>{y[u]={resolve(j){switch(Y){case"authorize":case"reauthorize":{const{wallet_uri_base:R}=j;if(R!=null)try{wx(R)}catch(U){N(U);return}break}}b(j)},reject:N}})}));try{h(yield n(q))}catch(Y){p(Y)}finally{k(),x.close()}break}}});let k,M;const O=()=>{k&&k(),d={__type:"connecting",associationKeypair:t},i===void 0&&(i=Date.now()),x=new WebSocket(s,[gx]),x.addEventListener("open",E),x.addEventListener("close",g),x.addEventListener("error",S),x.addEventListener("message",A),k=()=>{window.clearTimeout(M),x.removeEventListener("open",E),x.removeEventListener("close",g),x.removeEventListener("error",S),x.removeEventListener("message",A)}};O()})})}var ec,Ld;function xx(){if(Ld)return ec;Ld=1;function n(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var s=0;s<e.length;s++){var i=e.charAt(s),o=i.charCodeAt(0);if(t[o]!==255)throw new TypeError(i+" is ambiguous");t[o]=s}var a=e.length,c=e.charAt(0),d=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function p(E){if(E instanceof Uint8Array||(ArrayBuffer.isView(E)?E=new Uint8Array(E.buffer,E.byteOffset,E.byteLength):Array.isArray(E)&&(E=Uint8Array.from(E))),!(E instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(E.length===0)return"";for(var g=0,S=0,A=0,k=E.length;A!==k&&E[A]===0;)A++,g++;for(var M=(k-A)*h+1>>>0,O=new Uint8Array(M);A!==k;){for(var B=E[A],z=0,V=M-1;(B!==0||z<S)&&V!==-1;V--,z++)B+=256*O[V]>>>0,O[V]=B%a>>>0,B=B/a>>>0;if(B!==0)throw new Error("Non-zero carry");S=z,A++}for(var H=M-S;H!==M&&O[H]===0;)H++;for(var F=c.repeat(g);H<M;++H)F+=e.charAt(O[H]);return F}function x(E){if(typeof E!="string")throw new TypeError("Expected String");if(E.length===0)return new Uint8Array;for(var g=0,S=0,A=0;E[g]===c;)S++,g++;for(var k=(E.length-g)*d+1>>>0,M=new Uint8Array(k);E[g];){var O=t[E.charCodeAt(g)];if(O===255)return;for(var B=0,z=k-1;(O!==0||B<A)&&z!==-1;z--,B++)O+=a*M[z]>>>0,M[z]=O%256>>>0,O=O/256>>>0;if(O!==0)throw new Error("Non-zero carry");A=B,g++}for(var V=k-A;V!==k&&M[V]===0;)V++;for(var H=new Uint8Array(S+(k-V)),F=S;V!==k;)H[F++]=M[V++];return H}function y(E){var g=x(E);if(g)return g;throw new Error("Non-base"+a+" character")}return{encode:p,decodeUnsafe:x,decode:y}}return ec=n,ec}var tc,Rd;function vx(){return Rd||(Rd=1,tc=xx()("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")),tc}var Sx=vx();const Ex=jr(Sx);function nc(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function Fi(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(h){try{d(r.next(h))}catch(p){o(p)}}function c(h){try{d(r.throw(h))}catch(p){o(p)}}function d(h){h.done?i(h.value):s(h.value).then(a,c)}d((r=r.apply(n,[])).next())})}function g0(n){return window.btoa(String.fromCharCode.call(null,...n))}function rc(n){return new Uint8Array(window.atob(n).split("").map(e=>e.charCodeAt(0)))}function Bd(n){const e="version"in n?n.serialize():n.serialize({requireAllSignatures:!1,verifySignatures:!1});return g0(e)}function Nx(n){const t=n[0]*fi+1;return tu.deserializeMessageVersion(n.slice(t,n.length))==="legacy"?bn.from(n):mi.deserialize(n)}function Mx(n,e){return Fi(this,void 0,void 0,function*(){return yield bx(r=>{const s=new Proxy({},{get(i,o){if(i[o]==null)switch(o){case"signAndSendTransactions":i[o]=function(a){var{minContextSlot:c,commitment:d,skipPreflight:h,maxRetries:p,waitForCommitmentToSendNextTransaction:x,transactions:y}=a,E=nc(a,["minContextSlot","commitment","skipPreflight","maxRetries","waitForCommitmentToSendNextTransaction","transactions"]);return Fi(this,void 0,void 0,function*(){const g=y.map(Bd),S={min_context_slot:c,commitment:d,skip_preflight:h,max_retries:p,wait_for_commitment_to_send_next_transaction:x},{signatures:A}=yield r.signAndSendTransactions(Object.assign(Object.assign(Object.assign({},E),Object.values(S).some(M=>M!=null)?{options:S}:null),{payloads:g}));return A.map(rc).map(Ex.encode)})};break;case"signMessages":i[o]=function(a){var{payloads:c}=a,d=nc(a,["payloads"]);return Fi(this,void 0,void 0,function*(){const h=c.map(g0),{signed_payloads:p}=yield r.signMessages(Object.assign(Object.assign({},d),{payloads:h}));return p.map(rc)})};break;case"signTransactions":i[o]=function(a){var{transactions:c}=a,d=nc(a,["transactions"]);return Fi(this,void 0,void 0,function*(){const h=c.map(Bd),{signed_payloads:p}=yield r.signTransactions(Object.assign(Object.assign({},d),{payloads:h}));return p.map(rc).map(Nx)})};break;default:{i[o]=r[o];break}}return i[o]},defineProperty(){return!1},deleteProperty(){return!1}});return n(s)},e)})}var fs={},sc,Od;function jx(){return Od||(Od=1,sc=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),sc}var ic={},or={},Dd;function os(){if(Dd)return or;Dd=1;let n;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return or.getSymbolSize=function(r){if(!r)throw new Error('"version" cannot be null or undefined');if(r<1||r>40)throw new Error('"version" should be in range from 1 to 40');return r*4+17},or.getSymbolTotalCodewords=function(r){return e[r]},or.getBCHDigit=function(t){let r=0;for(;t!==0;)r++,t>>>=1;return r},or.setToSJISFunction=function(r){if(typeof r!="function")throw new Error('"toSJISFunc" is not a valid function.');n=r},or.isKanjiModeEnabled=function(){return typeof n<"u"},or.toSJIS=function(r){return n(r)},or}var oc={},Pd;function ou(){return Pd||(Pd=1,function(n){n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+t)}}n.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},n.from=function(r,s){if(n.isValid(r))return r;try{return e(r)}catch{return s}}}(oc)),oc}var ac,Fd;function Ax(){if(Fd)return ac;Fd=1;function n(){this.buffer=[],this.length=0}return n.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let r=0;r<t;r++)this.putBit((e>>>t-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},ac=n,ac}var cc,Ud;function Ix(){if(Ud)return cc;Ud=1;function n(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return n.prototype.set=function(e,t,r,s){const i=e*this.size+t;this.data[i]=r,s&&(this.reservedBit[i]=!0)},n.prototype.get=function(e,t){return this.data[e*this.size+t]},n.prototype.xor=function(e,t,r){this.data[e*this.size+t]^=r},n.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},cc=n,cc}var lc={},zd;function Cx(){return zd||(zd=1,function(n){const e=os().getSymbolSize;n.getRowColCoords=function(r){if(r===1)return[];const s=Math.floor(r/7)+2,i=e(r),o=i===145?26:Math.ceil((i-13)/(2*s-2))*2,a=[i-7];for(let c=1;c<s-1;c++)a[c]=a[c-1]-o;return a.push(6),a.reverse()},n.getPositions=function(r){const s=[],i=n.getRowColCoords(r),o=i.length;for(let a=0;a<o;a++)for(let c=0;c<o;c++)a===0&&c===0||a===0&&c===o-1||a===o-1&&c===0||s.push([i[a],i[c]]);return s}}(lc)),lc}var uc={},$d;function Tx(){if($d)return uc;$d=1;const n=os().getSymbolSize,e=7;return uc.getPositions=function(r){const s=n(r);return[[0,0],[s-e,0],[0,s-e]]},uc}var dc={},qd;function _x(){return qd||(qd=1,function(n){n.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};n.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},n.from=function(s){return n.isValid(s)?parseInt(s,10):void 0},n.getPenaltyN1=function(s){const i=s.size;let o=0,a=0,c=0,d=null,h=null;for(let p=0;p<i;p++){a=c=0,d=h=null;for(let x=0;x<i;x++){let y=s.get(p,x);y===d?a++:(a>=5&&(o+=e.N1+(a-5)),d=y,a=1),y=s.get(x,p),y===h?c++:(c>=5&&(o+=e.N1+(c-5)),h=y,c=1)}a>=5&&(o+=e.N1+(a-5)),c>=5&&(o+=e.N1+(c-5))}return o},n.getPenaltyN2=function(s){const i=s.size;let o=0;for(let a=0;a<i-1;a++)for(let c=0;c<i-1;c++){const d=s.get(a,c)+s.get(a,c+1)+s.get(a+1,c)+s.get(a+1,c+1);(d===4||d===0)&&o++}return o*e.N2},n.getPenaltyN3=function(s){const i=s.size;let o=0,a=0,c=0;for(let d=0;d<i;d++){a=c=0;for(let h=0;h<i;h++)a=a<<1&2047|s.get(d,h),h>=10&&(a===1488||a===93)&&o++,c=c<<1&2047|s.get(h,d),h>=10&&(c===1488||c===93)&&o++}return o*e.N3},n.getPenaltyN4=function(s){let i=0;const o=s.data.length;for(let c=0;c<o;c++)i+=s.data[c];return Math.abs(Math.ceil(i*100/o/5)-10)*e.N4};function t(r,s,i){switch(r){case n.Patterns.PATTERN000:return(s+i)%2===0;case n.Patterns.PATTERN001:return s%2===0;case n.Patterns.PATTERN010:return i%3===0;case n.Patterns.PATTERN011:return(s+i)%3===0;case n.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(i/3))%2===0;case n.Patterns.PATTERN101:return s*i%2+s*i%3===0;case n.Patterns.PATTERN110:return(s*i%2+s*i%3)%2===0;case n.Patterns.PATTERN111:return(s*i%3+(s+i)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}n.applyMask=function(s,i){const o=i.size;for(let a=0;a<o;a++)for(let c=0;c<o;c++)i.isReserved(c,a)||i.xor(c,a,t(s,c,a))},n.getBestMask=function(s,i){const o=Object.keys(n.Patterns).length;let a=0,c=1/0;for(let d=0;d<o;d++){i(d),n.applyMask(d,s);const h=n.getPenaltyN1(s)+n.getPenaltyN2(s)+n.getPenaltyN3(s)+n.getPenaltyN4(s);n.applyMask(d,s),h<c&&(c=h,a=d)}return a}}(dc)),dc}var Ui={},Wd;function y0(){if(Wd)return Ui;Wd=1;const n=ou(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],t=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Ui.getBlocksCount=function(s,i){switch(i){case n.L:return e[(s-1)*4+0];case n.M:return e[(s-1)*4+1];case n.Q:return e[(s-1)*4+2];case n.H:return e[(s-1)*4+3];default:return}},Ui.getTotalCodewordsCount=function(s,i){switch(i){case n.L:return t[(s-1)*4+0];case n.M:return t[(s-1)*4+1];case n.Q:return t[(s-1)*4+2];case n.H:return t[(s-1)*4+3];default:return}},Ui}var hc={},Zs={},Hd;function kx(){if(Hd)return Zs;Hd=1;const n=new Uint8Array(512),e=new Uint8Array(256);return function(){let r=1;for(let s=0;s<255;s++)n[s]=r,e[r]=s,r<<=1,r&256&&(r^=285);for(let s=255;s<512;s++)n[s]=n[s-255]}(),Zs.log=function(r){if(r<1)throw new Error("log("+r+")");return e[r]},Zs.exp=function(r){return n[r]},Zs.mul=function(r,s){return r===0||s===0?0:n[e[r]+e[s]]},Zs}var Kd;function Lx(){return Kd||(Kd=1,function(n){const e=kx();n.mul=function(r,s){const i=new Uint8Array(r.length+s.length-1);for(let o=0;o<r.length;o++)for(let a=0;a<s.length;a++)i[o+a]^=e.mul(r[o],s[a]);return i},n.mod=function(r,s){let i=new Uint8Array(r);for(;i.length-s.length>=0;){const o=i[0];for(let c=0;c<s.length;c++)i[c]^=e.mul(s[c],o);let a=0;for(;a<i.length&&i[a]===0;)a++;i=i.slice(a)}return i},n.generateECPolynomial=function(r){let s=new Uint8Array([1]);for(let i=0;i<r;i++)s=n.mul(s,new Uint8Array([1,e.exp(i)]));return s}}(hc)),hc}var fc,Vd;function Rx(){if(Vd)return fc;Vd=1;const n=Lx();function e(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(r){this.degree=r,this.genPoly=n.generateECPolynomial(this.degree)},e.prototype.encode=function(r){if(!this.genPoly)throw new Error("Encoder not initialized");const s=new Uint8Array(r.length+this.degree);s.set(r);const i=n.mod(s,this.genPoly),o=this.degree-i.length;if(o>0){const a=new Uint8Array(this.degree);return a.set(i,o),a}return i},fc=e,fc}var pc={},mc={},gc={},Gd;function w0(){return Gd||(Gd=1,gc.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),gc}var Nn={},Yd;function b0(){if(Yd)return Nn;Yd=1;const n="[0-9]+",e="[A-Z $%*+\\-./:]+";let t="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";t=t.replace(/u/g,"\\u");const r="(?:(?![A-Z0-9 $%*+\\-./:]|"+t+`)(?:.|[\r
]))+`;Nn.KANJI=new RegExp(t,"g"),Nn.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Nn.BYTE=new RegExp(r,"g"),Nn.NUMERIC=new RegExp(n,"g"),Nn.ALPHANUMERIC=new RegExp(e,"g");const s=new RegExp("^"+t+"$"),i=new RegExp("^"+n+"$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Nn.testKanji=function(c){return s.test(c)},Nn.testNumeric=function(c){return i.test(c)},Nn.testAlphanumeric=function(c){return o.test(c)},Nn}var Qd;function as(){return Qd||(Qd=1,function(n){const e=w0(),t=b0();n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(i,o){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?i.ccBits[0]:o<27?i.ccBits[1]:i.ccBits[2]},n.getBestModeForData=function(i){return t.testNumeric(i)?n.NUMERIC:t.testAlphanumeric(i)?n.ALPHANUMERIC:t.testKanji(i)?n.KANJI:n.BYTE},n.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},n.isValid=function(i){return i&&i.bit&&i.ccBits};function r(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+s)}}n.from=function(i,o){if(n.isValid(i))return i;try{return r(i)}catch{return o}}}(mc)),mc}var Zd;function Bx(){return Zd||(Zd=1,function(n){const e=os(),t=y0(),r=ou(),s=as(),i=w0(),o=7973,a=e.getBCHDigit(o);function c(x,y,E){for(let g=1;g<=40;g++)if(y<=n.getCapacity(g,E,x))return g}function d(x,y){return s.getCharCountIndicator(x,y)+4}function h(x,y){let E=0;return x.forEach(function(g){const S=d(g.mode,y);E+=S+g.getBitsLength()}),E}function p(x,y){for(let E=1;E<=40;E++)if(h(x,E)<=n.getCapacity(E,y,s.MIXED))return E}n.from=function(y,E){return i.isValid(y)?parseInt(y,10):E},n.getCapacity=function(y,E,g){if(!i.isValid(y))throw new Error("Invalid QR Code version");typeof g>"u"&&(g=s.BYTE);const S=e.getSymbolTotalCodewords(y),A=t.getTotalCodewordsCount(y,E),k=(S-A)*8;if(g===s.MIXED)return k;const M=k-d(g,y);switch(g){case s.NUMERIC:return Math.floor(M/10*3);case s.ALPHANUMERIC:return Math.floor(M/11*2);case s.KANJI:return Math.floor(M/13);case s.BYTE:default:return Math.floor(M/8)}},n.getBestVersionForData=function(y,E){let g;const S=r.from(E,r.M);if(Array.isArray(y)){if(y.length>1)return p(y,S);if(y.length===0)return 1;g=y[0]}else g=y;return c(g.mode,g.getLength(),S)},n.getEncodedBits=function(y){if(!i.isValid(y)||y<7)throw new Error("Invalid QR Code version");let E=y<<12;for(;e.getBCHDigit(E)-a>=0;)E^=o<<e.getBCHDigit(E)-a;return y<<12|E}}(pc)),pc}var yc={},Jd;function Ox(){if(Jd)return yc;Jd=1;const n=os(),e=1335,t=21522,r=n.getBCHDigit(e);return yc.getEncodedBits=function(i,o){const a=i.bit<<3|o;let c=a<<10;for(;n.getBCHDigit(c)-r>=0;)c^=e<<n.getBCHDigit(c)-r;return(a<<10|c)^t},yc}var wc={},bc,Xd;function Dx(){if(Xd)return bc;Xd=1;const n=as();function e(t){this.mode=n.NUMERIC,this.data=t.toString()}return e.getBitsLength=function(r){return 10*Math.floor(r/3)+(r%3?r%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(r){let s,i,o;for(s=0;s+3<=this.data.length;s+=3)i=this.data.substr(s,3),o=parseInt(i,10),r.put(o,10);const a=this.data.length-s;a>0&&(i=this.data.substr(s),o=parseInt(i,10),r.put(o,a*3+1))},bc=e,bc}var xc,eh;function Px(){if(eh)return xc;eh=1;const n=as(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function t(r){this.mode=n.ALPHANUMERIC,this.data=r}return t.getBitsLength=function(s){return 11*Math.floor(s/2)+6*(s%2)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(s){let i;for(i=0;i+2<=this.data.length;i+=2){let o=e.indexOf(this.data[i])*45;o+=e.indexOf(this.data[i+1]),s.put(o,11)}this.data.length%2&&s.put(e.indexOf(this.data[i]),6)},xc=t,xc}var vc,th;function Fx(){if(th)return vc;th=1;const n=as();function e(t){this.mode=n.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}return e.getBitsLength=function(r){return r*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(t){for(let r=0,s=this.data.length;r<s;r++)t.put(this.data[r],8)},vc=e,vc}var Sc,nh;function Ux(){if(nh)return Sc;nh=1;const n=as(),e=os();function t(r){this.mode=n.KANJI,this.data=r}return t.getBitsLength=function(s){return s*13},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(r){let s;for(s=0;s<this.data.length;s++){let i=e.toSJIS(this.data[s]);if(i>=33088&&i<=40956)i-=33088;else if(i>=57408&&i<=60351)i-=49472;else throw new Error("Invalid SJIS character: "+this.data[s]+`
Make sure your charset is UTF-8`);i=(i>>>8&255)*192+(i&255),r.put(i,13)}},Sc=t,Sc}var Ec={exports:{}},rh;function zx(){return rh||(rh=1,function(n){var e={single_source_shortest_paths:function(t,r,s){var i={},o={};o[r]=0;var a=e.PriorityQueue.make();a.push(r,0);for(var c,d,h,p,x,y,E,g,S;!a.empty();){c=a.pop(),d=c.value,p=c.cost,x=t[d]||{};for(h in x)x.hasOwnProperty(h)&&(y=x[h],E=p+y,g=o[h],S=typeof o[h]>"u",(S||g>E)&&(o[h]=E,a.push(h,E),i[h]=d))}if(typeof s<"u"&&typeof o[s]>"u"){var A=["Could not find a path from ",r," to ",s,"."].join("");throw new Error(A)}return i},extract_shortest_path_from_predecessor_list:function(t,r){for(var s=[],i=r;i;)s.push(i),t[i],i=t[i];return s.reverse(),s},find_path:function(t,r,s){var i=e.single_source_shortest_paths(t,r,s);return e.extract_shortest_path_from_predecessor_list(i,s)},PriorityQueue:{make:function(t){var r=e.PriorityQueue,s={},i;t=t||{};for(i in r)r.hasOwnProperty(i)&&(s[i]=r[i]);return s.queue=[],s.sorter=t.sorter||r.default_sorter,s},default_sorter:function(t,r){return t.cost-r.cost},push:function(t,r){var s={value:t,cost:r};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};n.exports=e}(Ec)),Ec.exports}var sh;function $x(){return sh||(sh=1,function(n){const e=as(),t=Dx(),r=Px(),s=Fx(),i=Ux(),o=b0(),a=os(),c=zx();function d(A){return unescape(encodeURIComponent(A)).length}function h(A,k,M){const O=[];let B;for(;(B=A.exec(M))!==null;)O.push({data:B[0],index:B.index,mode:k,length:B[0].length});return O}function p(A){const k=h(o.NUMERIC,e.NUMERIC,A),M=h(o.ALPHANUMERIC,e.ALPHANUMERIC,A);let O,B;return a.isKanjiModeEnabled()?(O=h(o.BYTE,e.BYTE,A),B=h(o.KANJI,e.KANJI,A)):(O=h(o.BYTE_KANJI,e.BYTE,A),B=[]),k.concat(M,O,B).sort(function(V,H){return V.index-H.index}).map(function(V){return{data:V.data,mode:V.mode,length:V.length}})}function x(A,k){switch(k){case e.NUMERIC:return t.getBitsLength(A);case e.ALPHANUMERIC:return r.getBitsLength(A);case e.KANJI:return i.getBitsLength(A);case e.BYTE:return s.getBitsLength(A)}}function y(A){return A.reduce(function(k,M){const O=k.length-1>=0?k[k.length-1]:null;return O&&O.mode===M.mode?(k[k.length-1].data+=M.data,k):(k.push(M),k)},[])}function E(A){const k=[];for(let M=0;M<A.length;M++){const O=A[M];switch(O.mode){case e.NUMERIC:k.push([O,{data:O.data,mode:e.ALPHANUMERIC,length:O.length},{data:O.data,mode:e.BYTE,length:O.length}]);break;case e.ALPHANUMERIC:k.push([O,{data:O.data,mode:e.BYTE,length:O.length}]);break;case e.KANJI:k.push([O,{data:O.data,mode:e.BYTE,length:d(O.data)}]);break;case e.BYTE:k.push([{data:O.data,mode:e.BYTE,length:d(O.data)}])}}return k}function g(A,k){const M={},O={start:{}};let B=["start"];for(let z=0;z<A.length;z++){const V=A[z],H=[];for(let F=0;F<V.length;F++){const $=V[F],q=""+z+F;H.push(q),M[q]={node:$,lastCount:0},O[q]={};for(let Y=0;Y<B.length;Y++){const _=B[Y];M[_]&&M[_].node.mode===$.mode?(O[_][q]=x(M[_].lastCount+$.length,$.mode)-x(M[_].lastCount,$.mode),M[_].lastCount+=$.length):(M[_]&&(M[_].lastCount=$.length),O[_][q]=x($.length,$.mode)+4+e.getCharCountIndicator($.mode,k))}}B=H}for(let z=0;z<B.length;z++)O[B[z]].end=0;return{map:O,table:M}}function S(A,k){let M;const O=e.getBestModeForData(A);if(M=e.from(k,O),M!==e.BYTE&&M.bit<O.bit)throw new Error('"'+A+'" cannot be encoded with mode '+e.toString(M)+`.
 Suggested mode is: `+e.toString(O));switch(M===e.KANJI&&!a.isKanjiModeEnabled()&&(M=e.BYTE),M){case e.NUMERIC:return new t(A);case e.ALPHANUMERIC:return new r(A);case e.KANJI:return new i(A);case e.BYTE:return new s(A)}}n.fromArray=function(k){return k.reduce(function(M,O){return typeof O=="string"?M.push(S(O,null)):O.data&&M.push(S(O.data,O.mode)),M},[])},n.fromString=function(k,M){const O=p(k,a.isKanjiModeEnabled()),B=E(O),z=g(B,M),V=c.find_path(z.map,"start","end"),H=[];for(let F=1;F<V.length-1;F++)H.push(z.table[V[F]].node);return n.fromArray(y(H))},n.rawSplit=function(k){return n.fromArray(p(k,a.isKanjiModeEnabled()))}}(wc)),wc}var ih;function qx(){if(ih)return ic;ih=1;const n=os(),e=ou(),t=Ax(),r=Ix(),s=Cx(),i=Tx(),o=_x(),a=y0(),c=Rx(),d=Bx(),h=Ox(),p=as(),x=$x();function y(z,V){const H=z.size,F=i.getPositions(V);for(let $=0;$<F.length;$++){const q=F[$][0],Y=F[$][1];for(let _=-1;_<=7;_++)if(!(q+_<=-1||H<=q+_))for(let u=-1;u<=7;u++)Y+u<=-1||H<=Y+u||(_>=0&&_<=6&&(u===0||u===6)||u>=0&&u<=6&&(_===0||_===6)||_>=2&&_<=4&&u>=2&&u<=4?z.set(q+_,Y+u,!0,!0):z.set(q+_,Y+u,!1,!0))}}function E(z){const V=z.size;for(let H=8;H<V-8;H++){const F=H%2===0;z.set(H,6,F,!0),z.set(6,H,F,!0)}}function g(z,V){const H=s.getPositions(V);for(let F=0;F<H.length;F++){const $=H[F][0],q=H[F][1];for(let Y=-2;Y<=2;Y++)for(let _=-2;_<=2;_++)Y===-2||Y===2||_===-2||_===2||Y===0&&_===0?z.set($+Y,q+_,!0,!0):z.set($+Y,q+_,!1,!0)}}function S(z,V){const H=z.size,F=d.getEncodedBits(V);let $,q,Y;for(let _=0;_<18;_++)$=Math.floor(_/3),q=_%3+H-8-3,Y=(F>>_&1)===1,z.set($,q,Y,!0),z.set(q,$,Y,!0)}function A(z,V,H){const F=z.size,$=h.getEncodedBits(V,H);let q,Y;for(q=0;q<15;q++)Y=($>>q&1)===1,q<6?z.set(q,8,Y,!0):q<8?z.set(q+1,8,Y,!0):z.set(F-15+q,8,Y,!0),q<8?z.set(8,F-q-1,Y,!0):q<9?z.set(8,15-q-1+1,Y,!0):z.set(8,15-q-1,Y,!0);z.set(F-8,8,1,!0)}function k(z,V){const H=z.size;let F=-1,$=H-1,q=7,Y=0;for(let _=H-1;_>0;_-=2)for(_===6&&_--;;){for(let u=0;u<2;u++)if(!z.isReserved($,_-u)){let b=!1;Y<V.length&&(b=(V[Y]>>>q&1)===1),z.set($,_-u,b),q--,q===-1&&(Y++,q=7)}if($+=F,$<0||H<=$){$-=F,F=-F;break}}}function M(z,V,H){const F=new t;H.forEach(function(u){F.put(u.mode.bit,4),F.put(u.getLength(),p.getCharCountIndicator(u.mode,z)),u.write(F)});const $=n.getSymbolTotalCodewords(z),q=a.getTotalCodewordsCount(z,V),Y=($-q)*8;for(F.getLengthInBits()+4<=Y&&F.put(0,4);F.getLengthInBits()%8!==0;)F.putBit(0);const _=(Y-F.getLengthInBits())/8;for(let u=0;u<_;u++)F.put(u%2?17:236,8);return O(F,z,V)}function O(z,V,H){const F=n.getSymbolTotalCodewords(V),$=a.getTotalCodewordsCount(V,H),q=F-$,Y=a.getBlocksCount(V,H),_=F%Y,u=Y-_,b=Math.floor(F/Y),N=Math.floor(q/Y),j=N+1,R=b-N,U=new c(R);let K=0;const L=new Array(Y),f=new Array(Y);let m=0;const T=new Uint8Array(z.buffer);for(let ae=0;ae<Y;ae++){const Ce=ae<u?N:j;L[ae]=T.slice(K,K+Ce),f[ae]=U.encode(L[ae]),K+=Ce,m=Math.max(m,Ce)}const P=new Uint8Array(F);let Z=0,ne,ie;for(ne=0;ne<m;ne++)for(ie=0;ie<Y;ie++)ne<L[ie].length&&(P[Z++]=L[ie][ne]);for(ne=0;ne<R;ne++)for(ie=0;ie<Y;ie++)P[Z++]=f[ie][ne];return P}function B(z,V,H,F){let $;if(Array.isArray(z))$=x.fromArray(z);else if(typeof z=="string"){let b=V;if(!b){const N=x.rawSplit(z);b=d.getBestVersionForData(N,H)}$=x.fromString(z,b||40)}else throw new Error("Invalid data");const q=d.getBestVersionForData($,H);if(!q)throw new Error("The amount of data is too big to be stored in a QR Code");if(!V)V=q;else if(V<q)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+q+`.
`);const Y=M(V,H,$),_=n.getSymbolSize(V),u=new r(_);return y(u,V),E(u),g(u,V),A(u,H,0),V>=7&&S(u,V),k(u,Y),isNaN(F)&&(F=o.getBestMask(u,A.bind(null,u,H))),o.applyMask(F,u),A(u,H,F),{modules:u,version:V,errorCorrectionLevel:H,maskPattern:F,segments:$}}return ic.create=function(V,H){if(typeof V>"u"||V==="")throw new Error("No input text");let F=e.M,$,q;return typeof H<"u"&&(F=e.from(H.errorCorrectionLevel,e.M),$=d.from(H.version),q=o.from(H.maskPattern),H.toSJISFunc&&n.setToSJISFunction(H.toSJISFunc)),B(V,$,F,q)},ic}var Nc={},Mc={},oh;function x0(){return oh||(oh=1,function(n){function e(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let r=t.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+t);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(i){return[i,i]}))),r.length===6&&r.push("F","F");const s=parseInt(r.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+r.slice(0,6).join("")}}n.getOptions=function(r){r||(r={}),r.color||(r.color={});const s=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,i=r.width&&r.width>=21?r.width:void 0,o=r.scale||4;return{width:i,scale:i?4:o,margin:s,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},n.getScale=function(r,s){return s.width&&s.width>=r+s.margin*2?s.width/(r+s.margin*2):s.scale},n.getImageWidth=function(r,s){const i=n.getScale(r,s);return Math.floor((r+s.margin*2)*i)},n.qrToImageData=function(r,s,i){const o=s.modules.size,a=s.modules.data,c=n.getScale(o,i),d=Math.floor((o+i.margin*2)*c),h=i.margin*c,p=[i.color.light,i.color.dark];for(let x=0;x<d;x++)for(let y=0;y<d;y++){let E=(x*d+y)*4,g=i.color.light;if(x>=h&&y>=h&&x<d-h&&y<d-h){const S=Math.floor((x-h)/c),A=Math.floor((y-h)/c);g=p[a[S*o+A]?1:0]}r[E++]=g.r,r[E++]=g.g,r[E++]=g.b,r[E]=g.a}}}(Mc)),Mc}var ah;function Wx(){return ah||(ah=1,function(n){const e=x0();function t(s,i,o){s.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=o,i.width=o,i.style.height=o+"px",i.style.width=o+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}n.render=function(i,o,a){let c=a,d=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(d=r()),c=e.getOptions(c);const h=e.getImageWidth(i.modules.size,c),p=d.getContext("2d"),x=p.createImageData(h,h);return e.qrToImageData(x.data,i,c),t(p,d,h),p.putImageData(x,0,0),d},n.renderToDataURL=function(i,o,a){let c=a;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const d=n.render(i,o,c),h=c.type||"image/png",p=c.rendererOpts||{};return d.toDataURL(h,p.quality)}}(Nc)),Nc}var jc={},ch;function Hx(){if(ch)return jc;ch=1;const n=x0();function e(s,i){const o=s.a/255,a=i+'="'+s.hex+'"';return o<1?a+" "+i+'-opacity="'+o.toFixed(2).slice(1)+'"':a}function t(s,i,o){let a=s+i;return typeof o<"u"&&(a+=" "+o),a}function r(s,i,o){let a="",c=0,d=!1,h=0;for(let p=0;p<s.length;p++){const x=Math.floor(p%i),y=Math.floor(p/i);!x&&!d&&(d=!0),s[p]?(h++,p>0&&x>0&&s[p-1]||(a+=d?t("M",x+o,.5+y+o):t("m",c,0),c=0,d=!1),x+1<i&&s[p+1]||(a+=t("h",h),h=0)):c++}return a}return jc.render=function(i,o,a){const c=n.getOptions(o),d=i.modules.size,h=i.modules.data,p=d+c.margin*2,x=c.color.light.a?"<path "+e(c.color.light,"fill")+' d="M0 0h'+p+"v"+p+'H0z"/>':"",y="<path "+e(c.color.dark,"stroke")+' d="'+r(h,d,c.margin)+'"/>',E='viewBox="0 0 '+p+" "+p+'"',S='<svg xmlns="http://www.w3.org/2000/svg" '+(c.width?'width="'+c.width+'" height="'+c.width+'" ':"")+E+' shape-rendering="crispEdges">'+x+y+`</svg>
`;return typeof a=="function"&&a(null,S),S},jc}var lh;function Kx(){if(lh)return fs;lh=1;const n=jx(),e=qx(),t=Wx(),r=Hx();function s(i,o,a,c,d){const h=[].slice.call(arguments,1),p=h.length,x=typeof h[p-1]=="function";if(!x&&!n())throw new Error("Callback required as last argument");if(x){if(p<2)throw new Error("Too few arguments provided");p===2?(d=a,a=o,o=c=void 0):p===3&&(o.getContext&&typeof d>"u"?(d=c,c=void 0):(d=c,c=a,a=o,o=void 0))}else{if(p<1)throw new Error("Too few arguments provided");return p===1?(a=o,o=c=void 0):p===2&&!o.getContext&&(c=a,a=o,o=void 0),new Promise(function(y,E){try{const g=e.create(a,c);y(i(g,o,c))}catch(g){E(g)}})}try{const y=e.create(a,c);d(null,i(y,o,c))}catch(y){d(y)}}return fs.create=e.create,fs.toCanvas=s.bind(null,t.render),fs.toDataURL=s.bind(null,t.renderToDataURL),fs.toString=s.bind(null,function(i,o,a){return r.render(i,a)}),fs}Kx();function Le(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(h){try{d(r.next(h))}catch(p){o(p)}}function c(h){try{d(r.throw(h))}catch(p){o(p)}}function d(h){h.done?i(h.value):s(h.value).then(a,c)}d((r=r.apply(n,[])).next())})}function Qi(n){return new Uint8Array(window.atob(n).split("").map(e=>e.charCodeAt(0)))}function Vx(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&/android/i.test(navigator.userAgent)}const cr="Mobile Wallet Adapter",Gx=64;function Yx(n){const e=Qi(n);return new pe(e)}function uh(n){return"version"in n}function Qx(n){switch(n){case"mainnet-beta":return"solana:mainnet";case"testnet":return"solana:testnet";case"devnet":return"solana:devnet"}}class Zx extends lm{constructor(e){var t;super(),this.supportedTransactionVersions=new Set(["legacy",0]),this.name=cr,this.url="https://solanamobile.com/wallets",this.icon="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjI4IiB3aWR0aD0iMjgiIHZpZXdCb3g9Ii0zIDAgMjggMjgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI0RDQjhGRiI+PHBhdGggZD0iTTE3LjQgMTcuNEgxNXYyLjRoMi40di0yLjRabTEuMi05LjZoLTIuNHYyLjRoMi40VjcuOFoiLz48cGF0aCBkPSJNMjEuNiAzVjBoLTIuNHYzaC0zLjZWMGgtMi40djNoLTIuNHY2LjZINC41YTIuMSAyLjEgMCAxIDEgMC00LjJoMi43VjNINC41QTQuNSA0LjUgMCAwIDAgMCA3LjVWMjRoMjEuNnYtNi42aC0yLjR2NC4ySDIuNFYxMS41Yy41LjMgMS4yLjQgMS44LjVoNy41QTYuNiA2LjYgMCAwIDAgMjQgOVYzaC0yLjRabTAgNS43YTQuMiA0LjIgMCAxIDEtOC40IDBWNS40aDguNHYzLjNaIi8+PC9nPjwvc3ZnPg==",this._connecting=!1,this._connectionGeneration=0,this._readyState=Vx()?be.Loadable:be.Unsupported,this._authorizationResultCache=e.authorizationResultCache,this._addressSelector=e.addressSelector,this._appIdentity=e.appIdentity,this._chain=(t=e.chain)!==null&&t!==void 0?t:Qx(e.cluster),this._hostAuthority=e.remoteHostAuthority,this._onWalletNotFound=e.onWalletNotFound,this._readyState!==be.Unsupported&&this._authorizationResultCache.get().then(r=>{r&&this.declareWalletAsInstalled()})}get publicKey(){if(this._publicKey==null&&this._selectedAddress!=null)try{this._publicKey=Yx(this._selectedAddress)}catch(e){throw new Xr(e instanceof Error&&(e==null?void 0:e.message)||"Unknown error",e)}return this._publicKey?this._publicKey:null}get connected(){return!!this._authorizationResult}get connecting(){return this._connecting}get readyState(){return this._readyState}declareWalletAsInstalled(){this._readyState!==be.Installed&&this.emit("readyStateChange",this._readyState=be.Installed)}runWithGuard(e){return Le(this,void 0,void 0,function*(){try{return yield e()}catch(t){throw this.emit("error",t),t}})}autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED(){return Le(this,void 0,void 0,function*(){return yield this.autoConnect()})}autoConnect(){return Le(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield this.runWithGuard(()=>Le(this,void 0,void 0,function*(){if(this._readyState!==be.Installed&&this._readyState!==be.Loadable)throw new Vn;this._connecting=!0;try{const e=yield this._authorizationResultCache.get();e&&this.handleAuthorizationResult(e)}catch(e){throw new Wn(e instanceof Error&&e.message||"Unknown error",e)}finally{this._connecting=!1}}))})}connect(){return Le(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield this.runWithGuard(()=>Le(this,void 0,void 0,function*(){if(this._readyState!==be.Installed&&this._readyState!==be.Loadable)throw new Vn;this._connecting=!0;try{yield this.performAuthorization()}catch(e){throw new Wn(e instanceof Error&&e.message||"Unknown error",e)}finally{this._connecting=!1}}))})}performAuthorization(e){return Le(this,void 0,void 0,function*(){try{const t=yield this._authorizationResultCache.get();return t?(this.handleAuthorizationResult(t),t):yield this.transact(r=>Le(this,void 0,void 0,function*(){const s=yield r.authorize({chain:this._chain,identity:this._appIdentity,sign_in_payload:e});return Promise.all([this._authorizationResultCache.set(s),this.handleAuthorizationResult(s)]),s}))}catch(t){throw new Wn(t instanceof Error&&t.message||"Unknown error",t)}})}handleAuthorizationResult(e){var t;return Le(this,void 0,void 0,function*(){const r=this._authorizationResult==null||((t=this._authorizationResult)===null||t===void 0?void 0:t.accounts.length)!==e.accounts.length||this._authorizationResult.accounts.some((s,i)=>s.address!==e.accounts[i].address);if(this._authorizationResult=e,this.declareWalletAsInstalled(),r){const s=yield this._addressSelector.select(e.accounts.map(({address:i})=>i));s!==this._selectedAddress&&(this._selectedAddress=s,delete this._publicKey,this.emit("connect",this.publicKey))}})}performReauthorization(e,t){return Le(this,void 0,void 0,function*(){try{const r=yield e.authorize({auth_token:t,identity:this._appIdentity});Promise.all([this._authorizationResultCache.set(r),this.handleAuthorizationResult(r)])}catch(r){throw this.disconnect(),new jo(r instanceof Error&&(r==null?void 0:r.message)||"Unknown error",r)}})}disconnect(){return Le(this,void 0,void 0,function*(){this._authorizationResultCache.clear(),this._connecting=!1,this._connectionGeneration++,delete this._authorizationResult,delete this._publicKey,delete this._selectedAddress,this.emit("disconnect")})}transact(e){var t;return Le(this,void 0,void 0,function*(){const r=(t=this._authorizationResult)===null||t===void 0?void 0:t.wallet_uri_base,s=r?{baseUri:r}:void 0,i=this._hostAuthority?{remoteHostAuthority:this._hostAuthority}:void 0,o=this._connectionGeneration;try{return yield Mx(e,Object.assign(Object.assign({},s),i))}catch(a){throw this._connectionGeneration!==o&&(yield new Promise(()=>{})),a instanceof Error&&a.name==="SolanaMobileWalletAdapterError"&&a.code==="ERROR_WALLET_NOT_FOUND"&&(yield this._onWalletNotFound(this)),a}})}assertIsAuthorized(){if(!this._authorizationResult||!this._selectedAddress)throw new He;return{authToken:this._authorizationResult.auth_token,selectedAddress:this._selectedAddress}}performSignTransactions(e){return Le(this,void 0,void 0,function*(){const{authToken:t}=this.assertIsAuthorized();try{return yield this.transact(r=>Le(this,void 0,void 0,function*(){return yield this.performReauthorization(r,t),yield r.signTransactions({transactions:e})}))}catch(r){throw new cn(r==null?void 0:r.message,r)}})}sendTransaction(e,t,r){return Le(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>Le(this,void 0,void 0,function*(){const{authToken:s}=this.assertIsAuthorized(),i=r==null?void 0:r.minContextSlot;try{return yield this.transact(o=>Le(this,void 0,void 0,function*(){function a(){let p;switch(t.commitment){case"confirmed":case"finalized":case"processed":p=t.commitment;break;default:p="finalized"}let x;switch(r==null?void 0:r.preflightCommitment){case"confirmed":case"finalized":case"processed":x=r.preflightCommitment;break;case void 0:x=p;break;default:x="finalized"}return(x==="finalized"?2:x==="confirmed"?1:0)<(p==="finalized"?2:p==="confirmed"?1:0)?x:p}const[c,d,h]=yield Promise.all([o.getCapabilities(),this.performReauthorization(o,s),uh(e)?null:Le(this,void 0,void 0,function*(){var p;if(e.feePayer||(e.feePayer=(p=this.publicKey)!==null&&p!==void 0?p:void 0),e.recentBlockhash==null){const{blockhash:x}=yield t.getLatestBlockhash({commitment:a()});e.recentBlockhash=x}})]);if(c.supports_sign_and_send_transactions)return(yield o.signAndSendTransactions({minContextSlot:i,transactions:[e]}))[0];{const[p]=yield o.signTransactions({transactions:[e]});if(uh(p))return yield t.sendTransaction(p);{const x=p.serialize();return yield t.sendRawTransaction(x,Object.assign(Object.assign({},r),{preflightCommitment:a()}))}}}))}catch(o){throw new Cn(o==null?void 0:o.message,o)}}))})}signTransaction(e){return Le(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>Le(this,void 0,void 0,function*(){const[t]=yield this.performSignTransactions([e]);return t}))})}signAllTransactions(e){return Le(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>Le(this,void 0,void 0,function*(){return yield this.performSignTransactions(e)}))})}signMessage(e){return Le(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>Le(this,void 0,void 0,function*(){const{authToken:t,selectedAddress:r}=this.assertIsAuthorized();try{return yield this.transact(s=>Le(this,void 0,void 0,function*(){yield this.performReauthorization(s,t);const[i]=yield s.signMessages({addresses:[r],payloads:[e]});return i.slice(-Gx)}))}catch(s){throw new vi(s==null?void 0:s.message,s)}}))})}signIn(e){return Le(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>Le(this,void 0,void 0,function*(){var t,r;if(this._readyState!==be.Installed&&this._readyState!==be.Loadable)throw new Vn;this._connecting=!0;try{const s=yield this.performAuthorization(Object.assign(Object.assign({},e),{domain:(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:window.location.host}));if(!s.sign_in_result)throw new Error("Sign in failed, no sign in result returned by wallet");const i=s.sign_in_result.address;return{account:Object.assign(Object.assign({},(r=s.accounts.find(a=>a.address==i))!==null&&r!==void 0?r:{address:i}),{publicKey:Qi(i)}),signedMessage:Qi(s.sign_in_result.signed_message),signature:Qi(s.sign_in_result.signature)}}catch(s){throw new Wn(s instanceof Error&&s.message||"Unknown error",s)}finally{this._connecting=!1}}))})}}function Jx(){return{select(n){return Le(this,void 0,void 0,function*(){return n[0]})}}}const Ac="SolanaMobileWalletAdapterDefaultAuthorizationCache";function Xx(){let n;try{n=window.localStorage}catch{}return{clear(){return Le(this,void 0,void 0,function*(){if(n)try{n.removeItem(Ac)}catch{}})},get(){return Le(this,void 0,void 0,function*(){if(n)try{return JSON.parse(n.getItem(Ac))||void 0}catch{}})},set(e){return Le(this,void 0,void 0,function*(){if(n)try{n.setItem(Ac,JSON.stringify(e))}catch{}})}}}function e1(n){return Le(this,void 0,void 0,function*(){typeof window<"u"&&window.location.assign(n.url)})}function t1(){return e1}var n1=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},r1=function(n,e,t,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(n,t):s?s.value=t:e.set(n,t),t},Zi;function s1(n){const e=({register:t})=>t(n);try{window.dispatchEvent(new i1(e))}catch(t){console.error(`wallet-standard:register-wallet event could not be dispatched
`,t)}try{window.addEventListener("wallet-standard:app-ready",({detail:t})=>e(t))}catch(t){console.error(`wallet-standard:app-ready event listener could not be added
`,t)}}class i1 extends Event{get detail(){return n1(this,Zi,"f")}get type(){return"wallet-standard:register-wallet"}constructor(e){super("wallet-standard:register-wallet",{bubbles:!1,cancelable:!1,composed:!1}),Zi.set(this,void 0),r1(this,Zi,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}Zi=new WeakMap;function o1(n,e){if(n===e)return!0;const t=n.length;if(t!==e.length)return!1;for(let r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}function a1(n){if(n.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let d=0;d<e.length;d++)e[d]=255;for(let d=0;d<n.length;d++){const h=n.charAt(d),p=h.charCodeAt(0);if(e[p]!==255)throw new TypeError(h+" is ambiguous");e[p]=d}const t=n.length,r=n.charAt(0),s=Math.log(t)/Math.log(256),i=Math.log(256)/Math.log(t);function o(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(d.length===0)return"";let h=0,p=0,x=0;const y=d.length;for(;x!==y&&d[x]===0;)x++,h++;const E=(y-x)*i+1>>>0,g=new Uint8Array(E);for(;x!==y;){let k=d[x],M=0;for(let O=E-1;(k!==0||M<p)&&O!==-1;O--,M++)k+=256*g[O]>>>0,g[O]=k%t>>>0,k=k/t>>>0;if(k!==0)throw new Error("Non-zero carry");p=M,x++}let S=E-p;for(;S!==E&&g[S]===0;)S++;let A=r.repeat(h);for(;S<E;++S)A+=n.charAt(g[S]);return A}function a(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return new Uint8Array;let h=0,p=0,x=0;for(;d[h]===r;)p++,h++;const y=(d.length-h)*s+1>>>0,E=new Uint8Array(y);for(;d[h];){let k=e[d.charCodeAt(h)];if(k===255)return;let M=0;for(let O=y-1;(k!==0||M<x)&&O!==-1;O--,M++)k+=t*E[O]>>>0,E[O]=k%256>>>0,k=k/256>>>0;if(k!==0)throw new Error("Non-zero carry");x=M,h++}let g=y-x;for(;g!==y&&E[g]===0;)g++;const S=new Uint8Array(p+(y-g));let A=p;for(;g!==y;)S[A++]=E[g++];return S}function c(d){const h=a(d);if(h)return h;throw new Error("Non-base"+t+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var c1="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const l1=a1(c1);var he=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},Et=function(n,e,t,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(n,t):s?s.value=t:e.set(n,t),t},Dt,en,Dr,Pr,Tr,ri,yo,Re,wo,hl,Ji,fl,ii,pl,dh,hh,fh,ph;class u1 extends pf{get name(){return he(this,Re,"f").name}get url(){return"https://github.com/solana-labs/wallet-standard"}get icon(){return he(this,Re,"f").icon}get readyState(){return he(this,wo,"f")}get publicKey(){return he(this,Dr,"f")}get connecting(){return he(this,Pr,"f")}get supportedTransactionVersions(){return he(this,yo,"f")}get wallet(){return he(this,Re,"f")}get standard(){return!0}constructor({wallet:e}){super(),Dt.add(this),en.set(this,void 0),Dr.set(this,void 0),Pr.set(this,void 0),Tr.set(this,void 0),ri.set(this,void 0),yo.set(this,void 0),Re.set(this,void 0),wo.set(this,typeof window>"u"||typeof document>"u"?be.Unsupported:be.Installed),pl.set(this,t=>{if("accounts"in t){const r=he(this,Re,"f").accounts[0];he(this,en,"f")&&!he(this,Tr,"f")&&r!==he(this,en,"f")&&(r?he(this,Dt,"m",Ji).call(this,r):(this.emit("error",new jo),he(this,Dt,"m",fl).call(this)))}"features"in t&&he(this,Dt,"m",ii).call(this)}),Et(this,Re,e,"f"),Et(this,en,null,"f"),Et(this,Dr,null,"f"),Et(this,Pr,!1,"f"),Et(this,Tr,!1,"f"),Et(this,ri,he(this,Re,"f").features[$l].on("change",he(this,pl,"f")),"f"),he(this,Dt,"m",ii).call(this)}destroy(){Et(this,en,null,"f"),Et(this,Dr,null,"f"),Et(this,Pr,!1,"f"),Et(this,Tr,!1,"f");const e=he(this,ri,"f");e&&(Et(this,ri,null,"f"),e())}async autoConnect(){return he(this,Dt,"m",hl).call(this,{silent:!0})}async connect(){return he(this,Dt,"m",hl).call(this)}async disconnect(){if(Xc in he(this,Re,"f").features)try{Et(this,Tr,!0,"f"),await he(this,Re,"f").features[Xc].disconnect()}catch(e){this.emit("error",new Ao(e==null?void 0:e.message,e))}finally{Et(this,Tr,!1,"f")}he(this,Dt,"m",fl).call(this)}async sendTransaction(e,t,r={}){try{const s=he(this,en,"f");if(!s)throw new He;let i;if(Fn in he(this,Re,"f").features)if(s.features.includes(Fn))i=Fn;else if(Lt in he(this,Re,"f").features&&s.features.includes(Lt))i=Lt;else throw new vr;else if(Lt in he(this,Re,"f").features){if(!s.features.includes(Lt))throw new vr;i=Lt}else throw new Br;const o=zb(t.rpcEndpoint);if(!s.chains.includes(o))throw new Cn;try{const{signers:a,...c}=r;let d;if(Hn(e)?(a!=null&&a.length&&e.sign(a),d=e.serialize()):(e=await this.prepareTransaction(e,t,c),a!=null&&a.length&&e.partialSign(...a),d=new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))),i===Fn){const[h]=await he(this,Re,"f").features[Fn].signAndSendTransaction({account:s,chain:o,transaction:d,options:{preflightCommitment:Qa(c.preflightCommitment||t.commitment),skipPreflight:c.skipPreflight,maxRetries:c.maxRetries,minContextSlot:c.minContextSlot}});return l1.encode(h.signature)}else{const[h]=await he(this,Re,"f").features[Lt].signTransaction({account:s,chain:o,transaction:d,options:{preflightCommitment:Qa(c.preflightCommitment||t.commitment),minContextSlot:c.minContextSlot}});return await t.sendRawTransaction(h.signedTransaction,{...c,preflightCommitment:Qa(c.preflightCommitment||t.commitment)})}}catch(a){throw a instanceof Tt?a:new Cn(a==null?void 0:a.message,a)}}catch(s){throw this.emit("error",s),s}}}en=new WeakMap,Dr=new WeakMap,Pr=new WeakMap,Tr=new WeakMap,ri=new WeakMap,yo=new WeakMap,Re=new WeakMap,wo=new WeakMap,pl=new WeakMap,Dt=new WeakSet,hl=async function(e){try{if(this.connected||this.connecting)return;if(he(this,wo,"f")!==be.Installed)throw new Vn;if(Et(this,Pr,!0,"f"),!he(this,Re,"f").accounts.length)try{await he(this,Re,"f").features[zl].connect(e)}catch(r){throw new Wn(r==null?void 0:r.message,r)}const t=he(this,Re,"f").accounts[0];if(!t)throw new vr;he(this,Dt,"m",Ji).call(this,t)}catch(t){throw this.emit("error",t),t}finally{Et(this,Pr,!1,"f")}},Ji=function(e){let t;try{t=new pe(e.address)}catch(r){throw new Xr(r==null?void 0:r.message,r)}Et(this,en,e,"f"),Et(this,Dr,t,"f"),he(this,Dt,"m",ii).call(this),this.emit("connect",t)},fl=function(){Et(this,en,null,"f"),Et(this,Dr,null,"f"),he(this,Dt,"m",ii).call(this),this.emit("disconnect")},ii=function(){var t,r;const e=Fn in he(this,Re,"f").features?he(this,Re,"f").features[Fn].supportedTransactionVersions:he(this,Re,"f").features[Lt].supportedTransactionVersions;Et(this,yo,o1(e,["legacy"])?null:new Set(e),"f"),Lt in he(this,Re,"f").features&&((t=he(this,en,"f"))!=null&&t.features.includes(Lt))?(this.signTransaction=he(this,Dt,"m",dh),this.signAllTransactions=he(this,Dt,"m",hh)):(delete this.signTransaction,delete this.signAllTransactions),ps in he(this,Re,"f").features&&((r=he(this,en,"f"))!=null&&r.features.includes(ps))?this.signMessage=he(this,Dt,"m",fh):delete this.signMessage,Ea in he(this,Re,"f").features?this.signIn=he(this,Dt,"m",ph):delete this.signIn},dh=async function(e){try{const t=he(this,en,"f");if(!t)throw new He;if(!(Lt in he(this,Re,"f").features))throw new Br;if(!t.features.includes(Lt))throw new vr;try{const s=(await he(this,Re,"f").features[Lt].signTransaction({account:t,transaction:Hn(e)?e.serialize():new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))[0].signedTransaction;return Hn(e)?mi.deserialize(s):bn.from(s)}catch(r){throw r instanceof Tt?r:new cn(r==null?void 0:r.message,r)}}catch(t){throw this.emit("error",t),t}},hh=async function(e){try{const t=he(this,en,"f");if(!t)throw new He;if(!(Lt in he(this,Re,"f").features))throw new Br;if(!t.features.includes(Lt))throw new vr;try{const r=await he(this,Re,"f").features[Lt].signTransaction(...e.map(s=>({account:t,transaction:Hn(s)?s.serialize():new Uint8Array(s.serialize({requireAllSignatures:!1,verifySignatures:!1}))})));return e.map((s,i)=>{const o=r[i].signedTransaction;return Hn(s)?mi.deserialize(o):bn.from(o)})}catch(r){throw new cn(r==null?void 0:r.message,r)}}catch(t){throw this.emit("error",t),t}},fh=async function(e){try{const t=he(this,en,"f");if(!t)throw new He;if(!(ps in he(this,Re,"f").features))throw new Br;if(!t.features.includes(ps))throw new vr;try{return(await he(this,Re,"f").features[ps].signMessage({account:t,message:e}))[0].signature}catch(r){throw new vi(r==null?void 0:r.message,r)}}catch(t){throw this.emit("error",t),t}},ph=async function(e={}){try{if(!(Ea in he(this,Re,"f").features))throw new Br;let t;try{[t]=await he(this,Re,"f").features[Ea].signIn(e)}catch(r){throw new Du(r==null?void 0:r.message,r)}if(!t)throw new Du;return he(this,Dt,"m",Ji).call(this,t.account),t}catch(t){throw this.emit("error",t),t}};const d1=um;var h1=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},f1=function(n,e,t,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(n,t):s?s.value=t:e.set(n,t),t},Xi;let rn;const qo=new Set;function p1(n){oi=void 0,qo.add(n)}function m1(n){oi=void 0,qo.delete(n)}const ws={};function g1(){if(rn||(rn=Object.freeze({register:mh,get:y1,on:w1}),typeof window>"u"))return rn;const n=Object.freeze({register:mh});try{window.addEventListener("wallet-standard:register-wallet",({detail:e})=>e(n))}catch(e){console.error(`wallet-standard:register-wallet event listener could not be added
`,e)}try{window.dispatchEvent(new b1(n))}catch(e){console.error(`wallet-standard:app-ready event could not be dispatched
`,e)}return rn}function mh(...n){var e;return n=n.filter(t=>!qo.has(t)),n.length?(n.forEach(t=>p1(t)),(e=ws.register)==null||e.forEach(t=>ml(()=>t(...n))),function(){var r;n.forEach(s=>m1(s)),(r=ws.unregister)==null||r.forEach(s=>ml(()=>s(...n)))}):()=>{}}let oi;function y1(){return oi||(oi=[...qo]),oi}function w1(n,e){var t;return(t=ws[n])!=null&&t.push(e)||(ws[n]=[e]),function(){var s;ws[n]=(s=ws[n])==null?void 0:s.filter(i=>e!==i)}}function ml(n){try{n()}catch(e){console.error(e)}}class b1 extends Event{get detail(){return h1(this,Xi,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),Xi.set(this,void 0),f1(this,Xi,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}Xi=new WeakMap;function x1(){if(rn||(rn=g1(),typeof window>"u"))return rn;const n=window.navigator.wallets||[];if(!Array.isArray(n))return console.error("window.navigator.wallets is not an array"),rn;const{register:e}=rn,t=(...r)=>r.forEach(s=>ml(()=>s({register:e})));try{Object.defineProperty(window.navigator,"wallets",{value:Object.freeze({push:t})})}catch{return console.error("window.navigator.wallets could not be set"),rn}return t(...n),rn}function v1(n){const e=gh(()=>new Set),{get:t,on:r}=gh(()=>x1()),[s,i]=I.useState(()=>yh(t()));I.useEffect(()=>{const a=[r("register",(...c)=>i(d=>[...d,...yh(c)])),r("unregister",(...c)=>i(d=>d.filter(h=>c.some(p=>p===h.wallet))))];return()=>a.forEach(c=>c())},[r]);const o=S1(s);return I.useEffect(()=>{if(!o)return;const a=new Set(s);new Set(o.filter(d=>!a.has(d))).forEach(d=>d.destroy())},[o,s]),I.useEffect(()=>()=>s.forEach(a=>a.destroy()),[]),I.useMemo(()=>[...s,...n.filter(({name:a})=>s.some(c=>c.name===a)?(e.has(a)||(e.add(a),console.warn(`${a} was registered as a Standard Wallet. The Wallet Adapter for ${a} can be removed from your app.`)),!1):!0)],[s,n,e])}function gh(n){const e=I.useRef(void 0);return e.current===void 0&&(e.current={value:n()}),e.current.value}function S1(n){const e=I.useRef(void 0);return I.useEffect(()=>{e.current=n}),e.current}function yh(n){return n.filter(d1).map(e=>new u1({wallet:e}))}var Ss;(function(n){n[n.DESKTOP_WEB=0]="DESKTOP_WEB",n[n.MOBILE_WEB=1]="MOBILE_WEB"})(Ss||(Ss={}));function E1(n){return/(WebView|Version\/.+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)|; wv\).+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+))/i.test(n)}function N1({adapters:n,userAgentString:e}){return n.some(t=>t.name!==cr&&t.readyState===be.Installed)?Ss.DESKTOP_WEB:e&&/android/i.test(e)&&!E1(e)?Ss.MOBILE_WEB:Ss.DESKTOP_WEB}function M1(n){return n?/devnet/i.test(n)?"devnet":/testnet/i.test(n)?"testnet":"mainnet-beta":"mainnet-beta"}function j1({children:n,wallets:e,adapter:t,isUnloadingRef:r,onAutoConnectRequest:s,onConnectError:i,onError:o,onSelectWallet:a}){const c=I.useRef(!1),[d,h]=I.useState(!1),p=I.useRef(!1),[x,y]=I.useState(!1),[E,g]=I.useState(()=>(t==null?void 0:t.publicKey)??null),[S,A]=I.useState(()=>(t==null?void 0:t.connected)??!1),k=I.useRef(o);I.useEffect(()=>(k.current=o,()=>{k.current=void 0}),[o]);const M=I.useRef((b,N)=>(r.current||(k.current?k.current(b,N):(console.error(b,N),b instanceof Vn&&typeof window<"u"&&N&&window.open(N.url,"_blank"))),b)),[O,B]=I.useState(()=>e.map(b=>({adapter:b,readyState:b.readyState})).filter(({readyState:b})=>b!==be.Unsupported));I.useEffect(()=>{B(N=>e.map((j,R)=>{const U=N[R];return U&&U.adapter===j&&U.readyState===j.readyState?U:{adapter:j,readyState:j.readyState}}).filter(({readyState:j})=>j!==be.Unsupported));function b(N){B(j=>{const R=j.findIndex(({adapter:K})=>K===this);if(R===-1)return j;const{adapter:U}=j[R];return[...j.slice(0,R),{adapter:U,readyState:N},...j.slice(R+1)].filter(({readyState:K})=>K!==be.Unsupported)})}return e.forEach(N=>N.on("readyStateChange",b,N)),()=>{e.forEach(N=>N.off("readyStateChange",b,N))}},[t,e]);const z=I.useMemo(()=>O.find(b=>b.adapter===t)??null,[t,O]);I.useEffect(()=>{if(!t)return;const b=R=>{g(R),c.current=!1,h(!1),A(!0),p.current=!1,y(!1)},N=()=>{r.current||(g(null),c.current=!1,h(!1),A(!1),p.current=!1,y(!1))},j=R=>{M.current(R,t)};return t.on("connect",b),t.on("disconnect",N),t.on("error",j),()=>{t.off("connect",b),t.off("disconnect",N),t.off("error",j),N()}},[t,r]);const V=I.useRef(!1);I.useEffect(()=>()=>{V.current=!1},[t]),I.useEffect(()=>{V.current||c.current||S||!s||!((z==null?void 0:z.readyState)===be.Installed||(z==null?void 0:z.readyState)===be.Loadable)||(c.current=!0,h(!0),V.current=!0,async function(){try{await s()}catch{i()}finally{h(!1),c.current=!1}}())},[S,s,i,z]);const H=I.useCallback(async(b,N,j)=>{if(!t)throw M.current(new Id);if(!S)throw M.current(new He,t);return await t.sendTransaction(b,N,j)},[t,S]),F=I.useMemo(()=>t&&"signTransaction"in t?async b=>{if(!S)throw M.current(new He,t);return await t.signTransaction(b)}:void 0,[t,S]),$=I.useMemo(()=>t&&"signAllTransactions"in t?async b=>{if(!S)throw M.current(new He,t);return await t.signAllTransactions(b)}:void 0,[t,S]),q=I.useMemo(()=>t&&"signMessage"in t?async b=>{if(!S)throw M.current(new He,t);return await t.signMessage(b)}:void 0,[t,S]),Y=I.useMemo(()=>t&&"signIn"in t?async b=>await t.signIn(b):void 0,[t]),_=I.useCallback(async()=>{if(c.current||p.current||z!=null&&z.adapter.connected)return;if(!z)throw M.current(new Id);const{adapter:b,readyState:N}=z;if(!(N===be.Installed||N===be.Loadable))throw M.current(new Vn,b);c.current=!0,h(!0);try{await b.connect()}catch(j){throw i(),j}finally{h(!1),c.current=!1}},[i,z]),u=I.useCallback(async()=>{if(!p.current&&t){p.current=!0,y(!0);try{await t.disconnect()}finally{y(!1),p.current=!1}}},[t]);return J.createElement(c0.Provider,{value:{autoConnect:!!s,wallets:O,wallet:z,publicKey:E,connected:S,connecting:d,disconnecting:x,select:a,connect:_,disconnect:u,sendTransaction:H,signTransaction:F,signAllTransactions:$,signMessage:q,signIn:Y}},n)}let Ic;function A1(){var n;return Ic===void 0&&(Ic=((n=globalThis.navigator)==null?void 0:n.userAgent)??null),Ic}function zi(n){const e=A1();return N1({adapters:n,userAgentString:e})===Ss.MOBILE_WEB}function I1(){const n=globalThis.location;if(n)return`${n.protocol}//${n.host}`}function C1({children:n,wallets:e,autoConnect:t,localStorageKey:r="walletName",onError:s}){const{connection:i}=Bb(),o=v1(e),a=I.useMemo(()=>{if(!zi(o))return null;const k=o.find(M=>M.name===cr);return k||new Zx({addressSelector:Jx(),appIdentity:{uri:I1()},authorizationResultCache:Xx(),cluster:M1(i==null?void 0:i.rpcEndpoint),onWalletNotFound:t1()})},[o,i==null?void 0:i.rpcEndpoint]),c=I.useMemo(()=>a==null||o.indexOf(a)!==-1?o:[a,...o],[o,a]),[d,h]=Pb(r,zi(o)?cr:null),p=I.useMemo(()=>c.find(k=>k.name===d)??null,[c,d]),x=I.useCallback(k=>{d!==k&&(p&&p.name!==cr&&p.disconnect(),h(k))},[p,h,d]);I.useEffect(()=>{if(!p)return;function k(){g.current||d===cr&&zi(o)||h(null)}return p.on("disconnect",k),()=>{p.off("disconnect",k)}},[p,o,h,d]);const y=I.useRef(!1),E=I.useMemo(()=>{if(!(!t||!p))return async()=>{(t===!0||await t(p))&&(y.current?await p.connect():await p.autoConnect())}},[t,p]),g=I.useRef(!1);I.useEffect(()=>{if(d===cr&&zi(o)){g.current=!1;return}function k(){g.current=!0}return window.addEventListener("beforeunload",k),()=>{window.removeEventListener("beforeunload",k)}},[o,d]);const S=I.useCallback(()=>{p&&p.name!==cr&&x(null)},[p,x]),A=I.useCallback(k=>{y.current=!0,x(k)},[x]);return J.createElement(j1,{wallets:c,adapter:p,isUnloadingRef:g,onAutoConnectRequest:E,onConnectError:S,onError:s,onSelectWallet:A},n)}const T1="modulepreload",_1=function(n){return"/"+n},wh={},au=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(t.map(c=>{if(c=_1(c),c in wh)return;wh[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":T1,d||(p.as="script"),p.crossOrigin="",p.href=c,a&&p.setAttribute("nonce",a),document.head.appendChild(p),d)return new Promise((x,y)=>{p.addEventListener("load",x),p.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},k1="Phantom";class L1 extends Io{constructor(e={}){super(),this.name=k1,this.url="https://phantom.app",this.icon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiB2aWV3Qm94PSIwIDAgMTA4IDEwOCIgZmlsbD0ibm9uZSI+CjxyZWN0IHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiByeD0iMjYiIGZpbGw9IiNBQjlGRjIiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00Ni41MjY3IDY5LjkyMjlDNDIuMDA1NCA3Ni44NTA5IDM0LjQyOTIgODUuNjE4MiAyNC4zNDggODUuNjE4MkMxOS41ODI0IDg1LjYxODIgMTUgODMuNjU2MyAxNSA3NS4xMzQyQzE1IDUzLjQzMDUgNDQuNjMyNiAxOS44MzI3IDcyLjEyNjggMTkuODMyN0M4Ny43NjggMTkuODMyNyA5NCAzMC42ODQ2IDk0IDQzLjAwNzlDOTQgNTguODI1OCA4My43MzU1IDc2LjkxMjIgNzMuNTMyMSA3Ni45MTIyQzcwLjI5MzkgNzYuOTEyMiA2OC43MDUzIDc1LjEzNDIgNjguNzA1MyA3Mi4zMTRDNjguNzA1MyA3MS41NzgzIDY4LjgyNzUgNzAuNzgxMiA2OS4wNzE5IDY5LjkyMjlDNjUuNTg5MyA3NS44Njk5IDU4Ljg2ODUgODEuMzg3OCA1Mi41NzU0IDgxLjM4NzhDNDcuOTkzIDgxLjM4NzggNDUuNjcxMyA3OC41MDYzIDQ1LjY3MTMgNzQuNDU5OEM0NS42NzEzIDcyLjk4ODQgNDUuOTc2OCA3MS40NTU2IDQ2LjUyNjcgNjkuOTIyOVpNODMuNjc2MSA0Mi41Nzk0QzgzLjY3NjEgNDYuMTcwNCA4MS41NTc1IDQ3Ljk2NTggNzkuMTg3NSA0Ny45NjU4Qzc2Ljc4MTYgNDcuOTY1OCA3NC42OTg5IDQ2LjE3MDQgNzQuNjk4OSA0Mi41Nzk0Qzc0LjY5ODkgMzguOTg4NSA3Ni43ODE2IDM3LjE5MzEgNzkuMTg3NSAzNy4xOTMxQzgxLjU1NzUgMzcuMTkzMSA4My42NzYxIDM4Ljk4ODUgODMuNjc2MSA0Mi41Nzk0Wk03MC4yMTAzIDQyLjU3OTVDNzAuMjEwMyA0Ni4xNzA0IDY4LjA5MTYgNDcuOTY1OCA2NS43MjE2IDQ3Ljk2NThDNjMuMzE1NyA0Ny45NjU4IDYxLjIzMyA0Ni4xNzA0IDYxLjIzMyA0Mi41Nzk1QzYxLjIzMyAzOC45ODg1IDYzLjMxNTcgMzcuMTkzMSA2NS43MjE2IDM3LjE5MzFDNjguMDkxNiAzNy4xOTMxIDcwLjIxMDMgMzguOTg4NSA3MC4yMTAzIDQyLjU3OTVaIiBmaWxsPSIjRkZGREY4Ii8+Cjwvc3ZnPg==",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=typeof window>"u"||typeof document>"u"?be.Unsupported:be.NotDetected,this._disconnected=()=>{const t=this._wallet;t&&(t.off("disconnect",this._disconnected),t.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null,this.emit("error",new jo),this.emit("disconnect"))},this._accountChanged=t=>{const r=this._publicKey;if(r){try{t=new pe(t.toBytes())}catch(s){this.emit("error",new Xr(s==null?void 0:s.message,s));return}r.equals(t)||(this._publicKey=t,this.emit("connect",t))}},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==be.Unsupported&&(Jc()?(this._readyState=be.Loadable,this.emit("readyStateChange",this._readyState)):mf(()=>{var t,r,s;return(r=(t=window.phantom)==null?void 0:t.solana)!=null&&r.isPhantom||(s=window.solana)!=null&&s.isPhantom?(this._readyState=be.Installed,this.emit("readyStateChange",this._readyState),!0):!1}))}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async autoConnect(){this.readyState===be.Installed&&await this.connect()}async connect(){var e;try{if(this.connected||this.connecting)return;if(this.readyState===be.Loadable){const s=encodeURIComponent(window.location.href),i=encodeURIComponent(window.location.origin);window.location.href=`https://phantom.app/ul/browse/${s}?ref=${i}`;return}if(this.readyState!==be.Installed)throw new Vn;this._connecting=!0;const t=((e=window.phantom)==null?void 0:e.solana)||window.solana;if(!t.isConnected)try{await t.connect()}catch(s){throw new Wn(s==null?void 0:s.message,s)}if(!t.publicKey)throw new vr;let r;try{r=new pe(t.publicKey.toBytes())}catch(s){throw new Xr(s==null?void 0:s.message,s)}t.on("disconnect",this._disconnected),t.on("accountChanged",this._accountChanged),this._wallet=t,this._publicKey=r,this.emit("connect",r)}catch(t){throw this.emit("error",t),t}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),e.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(t){this.emit("error",new Ao(t==null?void 0:t.message,t))}}this.emit("disconnect")}async sendTransaction(e,t,r={}){try{const s=this._wallet;if(!s)throw new He;try{const{signers:i,...o}=r;Hn(e)?i!=null&&i.length&&e.sign(i):(e=await this.prepareTransaction(e,t,o),i!=null&&i.length&&e.partialSign(...i)),o.preflightCommitment=o.preflightCommitment||t.commitment;const{signature:a}=await s.signAndSendTransaction(e,o);return a}catch(i){throw i instanceof Tt?i:new Cn(i==null?void 0:i.message,i)}}catch(s){throw this.emit("error",s),s}}async signTransaction(e){try{const t=this._wallet;if(!t)throw new He;try{return await t.signTransaction(e)||e}catch(r){throw new cn(r==null?void 0:r.message,r)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new He;try{return await t.signAllTransactions(e)||e}catch(r){throw new cn(r==null?void 0:r.message,r)}}catch(t){throw this.emit("error",t),t}}async signMessage(e){try{const t=this._wallet;if(!t)throw new He;try{const{signature:r}=await t.signMessage(e);return r}catch(r){throw new vi(r==null?void 0:r.message,r)}}catch(t){throw this.emit("error",t),t}}}const R1="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjMxIiB2aWV3Qm94PSIwIDAgMzEgMzEiIHdpZHRoPSIzMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGxpbmVhckdyYWRpZW50IGlkPSJhIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjIwLjI1IiB4Mj0iMjYuNTcxIiB5MT0iMjcuMTczIiB5Mj0iMTkuODU4Ij48c3RvcCBvZmZzZXQ9Ii4wOCIgc3RvcC1jb2xvcj0iIzk5NDVmZiIvPjxzdG9wIG9mZnNldD0iLjMiIHN0b3AtY29sb3I9IiM4NzUyZjMiLz48c3RvcCBvZmZzZXQ9Ii41IiBzdG9wLWNvbG9yPSIjNTQ5N2Q1Ii8+PHN0b3Agb2Zmc2V0PSIuNiIgc3RvcC1jb2xvcj0iIzQzYjRjYSIvPjxzdG9wIG9mZnNldD0iLjcyIiBzdG9wLWNvbG9yPSIjMjhlMGI5Ii8+PHN0b3Agb2Zmc2V0PSIuOTciIHN0b3AtY29sb3I9IiMxOWZiOWIiLz48L2xpbmVhckdyYWRpZW50PjxnIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iLjA5NCI+PHBhdGggZD0ibTI2LjEwOSAzLjY0My05LjM2OSA2Ljk1OSAxLjczMy00LjEwNSA3LjYzNy0yLjg1M3oiIGZpbGw9IiNlMjc2MWIiIHN0cm9rZT0iI2UyNzYxYiIvPjxnIGZpbGw9IiNlNDc2MWIiIHN0cm9rZT0iI2U0NzYxYiI+PHBhdGggZD0ibTQuNDgxIDMuNjQzIDkuMjk0IDcuMDI0LTEuNjQ4LTQuMTcxem0xOC4yNTggMTYuMTMtMi40OTUgMy44MjMgNS4zMzkgMS40NjkgMS41MzUtNS4yMDctNC4zNzgtLjA4NXptLTE5LjI0Ny4wODUgMS41MjUgNS4yMDcgNS4zMzktMS40NjktMi40OTUtMy44MjN6Ii8+PHBhdGggZD0ibTEwLjA1NSAxMy4zMTMtMS40ODggMi4yNTEgNS4zMDEuMjM1LS4xODgtNS42OTd6bTEwLjQ4IDAtMy42NzItMy4yNzctLjEyMiA1Ljc2MyA1LjI5Mi0uMjM1LTEuNDk3LTIuMjUxem0tMTAuMTc4IDEwLjI4MyAzLjE4My0xLjU1NC0yLjc0OS0yLjE0Ny0uNDMzIDMuNzAxem02LjY5NS0xLjU1NCAzLjE5MiAxLjU1NC0uNDQzLTMuNzAxeiIvPjwvZz48cGF0aCBkPSJtMjAuMjQ0IDIzLjU5Ni0zLjE5Mi0xLjU1NC4yNTQgMi4wODEtLjAyOC44NzZ6bS05Ljg4NyAwIDIuOTY2IDEuNDAzLS4wMTktLjg3Ni4yMzUtMi4wODEtMy4xODMgMS41NTR6IiBmaWxsPSIjZDdjMWIzIiBzdHJva2U9IiNkN2MxYjMiLz48cGF0aCBkPSJtMTMuMzY5IDE4LjUyMS0yLjY1NS0uNzgxIDEuODc0LS44NTd6bTMuODUxIDAgLjc4MS0xLjYzOCAxLjg4My44NTctMi42NjUuNzgxeiIgZmlsbD0iIzIzMzQ0NyIgc3Ryb2tlPSIjMjMzNDQ3Ii8+PHBhdGggZD0ibTEwLjM1NyAyMy41OTYuNDUyLTMuODIzLTIuOTQ3LjA4NXptOS40MzUtMy44MjMuNDUyIDMuODIzIDIuNDk1LTMuNzM4em0yLjI0MS00LjIwOS01LjI5Mi4yMzUuNDkgMi43MjEuNzgyLTEuNjM4IDEuODgzLjg1N3ptLTExLjMxOCAyLjE3NSAxLjg4My0uODU3Ljc3MiAxLjYzOC40OTktMi43MjEtNS4zMDEtLjIzNXoiIGZpbGw9IiNjZDYxMTYiIHN0cm9rZT0iI2NkNjExNiIvPjxwYXRoIGQ9Im04LjU2NyAxNS41NjQgMi4yMjIgNC4zMzEtLjA3NS0yLjE1NnptMTEuMzI4IDIuMTc1LS4wOTQgMi4xNTYgMi4yMzItNC4zMzEtMi4xMzcgMi4xNzV6bS02LjAyNi0xLjk0LS40OTkgMi43MjEuNjIxIDMuMjExLjE0MS00LjIyOC0uMjY0LTEuNzA0em0yLjg3MiAwLS4yNTQgMS42OTUuMTEzIDQuMjM3LjYzMS0zLjIxMXoiIGZpbGw9IiNlNDc1MWYiIHN0cm9rZT0iI2U0NzUxZiIvPjxwYXRoIGQ9Im0xNy4yMyAxOC41Mi0uNjMxIDMuMjExLjQ1Mi4zMTEgMi43NS0yLjE0Ny4wOTQtMi4xNTZ6bS02LjUxNi0uNzgxLjA3NSAyLjE1NiAyLjc1IDIuMTQ3LjQ1Mi0uMzExLS42MjItMy4yMTF6IiBmaWxsPSIjZjY4NTFiIiBzdHJva2U9IiNmNjg1MWIiLz48cGF0aCBkPSJtMTcuMjc3IDI0Ljk5OS4wMjgtLjg3Ni0uMjM1LS4yMDdoLTMuNTVsLS4yMTcuMjA3LjAxOS44NzYtMi45NjYtMS40MDMgMS4wMzYuODQ4IDIuMSAxLjQ1OWgzLjYwNmwyLjEwOS0xLjQ1OSAxLjAzNi0uODQ4eiIgZmlsbD0iI2MwYWQ5ZSIgc3Ryb2tlPSIjYzBhZDllIi8+PHBhdGggZD0ibTE3LjA1MSAyMi4wNDItLjQ1Mi0uMzExaC0yLjYwOGwtLjQ1Mi4zMTEtLjIzNSAyLjA4MS4yMTctLjIwN2gzLjU1bC4yMzUuMjA3LS4yNTQtMi4wODF6IiBmaWxsPSIjMTYxNjE2IiBzdHJva2U9IiMxNjE2MTYiLz48cGF0aCBkPSJtMjYuNTA1IDExLjA1My44LTMuODQyLTEuMTk2LTMuNTY5LTkuMDU4IDYuNzIzIDMuNDg0IDIuOTQ3IDQuOTI1IDEuNDQxIDEuMDkyLTEuMjcxLS40NzEtLjMzOS43NTMtLjY4Ny0uNTg0LS40NTIuNzUzLS41NzQtLjQ5OS0uMzc3em0tMjMuMjExLTMuODQxLjggMy44NDItLjUwOC4zNzcuNzUzLjU3NC0uNTc0LjQ1Mi43NTMuNjg3LS40NzEuMzM5IDEuMDgzIDEuMjcxIDQuOTI1LTEuNDQxIDMuNDg0LTIuOTQ3LTkuMDU5LTYuNzIzeiIgZmlsbD0iIzc2M2QxNiIgc3Ryb2tlPSIjNzYzZDE2Ii8+PHBhdGggZD0ibTI1LjQ2IDE0Ljc1NC00LjkyNS0xLjQ0MSAxLjQ5NyAyLjI1MS0yLjIzMiA0LjMzMSAyLjkzOC0uMDM4aDQuMzc4bC0xLjY1Ny01LjEwNHptLTE1LjQwNS0xLjQ0MS00LjkyNSAxLjQ0MS0xLjYzOCA1LjEwNGg0LjM2OWwyLjkyOC4wMzgtMi4yMjItNC4zMzEgMS40ODgtMi4yNTF6bTYuNjg1IDIuNDg2LjMxMS01LjQzMyAxLjQzMS0zLjg3aC02LjM1NmwxLjQxMyAzLjg3LjMyOSA1LjQzMy4xMTMgMS43MTQuMDA5IDQuMjE5aDIuNjFsLjAxOS00LjIxOS4xMjItMS43MTR6IiBmaWxsPSIjZjY4NTFiIiBzdHJva2U9IiNmNjg1MWIiLz48L2c+PGNpcmNsZSBjeD0iMjMuNSIgY3k9IjIzLjUiIGZpbGw9IiMwMDAiIHI9IjYuNSIvPjxwYXRoIGQ9Im0yNy40NzMgMjUuNTQ1LTEuMzEgMS4zNjhjLS4wMjkuMDMtLjA2My4wNTMtLjEwMS4wN2EuMzEuMzEgMCAwIDEgLS4xMjEuMDI0aC02LjIwOWMtLjAzIDAtLjA1OS0uMDA4LS4wODMtLjAyNGEuMTUuMTUgMCAwIDEgLS4wNTYtLjA2NWMtLjAxMi0uMDI2LS4wMTUtLjA1Ni0uMDEtLjA4NHMuMDE4LS4wNTUuMDM5LS4wNzZsMS4zMTEtMS4zNjhjLjAyOC0uMDMuMDYzLS4wNTMuMTAxLS4wNjlhLjMxLjMxIDAgMCAxIC4xMjEtLjAyNWg2LjIwOGMuMDMgMCAuMDU5LjAwOC4wODMuMDI0YS4xNS4xNSAwIDAgMSAuMDU2LjA2NWMuMDEyLjAyNi4wMTUuMDU2LjAxLjA4NHMtLjAxOC4wNTUtLjAzOS4wNzZ6bS0xLjMxLTIuNzU2Yy0uMDI5LS4wMy0uMDYzLS4wNTMtLjEwMS0uMDdhLjMxLjMxIDAgMCAwIC0uMTIxLS4wMjRoLTYuMjA5Yy0uMDMgMC0uMDU5LjAwOC0uMDgzLjAyNHMtLjA0NC4wMzgtLjA1Ni4wNjUtLjAxNS4wNTYtLjAxLjA4NC4wMTguMDU1LjAzOS4wNzZsMS4zMTEgMS4zNjhjLjAyOC4wMy4wNjMuMDUzLjEwMS4wNjlhLjMxLjMxIDAgMCAwIC4xMjEuMDI1aDYuMjA4Yy4wMyAwIC4wNTktLjAwOC4wODMtLjAyNGEuMTUuMTUgMCAwIDAgLjA1Ni0uMDY1Yy4wMTItLjAyNi4wMTUtLjA1Ni4wMS0uMDg0cy0uMDE4LS4wNTUtLjAzOS0uMDc2em0tNi40MzEtLjk4M2g2LjIwOWEuMzEuMzEgMCAwIDAgLjEyMS0uMDI0Yy4wMzgtLjAxNi4wNzMtLjA0LjEwMS0uMDdsMS4zMS0xLjM2OGMuMDItLjAyMS4wMzQtLjA0Ny4wMzktLjA3NnMuMDAxLS4wNTgtLjAxLS4wODRhLjE1LjE1IDAgMCAwIC0uMDU2LS4wNjVjLS4wMjUtLjAxNi0uMDU0LS4wMjQtLjA4My0uMDI0aC02LjIwOGEuMzEuMzEgMCAwIDAgLS4xMjEuMDI1Yy0uMDM4LjAxNi0uMDcyLjA0LS4xMDEuMDY5bC0xLjMxIDEuMzY4Yy0uMDIuMDIxLS4wMzQuMDQ3LS4wMzkuMDc2cy0uMDAxLjA1OC4wMS4wODQuMDMxLjA0OS4wNTYuMDY1LjA1NC4wMjQuMDgzLjAyNHoiIGZpbGw9InVybCgjYSkiLz48L3N2Zz4=";var Oe=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},B1=function(n,e,t,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(n,t):s?s.value=t:e.set(n,t),t},eo,Fr,gl,yl,wl,qt,bl,v0,S0,xl,vl,Sl,El,Nl;class O1{constructor(){eo.add(this),Fr.set(this,{}),gl.set(this,"1.0.0"),yl.set(this,"MetaMask"),wl.set(this,R1),qt.set(this,null),bl.set(this,(e,t)=>{var r;return(r=Oe(this,Fr,"f")[e])!=null&&r.push(t)||(Oe(this,Fr,"f")[e]=[t]),()=>Oe(this,eo,"m",S0).call(this,e,t)}),xl.set(this,async()=>{if(!Oe(this,qt,"f")){let e;try{e=(await au(async()=>{const{default:t}=await import("./index-DWCJs3lT.js");return{default:t}},__vite__mapDeps([0,1]))).default}catch{throw new Error("Unable to load Solflare MetaMask SDK")}B1(this,qt,new e,"f"),Oe(this,qt,"f").on("standard_change",t=>Oe(this,eo,"m",v0).call(this,"change",t))}return this.accounts.length||await Oe(this,qt,"f").connect(),{accounts:this.accounts}}),vl.set(this,async()=>{Oe(this,qt,"f")&&await Oe(this,qt,"f").disconnect()}),Sl.set(this,async(...e)=>{if(!Oe(this,qt,"f"))throw new He;return await Oe(this,qt,"f").standardSignAndSendTransaction(...e)}),El.set(this,async(...e)=>{if(!Oe(this,qt,"f"))throw new He;return await Oe(this,qt,"f").standardSignTransaction(...e)}),Nl.set(this,async(...e)=>{if(!Oe(this,qt,"f"))throw new He;return await Oe(this,qt,"f").standardSignMessage(...e)})}get version(){return Oe(this,gl,"f")}get name(){return Oe(this,yl,"f")}get icon(){return Oe(this,wl,"f")}get chains(){return[ul,l0,u0]}get features(){return{[zl]:{version:"1.0.0",connect:Oe(this,xl,"f")},[Xc]:{version:"1.0.0",disconnect:Oe(this,vl,"f")},[$l]:{version:"1.0.0",on:Oe(this,bl,"f")},[Fn]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:Oe(this,Sl,"f")},[Lt]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:Oe(this,El,"f")},[ps]:{version:"1.0.0",signMessage:Oe(this,Nl,"f")}}}get accounts(){return Oe(this,qt,"f")?Oe(this,qt,"f").standardAccounts:[]}}Fr=new WeakMap,gl=new WeakMap,yl=new WeakMap,wl=new WeakMap,qt=new WeakMap,bl=new WeakMap,xl=new WeakMap,vl=new WeakMap,Sl=new WeakMap,El=new WeakMap,Nl=new WeakMap,eo=new WeakSet,v0=function(e,...t){var r;(r=Oe(this,Fr,"f")[e])==null||r.forEach(s=>s.apply(null,t))},S0=function(e,t){var r;Oe(this,Fr,"f")[e]=(r=Oe(this,Fr,"f")[e])==null?void 0:r.filter(s=>t!==s)};let bh=!1;function D1(){bh||(s1(new O1),bh=!0)}async function P1(){const n="solflare-detect-metamask";function e(){window.postMessage({target:"metamask-contentscript",data:{name:"metamask-provider",data:{id:n,jsonrpc:"2.0",method:"wallet_getSnaps"}}},window.location.origin)}function t(r){var i,o;const s=r.data;(s==null?void 0:s.target)==="metamask-inpage"&&((i=s.data)==null?void 0:i.name)==="metamask-provider"&&(((o=s.data.data)==null?void 0:o.id)===n?(window.removeEventListener("message",t),s.data.data.error||D1()):e())}window.addEventListener("message",t),window.setTimeout(()=>window.removeEventListener("message",t),5e3),e()}const F1="Solflare";class U1 extends Io{constructor(e={}){super(),this.name=F1,this.url="https://solflare.com",this.icon="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjUwIiB2aWV3Qm94PSIwIDAgNTAgNTAiIHdpZHRoPSI1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGxpbmVhckdyYWRpZW50IGlkPSJhIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNmZmMxMGIiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmYjNmMmUiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iYiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSI2LjQ3ODM1IiB4Mj0iMzQuOTEwNyIgeGxpbms6aHJlZj0iI2EiIHkxPSI3LjkyIiB5Mj0iMzMuNjU5MyIvPjxyYWRpYWxHcmFkaWVudCBpZD0iYyIgY3g9IjAiIGN5PSIwIiBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KDQuOTkyMTg4MzIgMTIuMDYzODc5NjMgLTEyLjE4MTEzNjU1IDUuMDQwNzEwNzQgMjIuNTIwMiAyMC42MTgzKSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHI9IjEiIHhsaW5rOmhyZWY9IiNhIi8+PHBhdGggZD0ibTI1LjE3MDggNDcuOTEwNGMuNTI1IDAgLjk1MDcuNDIxLjk1MDcuOTQwM3MtLjQyNTcuOTQwMi0uOTUwNy45NDAyLS45NTA3LS40MjA5LS45NTA3LS45NDAyLjQyNTctLjk0MDMuOTUwNy0uOTQwM3ptLTEuMDMyOC00NC45MTU2NWMuNDY0Ni4wMzgzNi44Mzk4LjM5MDQuOTAyNy44NDY4MWwxLjEzMDcgOC4yMTU3NGMuMzc5OCAyLjcxNDMgMy42NTM1IDMuODkwNCA1LjY3NDMgMi4wNDU5bDExLjMyOTEtMTAuMzExNThjLjI3MzMtLjI0ODczLjY5ODktLjIzMTQ5Ljk1MDcuMDM4NTEuMjMwOS4yNDc3Mi4yMzc5LjYyNjk3LjAxNjEuODgyNzdsLTkuODc5MSAxMS4zOTU4Yy0xLjgxODcgMi4wOTQyLS40NzY4IDUuMzY0MyAyLjI5NTYgNS41OTc4bDguNzE2OC44NDAzYy40MzQxLjA0MTguNzUxNy40MjM0LjcwOTMuODUyNC0uMDM0OS4zNTM3LS4zMDc0LjYzOTUtLjY2MjguNjk0OWwtOS4xNTk0IDEuNDMwMmMtMi42NTkzLjM2MjUtMy44NjM2IDMuNTExNy0yLjEzMzkgNS41NTc2bDMuMjIgMy43OTYxYy4yNTk0LjMwNTguMjE4OC43NjE1LS4wOTA4IDEuMDE3OC0uMjYyMi4yMTcyLS42NDE5LjIyNTYtLjkxMzguMDIwM2wtMy45Njk0LTIuOTk3OGMtMi4xNDIxLTEuNjEwOS01LjIyOTctLjI0MTctNS40NTYxIDIuNDI0M2wtLjg3NDcgMTAuMzk3NmMtLjAzNjIuNDI5NS0uNDE3OC43NDg3LS44NTI1LjcxMy0uMzY5LS4wMzAzLS42NjcxLS4zMDk3LS43MTcxLS42NzIxbC0xLjM4NzEtMTAuMDQzN2MtLjM3MTctMi43MTQ0LTMuNjQ1NC0zLjg5MDQtNS42NzQzLTIuMDQ1OWwtMTIuMDUxOTUgMTAuOTc0Yy0uMjQ5NDcuMjI3MS0uNjM4MDkuMjExNC0uODY4LS4wMzUtLjIxMDk0LS4yMjYyLS4yMTczNS0uNTcyNC0uMDE0OTMtLjgwNmwxMC41MTgxOC0xMi4xMzg1YzEuODE4Ny0yLjA5NDIuNDg0OS01LjM2NDQtMi4yODc2LTUuNTk3OGwtOC43MTg3Mi0uODQwNWMtLjQzNDEzLS4wNDE4LS43NTE3Mi0uNDIzNS0uNzA5MzYtLjg1MjQuMDM0OTMtLjM1MzcuMzA3MzktLjYzOTQuNjYyNy0uNjk1bDkuMTUzMzgtMS40Mjk5YzIuNjU5NC0uMzYyNSAzLjg3MTgtMy41MTE3IDIuMTQyMS01LjU1NzZsLTIuMTkyLTIuNTg0MWMtLjMyMTctLjM3OTItLjI3MTMtLjk0NDMuMTEyNi0xLjI2MjEuMzI1My0uMjY5NC43OTYzLS4yNzk3IDEuMTMzNC0uMDI0OWwyLjY5MTggMi4wMzQ3YzIuMTQyMSAxLjYxMDkgNS4yMjk3LjI0MTcgNS40NTYxLTIuNDI0M2wuNzI0MS04LjU1OTk4Yy4wNDU3LS41NDA4LjUyNjUtLjk0MjU3IDEuMDczOS0uODk3Mzd6bS0yMy4xODczMyAyMC40Mzk2NWMuNTI1MDQgMCAuOTUwNjcuNDIxLjk1MDY3Ljk0MDNzLS40MjU2My45NDAzLS45NTA2Ny45NDAzYy0uNTI1MDQxIDAtLjk1MDY3LS40MjEtLjk1MDY3LS45NDAzcy40MjU2MjktLjk0MDMuOTUwNjctLjk0MDN6bTQ3LjY3OTczLS45NTQ3Yy41MjUgMCAuOTUwNy40MjEuOTUwNy45NDAzcy0uNDI1Ny45NDAyLS45NTA3Ljk0MDItLjk1MDctLjQyMDktLjk1MDctLjk0MDIuNDI1Ny0uOTQwMy45NTA3LS45NDAzem0tMjQuNjI5Ni0yMi40Nzk3Yy41MjUgMCAuOTUwNi40MjA5NzMuOTUwNi45NDAyNyAwIC41MTkzLS40MjU2Ljk0MDI3LS45NTA2Ljk0MDI3LS41MjUxIDAtLjk1MDctLjQyMDk3LS45NTA3LS45NDAyNyAwLS41MTkyOTcuNDI1Ni0uOTQwMjcuOTUwNy0uOTQwMjd6IiBmaWxsPSJ1cmwoI2IpIi8+PHBhdGggZD0ibTI0LjU3MSAzMi43NzkyYzQuOTU5NiAwIDguOTgwMi0zLjk3NjUgOC45ODAyLTguODgxOSAwLTQuOTA1My00LjAyMDYtOC44ODE5LTguOTgwMi04Ljg4MTlzLTguOTgwMiAzLjk3NjYtOC45ODAyIDguODgxOWMwIDQuOTA1NCA0LjAyMDYgOC44ODE5IDguOTgwMiA4Ljg4MTl6IiBmaWxsPSJ1cmwoI2MpIi8+PC9zdmc+",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=typeof window>"u"||typeof document>"u"?be.Unsupported:be.Loadable,this._disconnected=()=>{const t=this._wallet;t&&(t.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("error",new jo),this.emit("disconnect"))},this._accountChanged=t=>{if(!t)return;const r=this._publicKey;if(r){try{t=new pe(t.toBytes())}catch(s){this.emit("error",new Xr(s==null?void 0:s.message,s));return}r.equals(t)||(this._publicKey=t,this.emit("connect",t))}},this._connecting=!1,this._publicKey=null,this._wallet=null,this._config=e,this._readyState!==be.Unsupported&&(mf(()=>{var t;return(t=window.solflare)!=null&&t.isSolflare||window.SolflareApp?(this._readyState=be.Installed,this.emit("readyStateChange",this._readyState),!0):!1}),P1())}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){var e;return!!((e=this._wallet)!=null&&e.connected)}get readyState(){return this._readyState}async autoConnect(){this.readyState===be.Loadable&&Jc()||await this.connect()}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==be.Loadable&&this._readyState!==be.Installed)throw new Vn;if(this.readyState===be.Loadable&&Jc()){const s=encodeURIComponent(window.location.href),i=encodeURIComponent(window.location.origin);window.location.href=`https://solflare.com/ul/v1/browse/${s}?ref=${i}`;return}let e;try{e=(await au(async()=>{const{default:s}=await import("./index-C-1Y3Wvk.js");return{default:s}},__vite__mapDeps([2,1]))).default}catch(s){throw new ff(s==null?void 0:s.message,s)}let t;try{t=new e({network:this._config.network})}catch(s){throw new Br(s==null?void 0:s.message,s)}if(this._connecting=!0,!t.connected)try{await t.connect()}catch(s){throw new Wn(s==null?void 0:s.message,s)}if(!t.publicKey)throw new Wn;let r;try{r=new pe(t.publicKey.toBytes())}catch(s){throw new Xr(s==null?void 0:s.message,s)}t.on("disconnect",this._disconnected),t.on("accountChanged",this._accountChanged),this._wallet=t,this._publicKey=r,this.emit("connect",r)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),e.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(t){this.emit("error",new Ao(t==null?void 0:t.message,t))}}this.emit("disconnect")}async sendTransaction(e,t,r={}){try{const s=this._wallet;if(!s)throw new He;try{const{signers:i,...o}=r;return Hn(e)?i!=null&&i.length&&e.sign(i):(e=await this.prepareTransaction(e,t,o),i!=null&&i.length&&e.partialSign(...i)),o.preflightCommitment=o.preflightCommitment||t.commitment,await s.signAndSendTransaction(e,o)}catch(i){throw i instanceof Tt?i:new Cn(i==null?void 0:i.message,i)}}catch(s){throw this.emit("error",s),s}}async signTransaction(e){try{const t=this._wallet;if(!t)throw new He;try{return await t.signTransaction(e)||e}catch(r){throw new cn(r==null?void 0:r.message,r)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new He;try{return await t.signAllTransactions(e)||e}catch(r){throw new cn(r==null?void 0:r.message,r)}}catch(t){throw this.emit("error",t),t}}async signMessage(e){try{const t=this._wallet;if(!t)throw new He;try{return await t.signMessage(e,"utf8")}catch(r){throw new vi(r==null?void 0:r.message,r)}}catch(t){throw this.emit("error",t),t}}}const z1="Torus";class $1 extends Io{constructor({params:e={showTorusButton:!1}}={params:{showTorusButton:!1}}){super(),this.name=z1,this.url="https://tor.us",this.icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzMiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMyAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTYuNSIgY3k9IjE2IiByPSIxNiIgZmlsbD0iIzAzNjRGRiIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTExLjIxODYgOS40OTIxOUMxMC40NTM5IDkuNDkyMTkgOS44MzM5OCAxMC4xMTIxIDkuODMzOTggMTAuODc2OFYxMi40ODk4QzkuODMzOTggMTMuMjU0NSAxMC40NTM5IDEzLjg3NDQgMTEuMjE4NiAxMy44NzQ0SDEzLjY2ODRWMjIuODk3NkMxMy42Njg0IDIzLjY2MjMgMTQuMjg4MyAyNC4yODIyIDE1LjA1MyAyNC4yODIySDE2LjY2NkMxNy40MzA3IDI0LjI4MjIgMTguMDUwNiAyMy42NjIzIDE4LjA1MDYgMjIuODk3NlYxMi41MDE1QzE4LjA1MDYgMTIuNDk3NiAxOC4wNTA2IDEyLjQ5MzcgMTguMDUwNiAxMi40ODk4VjEwLjg3NjhDMTguMDUwNiAxMC4xMTIxIDE3LjQzMDcgOS40OTIxOSAxNi42NjYgOS40OTIxOUgxNS4wNTNIMTEuMjE4NloiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0yMS4zMzc2IDEzLjg3NDRDMjIuNTQ3NyAxMy44NzQ0IDIzLjUyODcgMTIuODkzNCAyMy41Mjg3IDExLjY4MzNDMjMuNTI4NyAxMC40NzMyIDIyLjU0NzcgOS40OTIxOSAyMS4zMzc2IDkuNDkyMTlDMjAuMTI3NSA5LjQ5MjE5IDE5LjE0NjUgMTAuNDczMiAxOS4xNDY1IDExLjY4MzNDMTkuMTQ2NSAxMi44OTM0IDIwLjEyNzUgMTMuODc0NCAyMS4zMzc2IDEzLjg3NDRaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K",this.supportedTransactionVersions=null,this._readyState=typeof window>"u"||typeof document>"u"?be.Unsupported:be.Loadable,this._connecting=!1,this._wallet=null,this._publicKey=null,this._params=e}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){var e;return!!((e=this._wallet)!=null&&e.isLoggedIn)}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==be.Loadable)throw new Vn;this._connecting=!0;let e;try{e=(await au(async()=>{const{default:i}=await import("./solanaEmbed.esm-M4qwTECa.js");return{default:i}},__vite__mapDeps([3,1]))).default}catch(i){throw new ff(i==null?void 0:i.message,i)}let t;try{t=window.torus||new e}catch(i){throw new Br(i==null?void 0:i.message,i)}if(!t.isInitialized)try{await t.init(this._params)}catch(i){throw new Wn(i==null?void 0:i.message,i)}let r;try{r=await t.login()}catch(i){throw new vr(i==null?void 0:i.message,i)}let s;try{s=new pe(r[0])}catch(i){throw new Xr(i==null?void 0:i.message,i)}this._wallet=t,this._publicKey=s,this.emit("connect",s)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){this._wallet=null,this._publicKey=null;try{e.isLoggedIn&&await e.cleanUp()}catch(t){this.emit("error",new Ao(t==null?void 0:t.message,t))}}this.emit("disconnect")}async sendTransaction(e,t,r={}){try{const s=this._wallet;if(!s)throw new He;try{const{signers:i,...o}=r;e=await this.prepareTransaction(e,t,o),i!=null&&i.length&&e.partialSign(...i),o.preflightCommitment=o.preflightCommitment||t.commitment;const{signature:a}=await s.signAndSendTransaction(e,o);return a}catch(i){throw i instanceof Tt?i:new Cn(i==null?void 0:i.message,i)}}catch(s){throw this.emit("error",s),s}}async signTransaction(e){try{const t=this._wallet;if(!t)throw new He;try{return await t.signTransaction(e)||e}catch(r){throw new cn(r==null?void 0:r.message,r)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new He;try{return await t.signAllTransactions(e)||e}catch(r){throw new cn(r==null?void 0:r.message,r)}}catch(t){throw this.emit("error",t),t}}async signMessage(e){try{const t=this._wallet;if(!t)throw new He;try{return await t.signMessage(e)}catch(r){throw new vi(r==null?void 0:r.message,r)}}catch(t){throw this.emit("error",t),t}}}const E0={setVisible(n){console.error(N0("call","setVisible"))},visible:!1};Object.defineProperty(E0,"visible",{get(){return console.error(N0("read","visible")),!1}});function N0(n,e){return`You have tried to  ${n} "${e}" on a WalletModalContext without providing one. Make sure to render a WalletModalProvider as an ancestor of the component that uses WalletModalContext`}const M0=I.createContext(E0);function j0(){return I.useContext(M0)}function q1({onSelectWallet:n}){const{connect:e,connected:t,connecting:r,disconnect:s,disconnecting:i,publicKey:o,select:a,wallet:c,wallets:d}=$o();let h;r?h="connecting":t?h="connected":i?h="disconnecting":c?h="has-wallet":h="no-wallet";const p=I.useCallback(()=>{e().catch(()=>{})},[e]),x=I.useCallback(()=>{s().catch(()=>{})},[s]),y=I.useCallback(()=>{n({onSelectWallet:a,wallets:d})},[n,a,d]);return{buttonState:h,onConnect:h==="has-wallet"?p:void 0,onDisconnect:h!=="disconnecting"&&h!=="no-wallet"?x:void 0,onSelectWallet:y,publicKey:o??void 0,walletIcon:c==null?void 0:c.adapter.icon,walletName:c==null?void 0:c.adapter.name}}const A0=n=>J.createElement("button",{className:`wallet-adapter-button ${n.className||""}`,disabled:n.disabled,style:n.style,onClick:n.onClick,tabIndex:n.tabIndex||0,type:"button"},n.startIcon&&J.createElement("i",{className:"wallet-adapter-button-start-icon"},n.startIcon),n.children,n.endIcon&&J.createElement("i",{className:"wallet-adapter-button-end-icon"},n.endIcon)),I0=({wallet:n,...e})=>n&&J.createElement("img",{src:n.adapter.icon,alt:`${n.adapter.name} icon`,...e});function W1({walletIcon:n,walletName:e,...t}){return J.createElement(A0,{...t,className:"wallet-adapter-button-trigger",startIcon:n&&e?J.createElement(I0,{wallet:{adapter:{icon:n,name:e}}}):void 0})}function H1({children:n,labels:e,...t}){const{setVisible:r}=j0(),{buttonState:s,onConnect:i,onDisconnect:o,publicKey:a,walletIcon:c,walletName:d}=q1({onSelectWallet(){r(!0)}}),[h,p]=I.useState(!1),[x,y]=I.useState(!1),E=I.useRef(null);I.useEffect(()=>{const S=A=>{const k=E.current;!k||k.contains(A.target)||y(!1)};return document.addEventListener("mousedown",S),document.addEventListener("touchstart",S),()=>{document.removeEventListener("mousedown",S),document.removeEventListener("touchstart",S)}},[]);const g=I.useMemo(()=>{if(n)return n;if(a){const S=a.toBase58();return S.slice(0,4)+".."+S.slice(-4)}else return s==="connecting"||s==="has-wallet"?e[s]:e["no-wallet"]},[s,n,e,a]);return J.createElement("div",{className:"wallet-adapter-dropdown"},J.createElement(W1,{...t,"aria-expanded":x,style:{pointerEvents:x?"none":"auto",...t.style},onClick:()=>{switch(s){case"no-wallet":r(!0);break;case"has-wallet":i&&i();break;case"connected":y(!0);break}},walletIcon:c,walletName:d},g),J.createElement("ul",{"aria-label":"dropdown-list",className:`wallet-adapter-dropdown-list ${x&&"wallet-adapter-dropdown-list-active"}`,ref:E,role:"menu"},a?J.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:async()=>{await navigator.clipboard.writeText(a.toBase58()),p(!0),setTimeout(()=>p(!1),400)},role:"menuitem"},h?e.copied:e["copy-address"]):null,J.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:()=>{r(!0),y(!1)},role:"menuitem"},e["change-wallet"]),o?J.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:()=>{o(),y(!1)},role:"menuitem"},e.disconnect):null))}const xh=({id:n,children:e,expanded:t=!1})=>{const r=I.useRef(null),s=I.useRef(!0),i="height 250ms ease-out",o=()=>{const c=r.current;c&&requestAnimationFrame(()=>{c.style.height=c.scrollHeight+"px"})},a=()=>{const c=r.current;c&&requestAnimationFrame(()=>{c.style.height=c.offsetHeight+"px",c.style.overflow="hidden",requestAnimationFrame(()=>{c.style.height="0"})})};return I.useLayoutEffect(()=>{t?o():a()},[t]),I.useLayoutEffect(()=>{const c=r.current;if(!c)return;function d(){c&&(c.style.overflow=t?"initial":"hidden",t&&(c.style.height="auto"))}function h(p){c&&p.target===c&&p.propertyName==="height"&&d()}return s.current&&(d(),s.current=!1),c.addEventListener("transitionend",h),()=>c.removeEventListener("transitionend",h)},[t]),J.createElement("div",{className:"wallet-adapter-collapse",id:n,ref:r,role:"region",style:{height:0,transition:s.current?void 0:i}},e)},Cc=({handleClick:n,tabIndex:e,wallet:t})=>J.createElement("li",null,J.createElement(A0,{onClick:n,startIcon:J.createElement(I0,{wallet:t}),tabIndex:e},t.adapter.name,t.readyState===be.Installed&&J.createElement("span",null,"Detected"))),K1=()=>J.createElement("svg",{width:"97",height:"96",viewBox:"0 0 97 96",fill:"none",xmlns:"http://www.w3.org/2000/svg"},J.createElement("circle",{cx:"48.5",cy:"48",r:"48",fill:"url(#paint0_linear_880_5115)",fillOpacity:"0.1"}),J.createElement("circle",{cx:"48.5",cy:"48",r:"47",stroke:"url(#paint1_linear_880_5115)",strokeOpacity:"0.4",strokeWidth:"2"}),J.createElement("g",{clipPath:"url(#clip0_880_5115)"},J.createElement("path",{d:"M65.5769 28.1523H31.4231C27.6057 28.1523 24.5 31.258 24.5 35.0754V60.9215C24.5 64.7389 27.6057 67.8446 31.4231 67.8446H65.5769C69.3943 67.8446 72.5 64.7389 72.5 60.9215V35.0754C72.5 31.258 69.3943 28.1523 65.5769 28.1523ZM69.7308 52.1523H59.5769C57.2865 52.1523 55.4231 50.289 55.4231 47.9985C55.4231 45.708 57.2864 43.8446 59.5769 43.8446H69.7308V52.1523ZM69.7308 41.0754H59.5769C55.7595 41.0754 52.6539 44.1811 52.6539 47.9985C52.6539 51.8159 55.7595 54.9215 59.5769 54.9215H69.7308V60.9215C69.7308 63.2119 67.8674 65.0754 65.5769 65.0754H31.4231C29.1327 65.0754 27.2692 63.212 27.2692 60.9215V35.0754C27.2692 32.785 29.1326 30.9215 31.4231 30.9215H65.5769C67.8673 30.9215 69.7308 32.7849 69.7308 35.0754V41.0754Z",fill:"url(#paint2_linear_880_5115)"}),J.createElement("path",{d:"M61.4231 46.6172H59.577C58.8123 46.6172 58.1924 47.2371 58.1924 48.0018C58.1924 48.7665 58.8123 49.3863 59.577 49.3863H61.4231C62.1878 49.3863 62.8077 48.7664 62.8077 48.0018C62.8077 47.2371 62.1878 46.6172 61.4231 46.6172Z",fill:"url(#paint3_linear_880_5115)"})),J.createElement("defs",null,J.createElement("linearGradient",{id:"paint0_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},J.createElement("stop",{stopColor:"#9945FF"}),J.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),J.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),J.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),J.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),J.createElement("stop",{offset:"1",stopColor:"#00D18C"})),J.createElement("linearGradient",{id:"paint1_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},J.createElement("stop",{stopColor:"#9945FF"}),J.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),J.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),J.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),J.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),J.createElement("stop",{offset:"1",stopColor:"#00D18C"})),J.createElement("linearGradient",{id:"paint2_linear_880_5115",x1:"25.9583",y1:"68.7101",x2:"67.2337",y2:"23.7879",gradientUnits:"userSpaceOnUse"},J.createElement("stop",{stopColor:"#9945FF"}),J.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),J.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),J.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),J.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),J.createElement("stop",{offset:"1",stopColor:"#00D18C"})),J.createElement("linearGradient",{id:"paint3_linear_880_5115",x1:"58.3326",y1:"49.4467",x2:"61.0002",y2:"45.4453",gradientUnits:"userSpaceOnUse"},J.createElement("stop",{stopColor:"#9945FF"}),J.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),J.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),J.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),J.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),J.createElement("stop",{offset:"1",stopColor:"#00D18C"})),J.createElement("clipPath",{id:"clip0_880_5115"},J.createElement("rect",{width:"48",height:"48",fill:"white",transform:"translate(24.5 24)"})))),V1=({className:n="",container:e="body"})=>{const t=I.useRef(null),{wallets:r,select:s}=$o(),{setVisible:i}=j0(),[o,a]=I.useState(!1),[c,d]=I.useState(!1),[h,p]=I.useState(null),[x,y]=I.useMemo(()=>{const M=[],O=[];for(const B of r)B.readyState===be.Installed?M.push(B):O.push(B);return M.length?[M,O]:[O,[]]},[r]),E=I.useCallback(()=>{d(!1),setTimeout(()=>i(!1),150)},[i]),g=I.useCallback(M=>{M.preventDefault(),E()},[E]),S=I.useCallback((M,O)=>{s(O),g(M)},[s,g]),A=I.useCallback(()=>a(!o),[o]),k=I.useCallback(M=>{const O=t.current;if(!O)return;const B=O.querySelectorAll("button"),z=B[0],V=B[B.length-1];M.shiftKey?document.activeElement===z&&(V.focus(),M.preventDefault()):document.activeElement===V&&(z.focus(),M.preventDefault())},[t]);return I.useLayoutEffect(()=>{const M=B=>{B.key==="Escape"?E():B.key==="Tab"&&k(B)},{overflow:O}=window.getComputedStyle(document.body);return setTimeout(()=>d(!0),0),document.body.style.overflow="hidden",window.addEventListener("keydown",M,!1),()=>{document.body.style.overflow=O,window.removeEventListener("keydown",M,!1)}},[E,k]),I.useLayoutEffect(()=>p(document.querySelector(e)),[e]),h&&Zh.createPortal(J.createElement("div",{"aria-labelledby":"wallet-adapter-modal-title","aria-modal":"true",className:`wallet-adapter-modal ${c&&"wallet-adapter-modal-fade-in"} ${n}`,ref:t,role:"dialog"},J.createElement("div",{className:"wallet-adapter-modal-container"},J.createElement("div",{className:"wallet-adapter-modal-wrapper"},J.createElement("button",{onClick:g,className:"wallet-adapter-modal-button-close"},J.createElement("svg",{width:"14",height:"14"},J.createElement("path",{d:"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z"}))),x.length?J.createElement(J.Fragment,null,J.createElement("h1",{className:"wallet-adapter-modal-title"},"Connect a wallet on Solana to continue"),J.createElement("ul",{className:"wallet-adapter-modal-list"},x.map(M=>J.createElement(Cc,{key:M.adapter.name,handleClick:O=>S(O,M.adapter.name),wallet:M})),y.length?J.createElement(xh,{expanded:o,id:"wallet-adapter-modal-collapse"},y.map(M=>J.createElement(Cc,{key:M.adapter.name,handleClick:O=>S(O,M.adapter.name),tabIndex:o?0:-1,wallet:M}))):null),y.length?J.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:A,tabIndex:0},J.createElement("span",null,o?"Less ":"More ","options"),J.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${o?"wallet-adapter-modal-list-more-icon-rotate":""}`},J.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))):null):J.createElement(J.Fragment,null,J.createElement("h1",{className:"wallet-adapter-modal-title"},"You'll need a wallet on Solana to continue"),J.createElement("div",{className:"wallet-adapter-modal-middle"},J.createElement(K1,null)),y.length?J.createElement(J.Fragment,null,J.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:A,tabIndex:0},J.createElement("span",null,o?"Hide ":"Already have a wallet? View ","options"),J.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${o?"wallet-adapter-modal-list-more-icon-rotate":""}`},J.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))),J.createElement(xh,{expanded:o,id:"wallet-adapter-modal-collapse"},J.createElement("ul",{className:"wallet-adapter-modal-list"},y.map(M=>J.createElement(Cc,{key:M.adapter.name,handleClick:O=>S(O,M.adapter.name),tabIndex:o?0:-1,wallet:M}))))):null))),J.createElement("div",{className:"wallet-adapter-modal-overlay",onMouseDown:g})),h)},G1=({children:n,...e})=>{const[t,r]=I.useState(!1);return J.createElement(M0.Provider,{value:{visible:t,setVisible:r}},n,t&&J.createElement(V1,{...e}))},Y1={"change-wallet":"Change wallet",connecting:"Connecting ...","copy-address":"Copy address",copied:"Copied",disconnect:"Disconnect","has-wallet":"Connect","no-wallet":"Select Wallet"};function Q1(n){return J.createElement(H1,{...n,labels:Y1})}const Z1=()=>{const[n,e]=I.useState(!0),[t,r]=I.useState({name:"",email:"",password:"",confirmPassword:""}),[s,i]=I.useState(null),[o,a]=I.useState(!1),{login:c,isAuthenticated:d}=Ct(),h=Eo();I.useEffect(()=>{d&&h("/dashboard")},[d,h]);const p=async x=>{x.preventDefault(),i(null),a(!0);try{if(n)await c(t.email,t.password);else{if(t.password!==t.confirmPassword)throw new Error("Passwords do not match");const y=await fetch("http://localhost:4000/api/v1/users/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.name,email:t.email,password:t.password})});if(!y.ok){const E=await y.json();throw new Error(E.message||"Registration failed")}await c(t.email,t.password)}}catch(y){i(y instanceof Error?y.message:"Authentication failed")}finally{a(!1)}};return l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"max-w-md w-full space-y-8",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-white",children:n?"Sign in to your account":"Create a new account"}),l.jsxs("p",{className:"mt-2 text-center text-sm text-gray-400",children:["Or"," ",l.jsx("button",{onClick:()=>e(!n),className:"font-medium text-blue-500 hover:text-blue-400",children:n?"create a new account":"sign in to existing account"})]})]}),s&&l.jsx("div",{className:"bg-red-500/10 border border-red-500/50 rounded-lg p-4",children:l.jsx("p",{className:"text-red-500 text-sm",children:s})}),l.jsxs("form",{className:"mt-8 space-y-6",onSubmit:p,children:[!n&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"name",className:"sr-only",children:"Name"}),l.jsx("input",{id:"name",name:"name",type:"text",required:!0,className:`appearance-none rounded-lg relative block w-full px-3 py-2 border
                  border-gray-700 bg-gray-800 text-white placeholder-gray-400
                  focus:outline-none focus:ring-blue-500 focus:border-blue-500`,placeholder:"Name",value:t.name,onChange:x=>r({...t,name:x.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),l.jsx("input",{id:"email",name:"email",type:"email",required:!0,className:`appearance-none rounded-lg relative block w-full px-3 py-2 border
                border-gray-700 bg-gray-800 text-white placeholder-gray-400
                focus:outline-none focus:ring-blue-500 focus:border-blue-500`,placeholder:"Email address",value:t.email,onChange:x=>r({...t,email:x.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),l.jsx("input",{id:"password",name:"password",type:"password",required:!0,className:`appearance-none rounded-lg relative block w-full px-3 py-2 border
                border-gray-700 bg-gray-800 text-white placeholder-gray-400
                focus:outline-none focus:ring-blue-500 focus:border-blue-500`,placeholder:"Password",value:t.password,onChange:x=>r({...t,password:x.target.value})})]}),!n&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"confirmPassword",className:"sr-only",children:"Confirm Password"}),l.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,className:`appearance-none rounded-lg relative block w-full px-3 py-2 border
                  border-gray-700 bg-gray-800 text-white placeholder-gray-400
                  focus:outline-none focus:ring-blue-500 focus:border-blue-500`,placeholder:"Confirm Password",value:t.confirmPassword,onChange:x=>r({...t,confirmPassword:x.target.value})})]}),l.jsx("button",{type:"submit",className:`group relative w-full flex justify-center py-2 px-4 border border-transparent
              text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700
              focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500`,children:n?"Sign in":"Create account"})]})]})})},J1="_sidebar_upg8f_1",X1="_navItem_upg8f_8",ev="_userCard_upg8f_16",vh={sidebar:J1,navItem:X1,userCard:ev},tv=({isOpen:n,onClose:e,isMobile:t})=>{var h;const r=Bl(),s=Eo(),{user:i,logout:o}=Ct(),a=async()=>{await o(),s("/login")},c=[{name:"Overview",path:"/dashboard",icon:"grid"},{name:"Wallet",path:"/wallet",icon:"wallet"},{name:"NFT Assets",path:"/nft-assets",icon:"cube"},{name:"Create Token",path:"/token-creator",icon:"plus-circle"},{name:"Tokenomics",path:"/tokenomics",icon:"plus-circle"},{name:"My Jobs",path:"/jobs",icon:"briefcase"},{name:"Marketplace",path:"/marketplace",icon:"shopping-cart"},{name:"Forum",path:"/forum",icon:"chat"},{name:"Settings",path:"/settings",icon:"cog"}],d=`
    fixed lg:relative w-64 h-full bg-gray-800 p-4 transition-transform duration-300 ease-in-out z-40
    ${t?n?"translate-x-0":"-translate-x-full":"translate-x-0"}
    ${t?"top-16":"top-0"}
  `;return l.jsxs("div",{className:d,children:[!t&&l.jsx("div",{className:"text-2xl font-bold text-blue-400 mb-8",children:"XRWebsites.io"}),l.jsx("div",{className:`${vh.userCard} mb-6 p-4`,children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center",children:l.jsx("span",{className:"text-white font-bold",children:((h=i==null?void 0:i.fullName)==null?void 0:h.charAt(0))||"U"})}),l.jsxs("div",{children:[l.jsx("div",{className:"text-white font-medium",children:i==null?void 0:i.fullName}),l.jsx("div",{className:"text-sm text-gray-400",children:i==null?void 0:i.email})]})]})}),l.jsxs("nav",{className:"space-y-2",children:[c.map(p=>l.jsx(No,{to:p.path,onClick:e,className:`${vh.navItem} block p-2 rounded ${r.pathname===p.path?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"}`,children:p.name},p.path)),l.jsx("button",{onClick:a,className:"w-full mt-4 p-2 rounded bg-red-600 hover:bg-red-700 text-white transition-all hover:-translate-y-0.5",children:"Logout"})]})]})};let nv={data:""},rv=n=>typeof window=="object"?((n?n.querySelector("#_goober"):window._goober)||Object.assign((n||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:n||nv,sv=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,iv=/\/\*[^]*?\*\/|  +/g,Sh=/\n+/g,lr=(n,e)=>{let t="",r="",s="";for(let i in n){let o=n[i];i[0]=="@"?i[1]=="i"?t=i+" "+o+";":r+=i[1]=="f"?lr(o,i):i+"{"+lr(o,i[1]=="k"?"":e)+"}":typeof o=="object"?r+=lr(o,e?e.replace(/([^,])+/g,a=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,a):a?a+" "+c:c)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=lr.p?lr.p(i,o):i+":"+o+";")}return t+(e&&s?e+"{"+s+"}":s)+r},Rn={},C0=n=>{if(typeof n=="object"){let e="";for(let t in n)e+=t+C0(n[t]);return e}return n},ov=(n,e,t,r,s)=>{let i=C0(n),o=Rn[i]||(Rn[i]=(c=>{let d=0,h=11;for(;d<c.length;)h=101*h+c.charCodeAt(d++)>>>0;return"go"+h})(i));if(!Rn[o]){let c=i!==n?n:(d=>{let h,p,x=[{}];for(;h=sv.exec(d.replace(iv,""));)h[4]?x.shift():h[3]?(p=h[3].replace(Sh," ").trim(),x.unshift(x[0][p]=x[0][p]||{})):x[0][h[1]]=h[2].replace(Sh," ").trim();return x[0]})(n);Rn[o]=lr(s?{["@keyframes "+o]:c}:c,t?"":"."+o)}let a=t&&Rn.g?Rn.g:null;return t&&(Rn.g=Rn[o]),((c,d,h,p)=>{p?d.data=d.data.replace(p,c):d.data.indexOf(c)===-1&&(d.data=h?c+d.data:d.data+c)})(Rn[o],e,r,a),o},av=(n,e,t)=>n.reduce((r,s,i)=>{let o=e[i];if(o&&o.call){let a=o(t),c=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=c?"."+c:a&&typeof a=="object"?a.props?"":lr(a,""):a===!1?"":a}return r+s+(o??"")},"");function Wo(n){let e=this||{},t=n.call?n(e.p):n;return ov(t.unshift?t.raw?av(t,[].slice.call(arguments,1),e.p):t.reduce((r,s)=>Object.assign(r,s&&s.call?s(e.p):s),{}):t,rv(e.target),e.g,e.o,e.k)}let T0,Ml,jl;Wo.bind({g:1});let er=Wo.bind({k:1});function cv(n,e,t,r){lr.p=e,T0=n,Ml=t,jl=r}function Ar(n,e){let t=this||{};return function(){let r=arguments;function s(i,o){let a=Object.assign({},i),c=a.className||s.className;t.p=Object.assign({theme:Ml&&Ml()},a),t.o=/ *go\d+/.test(c),a.className=Wo.apply(t,r)+(c?" "+c:"");let d=n;return n[0]&&(d=a.as||n,delete a.as),jl&&d[0]&&jl(a),T0(d,a)}return s}}var lv=n=>typeof n=="function",bo=(n,e)=>lv(n)?n(e):n,uv=(()=>{let n=0;return()=>(++n).toString()})(),_0=(()=>{let n;return()=>{if(n===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");n=!e||e.matches}return n}})(),dv=20,k0=(n,e)=>{switch(e.type){case 0:return{...n,toasts:[e.toast,...n.toasts].slice(0,dv)};case 1:return{...n,toasts:n.toasts.map(i=>i.id===e.toast.id?{...i,...e.toast}:i)};case 2:let{toast:t}=e;return k0(n,{type:n.toasts.find(i=>i.id===t.id)?1:0,toast:t});case 3:let{toastId:r}=e;return{...n,toasts:n.toasts.map(i=>i.id===r||r===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(i=>i.id!==e.toastId)};case 5:return{...n,pausedAt:e.time};case 6:let s=e.time-(n.pausedAt||0);return{...n,pausedAt:void 0,toasts:n.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+s}))}}},to=[],no={toasts:[],pausedAt:void 0},cs=n=>{no=k0(no,n),to.forEach(e=>{e(no)})},hv={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},fv=(n={})=>{let[e,t]=I.useState(no);I.useEffect(()=>(to.push(t),()=>{let s=to.indexOf(t);s>-1&&to.splice(s,1)}),[e]);let r=e.toasts.map(s=>{var i,o,a;return{...n,...n[s.type],...s,removeDelay:s.removeDelay||((i=n[s.type])==null?void 0:i.removeDelay)||(n==null?void 0:n.removeDelay),duration:s.duration||((o=n[s.type])==null?void 0:o.duration)||(n==null?void 0:n.duration)||hv[s.type],style:{...n.style,...(a=n[s.type])==null?void 0:a.style,...s.style}}});return{...e,toasts:r}},pv=(n,e="blank",t)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:n,pauseDuration:0,...t,id:(t==null?void 0:t.id)||uv()}),ji=n=>(e,t)=>{let r=pv(e,n,t);return cs({type:2,toast:r}),r.id},rt=(n,e)=>ji("blank")(n,e);rt.error=ji("error");rt.success=ji("success");rt.loading=ji("loading");rt.custom=ji("custom");rt.dismiss=n=>{cs({type:3,toastId:n})};rt.remove=n=>cs({type:4,toastId:n});rt.promise=(n,e,t)=>{let r=rt.loading(e.loading,{...t,...t==null?void 0:t.loading});return typeof n=="function"&&(n=n()),n.then(s=>{let i=e.success?bo(e.success,s):void 0;return i?rt.success(i,{id:r,...t,...t==null?void 0:t.success}):rt.dismiss(r),s}).catch(s=>{let i=e.error?bo(e.error,s):void 0;i?rt.error(i,{id:r,...t,...t==null?void 0:t.error}):rt.dismiss(r)}),n};var mv=(n,e)=>{cs({type:1,toast:{id:n,height:e}})},gv=()=>{cs({type:5,time:Date.now()})},ai=new Map,yv=1e3,wv=(n,e=yv)=>{if(ai.has(n))return;let t=setTimeout(()=>{ai.delete(n),cs({type:4,toastId:n})},e);ai.set(n,t)},bv=n=>{let{toasts:e,pausedAt:t}=fv(n);I.useEffect(()=>{if(t)return;let i=Date.now(),o=e.map(a=>{if(a.duration===1/0)return;let c=(a.duration||0)+a.pauseDuration-(i-a.createdAt);if(c<0){a.visible&&rt.dismiss(a.id);return}return setTimeout(()=>rt.dismiss(a.id),c)});return()=>{o.forEach(a=>a&&clearTimeout(a))}},[e,t]);let r=I.useCallback(()=>{t&&cs({type:6,time:Date.now()})},[t]),s=I.useCallback((i,o)=>{let{reverseOrder:a=!1,gutter:c=8,defaultPosition:d}=o||{},h=e.filter(y=>(y.position||d)===(i.position||d)&&y.height),p=h.findIndex(y=>y.id===i.id),x=h.filter((y,E)=>E<p&&y.visible).length;return h.filter(y=>y.visible).slice(...a?[x+1]:[0,x]).reduce((y,E)=>y+(E.height||0)+c,0)},[e]);return I.useEffect(()=>{e.forEach(i=>{if(i.dismissed)wv(i.id,i.removeDelay);else{let o=ai.get(i.id);o&&(clearTimeout(o),ai.delete(i.id))}})},[e]),{toasts:e,handlers:{updateHeight:mv,startPause:gv,endPause:r,calculateOffset:s}}},xv=er`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,vv=er`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Sv=er`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Ev=Ar("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${xv} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${vv} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${n=>n.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Sv} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Nv=er`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Mv=Ar("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${n=>n.secondary||"#e0e0e0"};
  border-right-color: ${n=>n.primary||"#616161"};
  animation: ${Nv} 1s linear infinite;
`,jv=er`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Av=er`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Iv=Ar("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${jv} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Av} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${n=>n.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Cv=Ar("div")`
  position: absolute;
`,Tv=Ar("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,_v=er`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,kv=Ar("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${_v} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Lv=({toast:n})=>{let{icon:e,type:t,iconTheme:r}=n;return e!==void 0?typeof e=="string"?I.createElement(kv,null,e):e:t==="blank"?null:I.createElement(Tv,null,I.createElement(Mv,{...r}),t!=="loading"&&I.createElement(Cv,null,t==="error"?I.createElement(Ev,{...r}):I.createElement(Iv,{...r})))},Rv=n=>`
0% {transform: translate3d(0,${n*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Bv=n=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${n*-150}%,-1px) scale(.6); opacity:0;}
`,Ov="0%{opacity:0;} 100%{opacity:1;}",Dv="0%{opacity:1;} 100%{opacity:0;}",Pv=Ar("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Fv=Ar("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Uv=(n,e)=>{let t=n.includes("top")?1:-1,[r,s]=_0()?[Ov,Dv]:[Rv(t),Bv(t)];return{animation:e?`${er(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${er(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},zv=I.memo(({toast:n,position:e,style:t,children:r})=>{let s=n.height?Uv(n.position||e||"top-center",n.visible):{opacity:0},i=I.createElement(Lv,{toast:n}),o=I.createElement(Fv,{...n.ariaProps},bo(n.message,n));return I.createElement(Pv,{className:n.className,style:{...s,...t,...n.style}},typeof r=="function"?r({icon:i,message:o}):I.createElement(I.Fragment,null,i,o))});cv(I.createElement);var $v=({id:n,className:e,style:t,onHeightUpdate:r,children:s})=>{let i=I.useCallback(o=>{if(o){let a=()=>{let c=o.getBoundingClientRect().height;r(n,c)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[n,r]);return I.createElement("div",{ref:i,className:e,style:t},s)},qv=(n,e)=>{let t=n.includes("top"),r=t?{top:0}:{bottom:0},s=n.includes("center")?{justifyContent:"center"}:n.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:_0()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(t?1:-1)}px)`,...r,...s}},Wv=Wo`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,$i=16,Hv=({reverseOrder:n,position:e="top-center",toastOptions:t,gutter:r,children:s,containerStyle:i,containerClassName:o})=>{let{toasts:a,handlers:c}=bv(t);return I.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:$i,left:$i,right:$i,bottom:$i,pointerEvents:"none",...i},className:o,onMouseEnter:c.startPause,onMouseLeave:c.endPause},a.map(d=>{let h=d.position||e,p=c.calculateOffset(d,{reverseOrder:n,gutter:r,defaultPosition:e}),x=qv(h,p);return I.createElement($v,{id:d.id,key:d.id,onHeightUpdate:c.updateHeight,className:d.visible?Wv:"",style:x},d.type==="custom"?bo(d.message,d):s?s(d):I.createElement(zv,{toast:d,position:h}))}))},Tc=rt;const hn=({children:n})=>{const[e,t]=I.useState(window.innerWidth<1024),[r,s]=I.useState(!e);I.useEffect(()=>{const o=()=>{const a=window.innerWidth<1024;t(a),s(!a)};return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[]);const i=()=>{s(!r)};return l.jsxs("div",{className:"min-h-screen flex bg-gray-900",children:[l.jsx(Hv,{position:"top-right",toastOptions:{className:"",style:{background:"#374151",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#10B981",secondary:"#fff"}},error:{duration:4e3,iconTheme:{primary:"#EF4444",secondary:"#fff"}}}}),l.jsxs("div",{className:"lg:hidden fixed top-0 left-0 right-0 h-16 bg-gray-800 z-40 px-4 flex items-center justify-between",children:[l.jsx("div",{className:"text-xl font-bold text-blue-400",children:"XRWebsites.io"}),l.jsx("button",{className:"p-2 rounded-lg bg-gray-700 text-white",onClick:i,children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r?l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),l.jsx(tv,{isOpen:r,onClose:()=>s(!1),isMobile:e}),l.jsx("div",{className:`flex-1 transition-all duration-300 ${e?"pt-16":""}`,children:n}),e&&r&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30",onClick:()=>s(!1)})]})},Kv=()=>{const{user:n}=Ct(),[e,t]=I.useState({totalNFTs:0,activeJobs:0}),[r,s]=I.useState(!0),[i,o]=I.useState({id:"",balance:"0.00",totalTokens:0,transactions:[]}),[a,c]=I.useState({assets:[],jobPostings:[],jobApplications:[],forumActivity:[],reviews:[]}),d=async()=>{var p;try{const x=await fetch("http://localhost:4000/api/v1/wallet",{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,Accept:"application/json"},credentials:"include"});if(!x.ok)throw new Error("Failed to load wallet data");const{data:y}=await x.json();return o({id:y.id,balance:y.balance||"0.00",totalTokens:((p=y.linked_accounts)==null?void 0:p.length)||0,transactions:y.transactions||[]}),y.id}catch(x){return console.error("Error loading wallet:",x),null}},h=async()=>{var p,x;if(n!=null&&n.id)try{const y=await fetch("http://localhost:4000/api/v1/users/dashboard",{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,Accept:"application/json"}});if(!y.ok)throw new Error("Failed to load dashboard data");const E=await y.json();c(E.data.recentActivity);const g=await fetch(`http://localhost:4000/api/v1/jobs/user/${n.id}/active`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,Accept:"application/json"}}),S=await d();let A=0;if(S){const M=await fetch(`http://localhost:4000/api/v1/wallet/wallet/${S}/nfts`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,Accept:"application/json"},credentials:"include"});if(M.ok){const O=await M.json(),B=((p=O.data)==null?void 0:p.nfts)||O.data||[];A=Array.isArray(B)?B.length:0}}const k=await g.json();t({activeJobs:((x=k.data.jobs)==null?void 0:x.length)||0,totalNFTs:A})}catch(y){console.error("Error loading dashboard stats:",y)}finally{s(!1)}};return I.useEffect(()=>{h()},[n==null?void 0:n.id]),l.jsx(hn,{children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-8",children:[l.jsxs("h1",{className:"text-2xl font-bold text-white mb-2",children:["Welcome back, ",n==null?void 0:n.fullName,"!"]}),l.jsx("p",{className:"text-gray-400",children:"Here's what's happening with your XRWebsites account today."})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[l.jsx("div",{className:"text-sm font-medium text-gray-400 mb-2",children:"Total NFTs"}),l.jsx("div",{className:"text-2xl font-bold text-white",children:r?"...":e.totalNFTs})]}),l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[l.jsx("div",{className:"text-sm font-medium text-gray-400 mb-2",children:"Active Jobs"}),l.jsx("div",{className:"text-2xl font-bold text-white",children:r?"...":e.activeJobs})]}),l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[l.jsx("div",{className:"text-sm font-medium text-gray-400 mb-2",children:"Wallet Balance (USD)"}),l.jsxs("div",{className:"text-2xl font-bold text-white",children:["$",r?"...":i.balance]})]}),l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[l.jsx("div",{className:"text-sm font-medium text-gray-400 mb-2",children:"Visorcoin Balance (XRV)"}),l.jsxs("div",{className:"text-2xl font-bold text-white",children:[r?"...":i.totalTokens," XRV"]})]})]}),l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Recent Activity"}),r?l.jsx("div",{className:"text-center py-8",children:l.jsx("span",{className:"text-gray-400",children:"Loading activity..."})}):l.jsxs("div",{className:"space-y-6",children:[Object.entries(a).map(([p,x])=>x.length>0&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-white capitalize",children:p.replace(/([A-Z])/g," $1").trim()}),l.jsx("div",{className:"space-y-2",children:x.map(y=>l.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-white",children:y.title||y.name||`${p} Activity`}),l.jsx("div",{className:"text-sm text-gray-400",children:new Date(y.createdAt).toLocaleDateString()})]}),y.status&&l.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${y.status==="completed"?"bg-green-500/20 text-green-400":y.status==="pending"?"bg-yellow-500/20 text-yellow-400":"bg-blue-500/20 text-blue-400"}`,children:y.status})]},y.id))})]},p)),Object.values(a).every(p=>p.length===0)&&l.jsx("div",{className:"text-gray-400 text-center py-8",children:"No recent activity to show."})]})]})]})})},L0=({nfts:n,isLoading:e,onViewDetails:t,compact:r=!1,title:s="Your NFTs"})=>{const i="/assets/images/placeholder-nft.jpg",[o,a]=I.useState({}),c=(p,x)=>{p.currentTarget.src=i,a(y=>({...y,[x]:!0})),p.currentTarget.onerror=null},d=p=>{a(x=>({...x,[p]:!0}))},h=p=>{var x,y,E;return((x=p.metadata)==null?void 0:x.imageUrl)||((y=p.metadata)==null?void 0:y.image_url)||((E=p.metadata)==null?void 0:E.image)||p.image_url||p.imageUrl||p.image||i};return l.jsx("div",{className:"w-full",children:l.jsx("div",{className:`${r?"h-[300px]":"h-[400px]"} overflow-y-auto`,children:e?l.jsx("div",{className:"flex items-center justify-center h-full",children:l.jsx("span",{className:"text-gray-400",children:"Loading NFTs..."})}):!n||n.length===0?l.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[l.jsx("p",{className:"text-gray-400 mb-4",children:"No NFTs found in your collection"}),l.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 px-6 py-2 rounded-lg text-white transition-colors",children:"Mint Your First NFT"})]}):l.jsx("div",{className:"flex gap-6 overflow-x-auto pb-4 scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-gray-800",children:n.map(p=>{var x,y,E,g;return l.jsxs("div",{className:"flex-none w-[280px] bg-gray-700 rounded-lg overflow-hidden hover:shadow-lg transition-all hover:-translate-y-1",children:[l.jsxs("div",{className:"aspect-square bg-gray-800 relative",children:[!o[p.id]&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-800",children:l.jsx("div",{className:"w-8 h-8 border-2 border-blue-400 border-t-transparent rounded-full animate-spin"})}),l.jsx("img",{src:h(p),alt:((x=p.metadata)==null?void 0:x.name)||p.name||"NFT Image",className:`w-full h-full object-cover transition-opacity duration-300 ${o[p.id]?"opacity-100":"opacity-0"}`,onError:S=>c(S,p.id),onLoad:()=>d(p.id),loading:"lazy"})]}),l.jsxs("div",{className:"p-4",children:[l.jsx("h4",{className:"text-white font-medium text-lg mb-1 truncate",children:((y=p.metadata)==null?void 0:y.name)||p.name||"Unnamed NFT"}),l.jsx("p",{className:"text-gray-400 text-sm line-clamp-2 mb-3",children:((E=p.metadata)==null?void 0:E.description)||p.description||"No description available"}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("span",{className:"text-blue-400 font-bold",children:["$",(((g=p.metadata)==null?void 0:g.value)||p.value||0).toFixed(2)]}),l.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg text-sm text-white transition-colors",onClick:()=>t==null?void 0:t(p),children:"View Details"})]})]})]},p.id)})})})})};var R0="https://js.stripe.com/v3",Vv=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/;var Gv=function(){for(var e=document.querySelectorAll('script[src^="'.concat(R0,'"]')),t=0;t<e.length;t++){var r=e[t];if(Vv.test(r.src))return r}return null},Eh=function(e){var t="",r=document.createElement("script");r.src="".concat(R0).concat(t);var s=document.head||document.body;if(!s)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return s.appendChild(r),r},Yv=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"5.6.0",startTime:t})},Js=null,qi=null,Wi=null,Qv=function(e){return function(){e(new Error("Failed to load Stripe.js"))}},Zv=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}},Jv=function(e){return Js!==null?Js:(Js=new Promise(function(t,r){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe){t(window.Stripe);return}try{var s=Gv();if(!(s&&e)){if(!s)s=Eh(e);else if(s&&Wi!==null&&qi!==null){var i;s.removeEventListener("load",Wi),s.removeEventListener("error",qi),(i=s.parentNode)===null||i===void 0||i.removeChild(s),s=Eh(e)}}Wi=Zv(t,r),qi=Qv(r),s.addEventListener("load",Wi),s.addEventListener("error",qi)}catch(o){r(o);return}}),Js.catch(function(t){return Js=null,Promise.reject(t)}))},Xv=function(e,t,r){if(e===null)return null;var s=e.apply(void 0,t);return Yv(s,r),s},Xs,B0=!1,O0=function(){return Xs||(Xs=Jv(null).catch(function(e){return Xs=null,Promise.reject(e)}),Xs)};Promise.resolve().then(function(){return O0()}).catch(function(n){B0||console.warn(n)});var eS=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];B0=!0;var s=Date.now();return O0().then(function(i){return Xv(i,t,s)})},_c={exports:{}},kc,Nh;function tS(){if(Nh)return kc;Nh=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return kc=n,kc}var Lc,Mh;function nS(){if(Mh)return Lc;Mh=1;var n=tS();function e(){}function t(){}return t.resetWarningCache=e,Lc=function(){function r(o,a,c,d,h,p){if(p!==n){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}r.isRequired=r;function s(){return r}var i={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:t,resetWarningCache:e};return i.PropTypes=i,i},Lc}var jh;function rS(){return jh||(jh=1,_c.exports=nS()()),_c.exports}var sS=rS();const Qe=jr(sS);function Ah(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function Ih(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ah(Object(t),!0).forEach(function(r){D0(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Ah(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function ro(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ro=function(e){return typeof e}:ro=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ro(n)}function D0(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function P0(n,e){return iS(n)||oS(n,e)||aS(n,e)||cS()}function iS(n){if(Array.isArray(n))return n}function oS(n,e){var t=n&&(typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"]);if(t!=null){var r=[],s=!0,i=!1,o,a;try{for(t=t.call(n);!(s=(o=t.next()).done)&&(r.push(o.value),!(e&&r.length===e));s=!0);}catch(c){i=!0,a=c}finally{try{!s&&t.return!=null&&t.return()}finally{if(i)throw a}}return r}}function aS(n,e){if(n){if(typeof n=="string")return Ch(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ch(n,e)}}function Ch(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function cS(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var nn=function(e,t,r){var s=!!r,i=J.useRef(r);J.useEffect(function(){i.current=r},[r]),J.useEffect(function(){if(!s||!e)return function(){};var o=function(){i.current&&i.current.apply(i,arguments)};return e.on(t,o),function(){e.off(t,o)}},[s,t,e,i])},Al=function(e){var t=J.useRef(e);return J.useEffect(function(){t.current=e},[e]),t.current},zs=function(e){return e!==null&&ro(e)==="object"},lS=function(e){return zs(e)&&typeof e.then=="function"},uS=function(e){return zs(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},Th="[object Object]",dS=function n(e,t){if(!zs(e)||!zs(t))return e===t;var r=Array.isArray(e),s=Array.isArray(t);if(r!==s)return!1;var i=Object.prototype.toString.call(e)===Th,o=Object.prototype.toString.call(t)===Th;if(i!==o)return!1;if(!i&&!r)return e===t;var a=Object.keys(e),c=Object.keys(t);if(a.length!==c.length)return!1;for(var d={},h=0;h<a.length;h+=1)d[a[h]]=!0;for(var p=0;p<c.length;p+=1)d[c[p]]=!0;var x=Object.keys(d);if(x.length!==a.length)return!1;var y=e,E=t,g=function(A){return n(y[A],E[A])};return x.every(g)},F0=function(e,t,r){return zs(e)?Object.keys(e).reduce(function(s,i){var o=!zs(t)||!dS(e[i],t[i]);return r.includes(i)?(o&&console.warn("Unsupported prop change: options.".concat(i," is not a mutable property.")),s):o?Ih(Ih({},s||{}),{},D0({},i,e[i])):s},null):null},U0="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",_h=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:U0;if(e===null||uS(e))return e;throw new Error(t)},hS=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:U0;if(lS(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(s){return _h(s,t)})};var r=_h(e,t);return r===null?{tag:"empty"}:{tag:"sync",stripe:r}},fS=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"3.1.0"}),e.registerAppInfo({name:"react-stripe-js",version:"3.1.0",url:"https://stripe.com/docs/stripe-js/react"}))},Ho=J.createContext(null);Ho.displayName="ElementsContext";var z0=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},$0=function(e){var t=e.stripe,r=e.options,s=e.children,i=J.useMemo(function(){return hS(t)},[t]),o=J.useState(function(){return{stripe:i.tag==="sync"?i.stripe:null,elements:i.tag==="sync"?i.stripe.elements(r):null}}),a=P0(o,2),c=a[0],d=a[1];J.useEffect(function(){var x=!0,y=function(g){d(function(S){return S.stripe?S:{stripe:g,elements:g.elements(r)}})};return i.tag==="async"&&!c.stripe?i.stripePromise.then(function(E){E&&x&&y(E)}):i.tag==="sync"&&!c.stripe&&y(i.stripe),function(){x=!1}},[i,c,r]);var h=Al(t);J.useEffect(function(){h!==null&&h!==t&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[h,t]);var p=Al(r);return J.useEffect(function(){if(c.elements){var x=F0(r,p,["clientSecret","fonts"]);x&&c.elements.update(x)}},[r,p,c.elements]),J.useEffect(function(){fS(c.stripe)},[c.stripe]),J.createElement(Ho.Provider,{value:c},s)};$0.propTypes={stripe:Qe.any,options:Qe.object};var pS=function(e){var t=J.useContext(Ho);return z0(t,e)},mS=function(){var e=pS("calls useElements()"),t=e.elements;return t};Qe.func.isRequired;var q0=J.createContext(null);q0.displayName="CheckoutSdkContext";var gS=function(e,t){if(!e)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(t," in an <CheckoutProvider> provider."));return e},yS=J.createContext(null);yS.displayName="CheckoutContext";Qe.any,Qe.shape({clientSecret:Qe.string.isRequired,elementsOptions:Qe.object}).isRequired;var Il=function(e){var t=J.useContext(q0),r=J.useContext(Ho);if(t&&r)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return t?gS(t,e):z0(r,e)},wS=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},jt=function(e,t){var r="".concat(wS(e),"Element"),s=function(c){var d=c.id,h=c.className,p=c.options,x=p===void 0?{}:p,y=c.onBlur,E=c.onFocus,g=c.onReady,S=c.onChange,A=c.onEscape,k=c.onClick,M=c.onLoadError,O=c.onLoaderStart,B=c.onNetworksChange,z=c.onConfirm,V=c.onCancel,H=c.onShippingAddressChange,F=c.onShippingRateChange,$=Il("mounts <".concat(r,">")),q="elements"in $?$.elements:null,Y="checkoutSdk"in $?$.checkoutSdk:null,_=J.useState(null),u=P0(_,2),b=u[0],N=u[1],j=J.useRef(null),R=J.useRef(null);nn(b,"blur",y),nn(b,"focus",E),nn(b,"escape",A),nn(b,"click",k),nn(b,"loaderror",M),nn(b,"loaderstart",O),nn(b,"networkschange",B),nn(b,"confirm",z),nn(b,"cancel",V),nn(b,"shippingaddresschange",H),nn(b,"shippingratechange",F),nn(b,"change",S);var U;g&&(e==="expressCheckout"?U=g:U=function(){g(b)}),nn(b,"ready",U),J.useLayoutEffect(function(){if(j.current===null&&R.current!==null&&(q||Y)){var L=null;Y?L=Y.createElement(e,x):q&&(L=q.create(e,x)),j.current=L,N(L),L&&L.mount(R.current)}},[q,Y,x]);var K=Al(x);return J.useEffect(function(){if(j.current){var L=F0(x,K,["paymentRequest"]);L&&"update"in j.current&&j.current.update(L)}},[x,K]),J.useLayoutEffect(function(){return function(){if(j.current&&typeof j.current.destroy=="function")try{j.current.destroy(),j.current=null}catch{}}},[]),J.createElement("div",{id:d,className:h,ref:R})},i=function(c){Il("mounts <".concat(r,">"));var d=c.id,h=c.className;return J.createElement("div",{id:d,className:h})},o=t?i:s;return o.propTypes={id:Qe.string,className:Qe.string,onChange:Qe.func,onBlur:Qe.func,onFocus:Qe.func,onReady:Qe.func,onEscape:Qe.func,onClick:Qe.func,onLoadError:Qe.func,onLoaderStart:Qe.func,onNetworksChange:Qe.func,onConfirm:Qe.func,onCancel:Qe.func,onShippingAddressChange:Qe.func,onShippingRateChange:Qe.func,options:Qe.object},o.displayName=r,o.__elementType=e,o},At=typeof window>"u",bS=J.createContext(null);bS.displayName="EmbeddedCheckoutProviderContext";var xS=function(){var e=Il("calls useStripe()"),t=e.stripe;return t};jt("auBankAccount",At);jt("card",At);jt("cardNumber",At);jt("cardExpiry",At);jt("cardCvc",At);jt("fpxBank",At);jt("iban",At);jt("idealBank",At);jt("p24Bank",At);jt("epsBank",At);var vS=jt("payment",At);jt("expressCheckout",At);jt("currencySelector",At);jt("paymentRequestButton",At);jt("linkAuthentication",At);jt("address",At);jt("shippingAddress",At);jt("paymentMethodMessaging",At);jt("affirmMessage",At);jt("afterpayClearpayMessage",At);const SS=eS("pk_test_51OeVOlKa6YHG5abHAjyXhhxJYbnIIQXgfUP5MyH0ikmLZGOzWD9CN8tl36pqWSI0XdcUBBg7xZ6S2qM2c0oFybi800uZmFUrid"),ES=({clientSecret:n,amount:e,onSuccess:t})=>{const r=xS(),s=mS(),[i,o]=I.useState(null),[a,c]=I.useState(!1),d=async h=>{if(h.preventDefault(),!r||!s){console.error("Stripe or Elements not initialized");return}c(!0),o(null),console.log("🚀 Starting payment submission...");try{const{error:p,paymentIntent:x}=await r.confirmPayment({elements:s,confirmParams:{return_url:`${window.location.origin}/wallet`},redirect:"if_required"});if(console.log("💳 Payment confirmation result:",{submitError:p,paymentIntent:x}),p){console.error("❌ Payment error:",p),o(p.message||"Payment failed"),c(!1);return}if(!x){o("Payment requires confirmation. Please wait...");return}switch(x.status){case"succeeded":console.log("✅ Payment succeeded:",x),c(!1),t();break;case"processing":console.log("⏳ Payment is processing"),o("Your payment is processing. Please wait...");break;case"requires_payment_method":console.log("❌ Payment failed, requires new payment method"),o("Payment failed. Please try another payment method."),c(!1);break;default:console.log("❌ Unexpected status:",x.status),o(`Unexpected payment status: ${x.status}`),c(!1)}}catch(p){console.error("❌ Payment submission error:",p),o(p instanceof Error?p.message:"Payment failed. Please try again."),c(!1)}};return l.jsxs("form",{onSubmit:d,className:"space-y-4",children:[l.jsx(vS,{}),i&&l.jsx("div",{className:"text-red-500 text-sm mt-2",children:i}),l.jsx("button",{type:"submit",disabled:!r||a,className:`w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 
                    disabled:opacity-50 disabled:cursor-not-allowed`,children:a?"Processing...":`Pay $${e.toFixed(2)}`})]})},NS=({onFund:n,className:e="",walletId:t})=>{const[r,s]=I.useState(""),[i,o]=I.useState(!1),[a,c]=I.useState(null),[d,h]=I.useState(null),[p,x]=I.useState(null);I.useEffect(()=>{let g;return p&&(g=setTimeout(()=>{x(null)},1e4)),()=>{g&&clearTimeout(g)}},[p]);const y=async()=>{try{const g=await fetch("http://localhost:4000/api/v1/payments/create-intent",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("accessToken")}`},body:JSON.stringify({amount:parseFloat(r)})});if(!g.ok)throw new Error("Failed to initialize payment");const{data:S}=await g.json();c(S.clientSecret),o(!0)}catch(g){h(g instanceof Error?g.message:"Failed to initialize payment")}},E=async()=>{console.log("🎉 Payment success handler started");try{if(!(await fetch(`http://localhost:4000/api/v1/wallet/${t}/balance`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({amount:parseFloat(r)}),credentials:"include"})).ok)throw new Error("Failed to update wallet balance");o(!1),c(null),h(null),s(""),x("Payment successful! Your wallet has been updated."),console.log("💰 Calling onFund with amount:",parseFloat(r)),await n(parseFloat(r)),console.log("✅ onFund completed successfully")}catch(g){console.error("❌ Payment success handler error:",g),h("Payment successful, but wallet update failed. Please refresh.")}};return l.jsxs("div",{className:`bg-gray-800 rounded-lg p-6 ${e}`,children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Fund Your Wallet"}),p&&l.jsx("div",{className:"mb-4 bg-green-500 bg-opacity-10 border border-green-500 text-green-500 px-4 py-3 rounded",children:p}),i?a?l.jsx($0,{stripe:SS,options:{clientSecret:a},children:l.jsx(ES,{clientSecret:a,amount:parseFloat(r),onSuccess:E})}):null:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-400 mb-2",children:"Amount (USD)"}),l.jsxs("div",{className:"relative",children:[l.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:"$"}),l.jsx("input",{type:"number",id:"amount",value:r,onChange:g=>s(g.target.value),className:"w-full p-2 pl-8 rounded-lg bg-gray-700 border border-gray-600 text-white",placeholder:"0.00",min:"1",step:"0.01"})]})]}),l.jsx("button",{onClick:y,disabled:!r||parseFloat(r)<=0,className:`w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 
                            disabled:opacity-50 disabled:cursor-not-allowed`,children:"Continue to Payment"})]}),d&&l.jsx("div",{className:"text-red-500 text-sm",children:d})]})},MS=({onPurchase:n,className:e=""})=>{const[t,r]=I.useState(""),[s,i]=I.useState(!1),[o,a]=I.useState(null),[c,d]=I.useState(0),h=.1,p=y=>{r(y);const E=parseFloat(y);isNaN(E)?d(0):d(E/h)},x=async y=>{y.preventDefault(),a(null),i(!0);try{const E=parseFloat(t);if(isNaN(E)||E<=0)throw new Error("Please enter a valid amount");await n(E),r(""),d(0)}catch(E){a(E instanceof Error?E.message:"Failed to purchase Visorcoin")}finally{i(!1)}};return l.jsxs("div",{className:`bg-gray-800 rounded-lg p-6 ${e}`,children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h3",{className:"text-xl font-bold text-white",children:"Buy Visorcoin (XRV)"}),l.jsxs("div",{className:"text-sm text-gray-400",children:["1 XRV = $",h]})]}),l.jsxs("form",{onSubmit:x,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-400 mb-2",children:"Amount (USD)"}),l.jsxs("div",{className:"relative",children:[l.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:"$"}),l.jsx("input",{type:"number",id:"amount",value:t,onChange:y=>p(y.target.value),className:"bg-gray-700 text-white rounded-lg pl-8 pr-4 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00",step:"0.01",min:"0"})]}),c>0&&l.jsxs("div",{className:"mt-2 text-sm text-gray-400",children:["Estimated XRV: ",c.toFixed(2)," XRV"]})]}),o&&l.jsx("div",{className:"text-red-400 text-sm",children:o}),l.jsx("button",{type:"submit",disabled:s,className:`w-full bg-blue-600 hover:bg-blue-700 text-white rounded-lg px-4 py-2 transition-colors
            ${s?"opacity-50 cursor-not-allowed":""}`,children:s?"Processing...":"Buy Visorcoin"})]})]})},jS=({onSend:n,walletAddress:e="0x...",className:t=""})=>{const[r,s]=I.useState(!1),[i,o]=I.useState(""),[a,c]=I.useState(""),[d,h]=I.useState(!1),[p,x]=I.useState(null),y=async g=>{g.preventDefault(),x(null),h(!0);try{const S=parseFloat(a);if(isNaN(S)||S<=0)throw new Error("Please enter a valid amount");if(!i)throw new Error("Please enter a recipient address");await n(i,S),c(""),o("")}catch(S){x(S instanceof Error?S.message:"Failed to send Visorcoin")}finally{h(!1)}},E=async()=>{try{await navigator.clipboard.writeText(e)}catch{x("Failed to copy address")}};return l.jsxs("div",{className:`bg-gray-800 rounded-lg p-6 ${t}`,children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h3",{className:"text-xl font-bold text-white",children:"Send/Receive XRV"}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{onClick:()=>s(!1),className:`px-4 py-2 rounded-lg text-sm transition-colors ${r?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-blue-600 text-white"}`,children:"Send"}),l.jsx("button",{onClick:()=>s(!0),className:`px-4 py-2 rounded-lg text-sm transition-colors ${r?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Receive"})]})]}),r?l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Your Wallet Address"}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"text",value:e,readOnly:!0,className:"bg-gray-700 text-white rounded-lg px-4 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-500"}),l.jsx("button",{onClick:E,className:"bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors",children:"Copy"})]})]}),l.jsx("div",{className:"mt-4 p-4 bg-gray-700 rounded-lg",children:l.jsx("p",{className:"text-sm text-gray-400",children:"Share this address to receive Visorcoin (XRV) from other users."})})]}):l.jsxs("form",{onSubmit:y,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"recipient",className:"block text-sm font-medium text-gray-400 mb-2",children:"Recipient Address"}),l.jsx("input",{type:"text",id:"recipient",value:i,onChange:g=>o(g.target.value),className:"bg-gray-700 text-white rounded-lg px-4 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter XRV address"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"sendAmount",className:"block text-sm font-medium text-gray-400 mb-2",children:"Amount (XRV)"}),l.jsx("input",{type:"number",id:"sendAmount",value:a,onChange:g=>c(g.target.value),className:"bg-gray-700 text-white rounded-lg px-4 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00",step:"0.01",min:"0"})]}),p&&l.jsx("div",{className:"text-red-400 text-sm",children:p}),l.jsx("button",{type:"submit",disabled:d,className:`w-full bg-blue-600 hover:bg-blue-700 text-white rounded-lg px-4 py-2 transition-colors
              ${d?"opacity-50 cursor-not-allowed":""}`,children:d?"Processing...":"Send Visorcoin"})]})]})},AS=({transactions:n,isLoading:e,className:t=""})=>{const r=o=>{switch(o){case"send":return"↑";case"receive":return"↓";case"purchase":return"🛒";case"sale":return"💰";default:return"•"}},s=o=>{switch(o){case"send":return"text-red-400";case"receive":return"text-green-400";case"purchase":return"text-orange-400";case"sale":return"text-blue-400";default:return"text-gray-400"}},i=o=>{const a=new Date(o);return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(a)};return l.jsxs("div",{className:`bg-gray-800 rounded-lg p-6 ${t}`,children:[l.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Recent Transactions"}),e?l.jsx("div",{className:"flex items-center justify-center py-8",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):n.length===0?l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:"text-gray-400",children:"No recent transactions"})}):l.jsx("div",{className:"space-y-4",children:n.map(o=>{var a;return l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700 rounded-lg hover:bg-gray-650 transition-colors",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("div",{className:`w-8 h-8 rounded-full ${s(o.type)} bg-opacity-20 flex items-center justify-center`,children:r(o.type)}),l.jsxs("div",{children:[l.jsxs("div",{className:"text-sm font-medium text-white",children:[o.type.charAt(0).toUpperCase()+o.type.slice(1),((a=o.details)==null?void 0:a.item_name)&&` - ${o.details.item_name}`]}),l.jsx("div",{className:"text-xs text-gray-400",children:i(o.timestamp)})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsxs("div",{className:`text-sm font-medium ${s(o.type)}`,children:[o.type==="send"?"-":"+","$",o.amount]}),l.jsx("div",{className:`text-xs ${o.status==="completed"?"text-green-400":o.status==="pending"?"text-yellow-400":"text-red-400"}`,children:o.status.charAt(0).toUpperCase()+o.status.slice(1)})]})]},o.id)})})]})},IS=()=>{Ct();const[n,e]=I.useState({balance:"0.00",totalTokens:0,pendingTransactions:0,totalValueLocked:"0.00",transactions:[],recentTransactions:[],id:"",transactionStats:{total:0,purchases:0,sales:0,transfers:0}}),[t,r]=I.useState([]),[s,i]=I.useState(!0),[o,a]=I.useState(!0),[c,d]=I.useState(null),h=async()=>{var A;console.log("🔄 Loading wallet data...");try{const k=await fetch("http://localhost:4000/api/v1/wallet",{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,Accept:"application/json"},credentials:"include"});if(console.log("📡 Wallet API response status:",k.status),!k.ok){if(k.status===404)return console.log("⚠️ Wallet not found, creating new wallet..."),await x(),h();throw new Error("Failed to load wallet data")}const{data:M}=await k.json();console.log("💰 Received wallet data:",M),e({balance:M.balance.toString(),totalTokens:((A=M.linked_accounts)==null?void 0:A.length)||0,pendingTransactions:0,totalValueLocked:M.balance.toString(),transactions:[],id:M.id,recentTransactions:[],transactionStats:M.stats}),console.log("✅ Wallet data updated in state")}catch(k){console.error("❌ Failed to load wallet data:",k),d(k instanceof Error?k.message:"Failed to load wallet data")}finally{i(!1)}},p=async A=>{try{const k=await fetch(`http://localhost:4000/api/v1/wallet/wallet/${A}/nfts`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,Accept:"application/json"},credentials:"include"});if(!k.ok)throw new Error("Failed to load NFTs");const{data:M}=await k.json();console.log("NFT Data:",M),r(Array.isArray(M)?M:M.nfts||[])}catch(k){console.error("NFT loading error:",k),d(k instanceof Error?k.message:"Failed to load NFTs")}finally{a(!1)}},x=async()=>{try{const A=await fetch("http://localhost:4000/api/v1/wallet",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({currency:"USD",type:"wallet"}),credentials:"include"});if(!A.ok){const k=await A.json();throw new Error(k.message||"Failed to create wallet")}return A.json()}catch{throw new Error("Failed to create wallet")}},y=async A=>{console.log("🔄 Starting wallet update process for amount:",A);try{console.log("⏳ Waiting for webhook processing..."),await new Promise(k=>setTimeout(k,1e3)),console.log("🔄 Reloading wallet data..."),await h(),console.log("✅ Wallet data reloaded successfully")}catch(k){console.error("❌ Error updating wallet after funding:",k),d("Payment successful. Wallet balance will update shortly.")}},E=async A=>{try{if(!(await fetch(`http://localhost:4000/api/v1/wallet/wallet/${n.id}/buy-visorcoin`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({amount:A}),credentials:"include"})).ok)throw new Error("Failed to purchase Visorcoin");await h()}catch{throw new Error("Failed to purchase Visorcoin")}},g=async(A,k)=>{try{if(!(await fetch(`http://localhost:4000/api/v1/wallet/wallet/${n.id}/send-visorcoin`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({recipientAddress:A,amount:k}),credentials:"include"})).ok)throw new Error("Failed to send Visorcoin");await h()}catch{throw new Error("Failed to send Visorcoin")}},S=async()=>{try{const A=await fetch(`http://localhost:4000/api/v1/wallet/wallet/${n.id}/recent-transactions`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,Accept:"application/json"},credentials:"include"});if(!A.ok)throw new Error("Failed to load recent transactions");const{data:k}=await A.json();e(M=>({...M,recentTransactions:k.transactions,transactionStats:k.stats}))}catch(A){console.error("Error loading recent transactions:",A),d(A instanceof Error?A.message:"Failed to load recent transactions")}};return I.useEffect(()=>{(async()=>{try{await h(),n.id&&await Promise.all([p(n.id),S()])}catch{d("Failed to initialize wallet")}})()},[n.id]),l.jsx(hn,{children:l.jsxs("div",{className:"w-full max-w-[100vw] overflow-x-hidden p-4 md:px-6 lg:px-8 space-y-6",children:[l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 md:p-6",children:[l.jsx("h1",{className:"text-xl md:text-2xl font-bold text-white mb-2",children:"Wallet Overview"}),l.jsx("p",{className:"text-sm md:text-base text-gray-400",children:"Manage your crypto assets and transactions"})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[l.jsx(NS,{onFund:y,walletId:n.id,className:""}),l.jsx(MS,{onPurchase:E})]}),l.jsx(jS,{onSend:g,walletAddress:n.id})]}),c&&l.jsx("div",{className:"bg-red-500 bg-opacity-10 border border-red-500 text-red-500 px-4 py-3 rounded text-sm md:text-base",children:c}),l.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4",children:[l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 md:p-6",children:[l.jsx("div",{className:"text-xs md:text-sm font-medium text-gray-400 mb-1 md:mb-2",children:"Total Dollars"}),l.jsxs("div",{className:"text-lg md:text-2xl font-bold text-white",children:["$",n.balance]})]}),l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 md:p-6",children:[l.jsx("div",{className:"text-xs md:text-sm font-medium text-gray-400 mb-1 md:mb-2",children:"Total Visorcoin (XRV)"}),l.jsx("div",{className:"text-lg md:text-2xl font-bold text-white",children:n.totalTokens})]}),l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 md:p-6",children:[l.jsx("div",{className:"text-xs md:text-sm font-medium text-gray-400 mb-1 md:mb-2",children:"Pending Transactions"}),l.jsx("div",{className:"text-lg md:text-2xl font-bold text-white",children:n.pendingTransactions})]}),l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 md:p-6",children:[l.jsx("div",{className:"text-xs md:text-sm font-medium text-gray-400 mb-1 md:mb-2",children:"Total Value Locked"}),l.jsxs("div",{className:"text-lg md:text-2xl font-bold text-white",children:["$",n.totalValueLocked]})]})]}),l.jsx("div",{className:"space-y-4 md:space-y-6",children:l.jsx(L0,{nfts:t,isLoading:o,title:"Your NFTs",compact:!1})}),l.jsx(AS,{transactions:n.recentTransactions||[],isLoading:s,className:"bg-gray-800 rounded-lg"})]})})},CS="_dashboardContainer_15xns_1",TS="_welcomeCard_15xns_8",_S="_statsGrid_15xns_19",kS="_statCard_15xns_25",LS="_rotate_15xns_1",ur={dashboardContainer:CS,welcomeCard:TS,statsGrid:_S,statCard:kS,rotate:LS},RS=({nft:n,onListingSuccess:e})=>{var A,k,M,O;const[t,r]=I.useState(!1),[s,i]=I.useState(!1),[o,a]=I.useState(null),[c,d]=I.useState(null),[h,p]=I.useState({price:0,duration:7}),x=((A=n.metadata)==null?void 0:A.name)||n.name||"Unnamed NFT",y=((k=n.metadata)==null?void 0:k.description)||n.description||"No description available",E=((M=n.metadata)==null?void 0:M.imageUrl)||n.image_url||"/placeholder-nft.png",g=((O=n.metadata)==null?void 0:O.value)||n.value||0,S=async()=>{try{i(!0),a(null),d(null);const B=await fetch(`http://localhost:4000/api/v1/wallet/wallet/${n.owner_wallet_id}/nfts/${n.id}/list`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"},body:JSON.stringify(h)});if(!B.ok){const V=await B.json();throw new Error(V.message||"Failed to list NFT")}const z=await B.json();d("NFT listed successfully!"),r(!1),e==null||e(z.data),setTimeout(()=>{d(null)},1e4)}catch(B){a(B instanceof Error?B.message:"Failed to list NFT")}finally{i(!1)}};return l.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsx("div",{className:"aspect-square w-full",children:l.jsx("img",{src:E,alt:x,className:"w-full h-full object-cover"})}),l.jsxs("div",{className:"p-6 flex flex-col justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:x}),l.jsx("p",{className:"text-gray-400 text-lg mb-4",children:y}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[l.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg",children:[l.jsx("div",{className:"text-sm text-gray-400",children:"Current Value"}),l.jsxs("div",{className:"text-xl font-bold text-blue-400",children:["$",g.toFixed(2)]})]}),l.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg",children:[l.jsx("div",{className:"text-sm text-gray-400",children:"Collection"}),l.jsx("div",{className:"text-xl font-bold text-white",children:"Featured"})]})]})]}),l.jsx("div",{className:"flex gap-4",children:t?l.jsx("div",{className:"w-full p-4",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Price (XRV)"}),l.jsx("input",{type:"number",min:"0",step:"0.001",value:h.price,onChange:B=>p(z=>({...z,price:parseFloat(B.target.value)})),className:"w-full bg-gray-700 rounded-lg p-2 text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Duration (days)"}),l.jsx("input",{type:"number",min:"1",max:"90",value:h.duration,onChange:B=>p(z=>({...z,duration:parseInt(B.target.value)})),className:"w-full bg-gray-700 rounded-lg p-2 text-white"})]}),o&&l.jsx("div",{className:"text-red-400 text-sm",children:o}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:S,disabled:s,className:"flex-1 bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg text-white font-medium transition-colors disabled:opacity-50",children:s?"Listing...":"Confirm Listing"}),l.jsx("button",{onClick:()=>r(!1),className:"flex-1 bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded-lg text-white font-medium transition-colors",children:"Cancel"})]})]})}):l.jsx("button",{onClick:()=>r(!0),className:"flex-1 bg-blue-600 hover:bg-blue-700 px-6 py-3 rounded-lg text-white font-medium transition-colors",children:"List for Sale"})})]})]}),c&&l.jsx("div",{className:"bg-green-500/10 border border-green-500/50 rounded-lg p-4 mb-4",children:l.jsx("p",{className:"text-green-500",children:c})})]})},BS=({onSubmit:n,onCancel:e})=>{Ct();const[t,r]=I.useState(!1),[s,i]=I.useState(null),[o,a]=I.useState([{trait_type:"",value:""}]),[c,d]=I.useState({name:"",description:"",image:null,attributes:[],royalties:10,supply:1}),h=g=>{var A;const S=(A=g.target.files)==null?void 0:A[0];if(S){if(S.size>10*1024*1024){i("Image size must be less than 10MB");return}d({...c,image:S})}},p=()=>{a([...o,{trait_type:"",value:""}])},x=g=>{a(o.filter((S,A)=>A!==g))},y=(g,S,A)=>{const k=[...o];k[g]={...k[g],[S]:A},a(k)},E=async g=>{g.preventDefault(),r(!0),i(null);try{if(!c.image)throw new Error("Please select an image for your NFT");const S=o.filter(A=>A.trait_type.trim()!==""&&A.value.trim()!=="");await n({...c,attributes:S})}catch(S){i(S instanceof Error?S.message:"Failed to create NFT")}finally{r(!1)}};return l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Create New NFT"}),l.jsxs("form",{onSubmit:E,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"NFT Image"}),l.jsx("input",{type:"file",accept:"image/*",onChange:h,className:"w-full bg-gray-700 text-white rounded-lg p-3",required:!0}),l.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Max size: 10MB. Recommended: 1500x1500px"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-400 mb-2",children:"Name"}),l.jsx("input",{type:"text",id:"name",className:"w-full bg-gray-700 text-white rounded-lg p-3",value:c.name,onChange:g=>d({...c,name:g.target.value}),required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-400 mb-2",children:"Description"}),l.jsx("textarea",{id:"description",rows:4,className:"w-full bg-gray-700 text-white rounded-lg p-3",value:c.description,onChange:g=>d({...c,description:g.target.value}),required:!0})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Attributes"}),o.map((g,S)=>l.jsxs("div",{className:"flex gap-2 mb-2",children:[l.jsx("input",{type:"text",placeholder:"Trait Type",className:"flex-1 bg-gray-700 text-white rounded-lg p-3",value:g.trait_type,onChange:A=>y(S,"trait_type",A.target.value)}),l.jsx("input",{type:"text",placeholder:"Value",className:"flex-1 bg-gray-700 text-white rounded-lg p-3",value:g.value,onChange:A=>y(S,"value",A.target.value)}),S>0&&l.jsx("button",{type:"button",onClick:()=>x(S),className:"text-red-400 hover:text-red-300",children:"Remove"})]},S)),l.jsx("button",{type:"button",onClick:p,className:"text-blue-400 hover:text-blue-300 text-sm",children:"+ Add Attribute"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"royalties",className:"block text-sm font-medium text-gray-400 mb-2",children:"Royalties (%)"}),l.jsx("input",{type:"number",id:"royalties",min:"0",max:"50",className:"w-full bg-gray-700 text-white rounded-lg p-3",value:c.royalties,onChange:g=>d({...c,royalties:Number(g.target.value)}),required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"supply",className:"block text-sm font-medium text-gray-400 mb-2",children:"Supply"}),l.jsx("input",{type:"number",id:"supply",min:"1",className:"w-full bg-gray-700 text-white rounded-lg p-3",value:c.supply,onChange:g=>d({...c,supply:Number(g.target.value)}),required:!0})]})]}),s&&l.jsx("div",{className:"text-red-400 text-sm",children:s}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("button",{type:"submit",disabled:t,className:`flex-1 bg-blue-600 hover:bg-blue-700 text-white rounded-lg px-4 py-3 
              font-medium transition-colors ${t?"opacity-50 cursor-not-allowed":""}`,children:t?"Creating...":"Create NFT"}),l.jsx("button",{type:"button",onClick:e,className:`flex-1 bg-gray-700 hover:bg-gray-600 text-white rounded-lg px-4 py-3 
              font-medium transition-colors`,children:"Cancel"})]})]})]})},OS=()=>{Ct();const{state:n}=Bl(),[e,t]=I.useState((n==null?void 0:n.selectedNft)||null),[r,s]=I.useState([]),[i,o]=I.useState(!0),[a,c]=I.useState(null),[d,h]=I.useState({id:""}),[p,x]=I.useState(!1),[y,E]=I.useState(null),g=async()=>{try{const M=await fetch("http://localhost:4000/api/v1/wallet",{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,Accept:"application/json"},credentials:"include"});if(!M.ok)throw new Error("Failed to load wallet data");const{data:O}=await M.json();return h({id:O.id}),O.id}catch(M){console.error("Error loading wallet:",M),c(M instanceof Error?M.message:"Failed to load wallet data")}},S=async()=>{var M;try{const O=await g();if(!O)throw new Error("No wallet ID available");console.log("Wallet ID:",O);const B=await fetch(`http://localhost:4000/api/v1/wallet/wallet/${O}/nfts`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,Accept:"application/json"},credentials:"include"});if(!B.ok)throw new Error("Failed to load NFTs");const z=await B.json();console.log("API Response:",z);const V=((M=z.data)==null?void 0:M.nfts)||z.data||[];s(Array.isArray(V)?V:[]),!e&&V.length>0&&t(V[0])}catch(O){console.error("Error loading NFTs:",O),c(O instanceof Error?O.message:"Failed to load NFTs")}finally{o(!1)}};I.useEffect(()=>{console.log("Loading NFTs..."),S()},[]),I.useEffect(()=>{console.log("Current NFTs:",r)},[r]);const A=M=>{t(M),window.scrollTo({top:0,behavior:"smooth"})},k=async M=>{try{if(!d.id)throw new Error("No wallet connected");const O="/placeholder-nft.png",B=await fetch(`http://localhost:4000/api/v1/wallet/wallet/${d.id}/nfts/create`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"},body:JSON.stringify({name:M.name,description:M.description,image_url:O,owner_wallet_id:d.id,metadata:{name:M.name,description:M.description,imageUrl:O,attributes:M.attributes,royalties:M.royalties,supply:M.supply}})});if(!B.ok){const z=await B.json();throw new Error(z.message||"Failed to create NFT")}E("NFT created successfully!"),x(!1),S(),setTimeout(()=>{E(null)},5e3)}catch(O){c(O instanceof Error?O.message:"Failed to create NFT")}};return l.jsx(hn,{children:l.jsxs("div",{className:"w-full max-w-[100vw] overflow-x-hidden px-4 md:px-6 lg:px-8",children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"NFT Assets"}),l.jsx("p",{className:"text-gray-400",children:"Manage your digital assets and NFT collection"})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[l.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[l.jsx("div",{className:"text-sm font-medium text-gray-400 mb-2",children:"Total NFTs"}),l.jsx("div",{className:"text-2xl font-bold text-white",children:r.length})]}),l.jsxs("div",{className:ur.statCard,children:[l.jsx("div",{className:"text-sm font-medium text-gray-400 mb-2",children:"Total Value"}),l.jsx("div",{className:"text-2xl font-bold text-white",children:"$0.00"})]}),l.jsxs("div",{className:ur.statCard,children:[l.jsx("div",{className:"text-sm font-medium text-gray-400 mb-2",children:"Listed NFTs"}),l.jsx("div",{className:"text-2xl font-bold text-white",children:"0"})]}),l.jsxs("div",{className:ur.statCard,children:[l.jsx("div",{className:"text-sm font-medium text-gray-400 mb-2",children:"Collections"}),l.jsx("div",{className:"text-2xl font-bold text-white",children:"0"})]})]}),e&&l.jsxs("div",{className:"mb-8",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:"Featured NFT"}),l.jsx("button",{className:"text-sm text-blue-400 hover:text-blue-300",onClick:()=>t(r[Math.floor(Math.random()*r.length)]),children:"Show Another"})]}),l.jsx("div",{className:"transform hover:scale-[1.01] transition-transform duration-200",children:l.jsx(RS,{nft:e})})]}),l.jsxs("div",{className:"mb-8",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:"Create New NFT"}),l.jsx("button",{onClick:()=>x(!p),className:"text-sm text-blue-400 hover:text-blue-300",children:p?"Cancel":"+ Create NFT"})]}),p&&l.jsx(BS,{onSubmit:k,onCancel:()=>x(!1)})]}),l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:"Your NFT Collection"}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 w-full sm:w-auto",children:[l.jsxs("select",{className:"bg-gray-700 text-white rounded-lg px-4 py-2 text-sm w-full sm:w-auto",onChange:M=>console.log("Sort by:",M.target.value),children:[l.jsx("option",{value:"recent",children:"Recently Added"}),l.jsx("option",{value:"value",children:"Highest Value"}),l.jsx("option",{value:"name",children:"Name"})]}),l.jsx("input",{type:"text",placeholder:"Search NFTs...",className:"bg-gray-700 text-white rounded-lg px-4 py-2 text-sm w-full sm:w-auto",onChange:M=>console.log("Search:",M.target.value)})]})]}),l.jsx("div",{className:"min-h-[400px] max-h-[800px] overflow-y-auto",children:l.jsx(L0,{nfts:r,isLoading:i,onViewDetails:A,compact:!1})})]}),y&&l.jsx("div",{className:"bg-green-500/10 border border-green-500/50 rounded-lg p-4 mb-6",children:l.jsx("p",{className:"text-green-500",children:y})}),a&&l.jsx("div",{className:"bg-red-500/10 border border-red-500/50 rounded-lg p-4 mb-6",children:l.jsx("p",{className:"text-red-500",children:a})})]})})},DS=({onSubmit:n})=>{const[e,t]=I.useState(!1),[r,s]=I.useState(null),[i,o]=I.useState(null),[a,c]=I.useState({name:"",yearsRequired:1}),[d,h]=I.useState({title:"",description:"",location:"",price:0,experienceLevel:"intermediate",skills:[],projectDuration:"",projectType:"AR"}),p=()=>{a.name&&(h(E=>({...E,skills:[...E.skills,{...a}]})),c({name:"",yearsRequired:1}))},x=E=>{h(g=>({...g,skills:g.skills.filter(S=>S.name!==E)}))},y=async E=>{E.preventDefault(),t(!0),s(null);try{await n(d),o("Job posted successfully!"),h({title:"",description:"",location:"",price:0,experienceLevel:"intermediate",skills:[],projectDuration:"",projectType:"AR"}),setTimeout(()=>{o(null)},1e4)}catch(g){s(g instanceof Error?g.message:"Failed to post job")}finally{t(!1)}};return l.jsxs("div",{className:"w-full max-w-full overflow-x-hidden",children:[l.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white mb-4 sm:mb-6",children:"Post a New Job"}),l.jsxs("form",{onSubmit:y,className:"space-y-4 sm:space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1 sm:mb-2",children:"Job Title"}),l.jsx("input",{type:"text",value:d.title,onChange:E=>h(g=>({...g,title:E.target.value})),className:"w-full bg-gray-700 text-white rounded-lg px-3 py-2 text-sm sm:text-base",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1 sm:mb-2",children:"Project Type"}),l.jsxs("select",{value:d.projectType,onChange:E=>h(g=>({...g,projectType:E.target.value})),className:"w-full bg-gray-700 text-white rounded-lg px-3 py-2 text-sm sm:text-base",children:[l.jsx("option",{value:"AR",children:"AR (Augmented Reality)"}),l.jsx("option",{value:"VR",children:"VR (Virtual Reality)"}),l.jsx("option",{value:"Web3",children:"Web3"}),l.jsx("option",{value:"Metaverse",children:"Metaverse"}),l.jsx("option",{value:"Other",children:"Other"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Description"}),l.jsx("textarea",{value:d.description,onChange:E=>h(g=>({...g,description:E.target.value})),className:"w-full bg-gray-700 text-white rounded-lg px-4 py-2 h-32",required:!0})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Location"}),l.jsx("input",{type:"text",value:d.location,onChange:E=>h(g=>({...g,location:E.target.value})),className:"w-full bg-gray-700 text-white rounded-lg px-4 py-2",placeholder:"e.g., Remote, Worldwide",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Price (XRV)"}),l.jsx("input",{type:"number",value:d.price,onChange:E=>h(g=>({...g,price:Number(E.target.value)})),className:"w-full bg-gray-700 text-white rounded-lg px-4 py-2",min:"0",required:!0})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Experience Level"}),l.jsxs("select",{value:d.experienceLevel,onChange:E=>h(g=>({...g,experienceLevel:E.target.value})),className:"w-full bg-gray-700 text-white rounded-lg px-4 py-2",children:[l.jsx("option",{value:"beginner",children:"Beginner"}),l.jsx("option",{value:"intermediate",children:"Intermediate"}),l.jsx("option",{value:"expert",children:"Expert"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Project Duration"}),l.jsx("input",{type:"text",value:d.projectDuration,onChange:E=>h(g=>({...g,projectDuration:E.target.value})),className:"w-full bg-gray-700 text-white rounded-lg px-4 py-2",placeholder:"e.g., 3 months",required:!0})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Required Skills"}),l.jsxs("div",{className:"flex gap-2 mb-2",children:[l.jsx("input",{type:"text",value:a.name,onChange:E=>c(g=>({...g,name:E.target.value})),className:"flex-1 bg-gray-700 text-white rounded-lg px-4 py-2",placeholder:"Skill name"}),l.jsx("input",{type:"number",value:a.yearsRequired,onChange:E=>c(g=>({...g,yearsRequired:Number(E.target.value)})),className:"w-20 bg-gray-700 text-white rounded-lg px-4 py-2",min:"0"}),l.jsx("button",{type:"button",onClick:p,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Add"})]}),l.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:d.skills.map(E=>l.jsxs("span",{className:"bg-gray-700 text-white text-xs sm:text-sm rounded-full px-3 py-1 flex items-center gap-2",children:[E.name,l.jsx("button",{type:"button",onClick:()=>x(E.name),className:"hover:text-red-400",children:"×"})]},E.name))})]}),i&&l.jsx("div",{className:"bg-green-500/10 border border-green-500/50 rounded-lg p-4 mt-4",children:l.jsx("p",{className:"text-green-500 text-sm",children:i})}),r&&l.jsx("div",{className:"text-red-500 text-sm mt-4",children:r}),l.jsx("button",{type:"submit",disabled:e,className:`w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg
            transition-colors duration-200 text-sm sm:text-base font-medium disabled:opacity-50`,children:e?"Posting...":"Post Job"})]})]})},PS=({onJobCancel:n,onApplicationCancel:e})=>{const{user:t}=Ct(),[r,s]=I.useState([]),[i,o]=I.useState([]),[a,c]=I.useState(!0),[d,h]=I.useState(null),[p,x]=I.useState(null),[y,E]=I.useState([]),[g,S]=I.useState(!1);I.useEffect(()=>{const B=async()=>{var z;try{const[V,H]=await Promise.all([fetch(`http://localhost:4000/api/v1/jobs/user/${t==null?void 0:t.id}/active`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}}),fetch(`http://localhost:4000/api/v1/jobs/applications/user/${t==null?void 0:t.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}})]),F=await V.json(),$=await H.json();s(((z=F.data)==null?void 0:z.jobs)||[]),o($.data||[])}catch(V){console.error("Error fetching data:",V),h("Failed to load jobs data")}finally{c(!1)}};t!=null&&t.id&&B()},[t==null?void 0:t.id]);const A=async B=>{try{n&&(await n(B),await loadActiveJobs())}catch{h("Failed to cancel job")}},k=async B=>{try{const z=await fetch(`http://localhost:4000/api/v1/jobs/${B}/applications`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,Accept:"application/json"}});if(!z.ok)throw new Error("Failed to load applications");const V=await z.json();console.log("Loaded applications:",V),E(V.data||[])}catch(z){console.error("Error loading job applications:",z),h("Failed to load applications")}},M=async B=>{x(B),await k(B),S(!0)},O=async(B,z)=>{try{if(!(await fetch(`http://localhost:4000/api/v1/jobs/applications/${B}/status`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"},body:JSON.stringify({status:z})})).ok)throw new Error("Failed to update application status");p&&await k(p)}catch(V){console.error("Error updating application:",V),h("Failed to update application status")}};return a?l.jsx("div",{className:"text-gray-400 text-center py-8",children:"Loading active jobs..."}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[l.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4 sm:p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Active Jobs Posted"}),l.jsx("p",{className:"text-3xl font-bold text-white",children:r.length})]}),l.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4 sm:p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"My Applications"}),l.jsx("p",{className:"text-3xl font-bold text-white",children:i.length})]}),l.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4 sm:p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Average Rating"}),l.jsx("p",{className:"text-3xl font-bold text-white",children:"0.0"})]})]}),l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 sm:p-6",children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"My Posted Jobs"}),r.length===0?l.jsx("div",{className:"text-gray-400 text-center py-8",children:"No active jobs found."}):l.jsx("div",{className:"space-y-4",children:r.map(B=>l.jsx("div",{className:"bg-gray-700 rounded-lg p-4 cursor-pointer hover:bg-gray-600 transition-colors",onClick:()=>M(B.id),children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:B.title}),l.jsxs("p",{className:"text-sm text-gray-400",children:["Posted: ",new Date(B.created_at).toLocaleDateString()]})]}),l.jsx("button",{onClick:z=>{z.stopPropagation(),A(B.id)},className:"text-red-400 hover:text-red-300 text-sm",children:"Cancel Job"})]})},B.id))})]}),l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 sm:p-6",children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"My Submitted Applications"}),i.length===0?l.jsx("div",{className:"text-gray-400 text-center py-8",children:"No applications submitted."}):l.jsx("div",{className:"space-y-4",children:i.map(B=>l.jsx("div",{className:"bg-gray-700 rounded-lg p-4",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Application for Job #",B.jobId]}),l.jsxs("p",{className:"text-sm text-gray-400",children:["Submitted: ",new Date(B.submittedAt).toLocaleDateString()]}),l.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Status: ",l.jsx("span",{className:"capitalize",children:B.status})]}),l.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Proposed Rate: $",B.proposedRate]})]}),B.status==="pending"&&l.jsx("button",{onClick:()=>e==null?void 0:e(B.id),className:"text-red-400 hover:text-red-300 text-sm",children:"Cancel Application"})]})},B.id))})]}),g&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:"Submitted Applications"}),l.jsx("button",{onClick:()=>S(!1),className:"text-gray-400 hover:text-white",children:"✕"})]}),y.length===0?l.jsx("p",{className:"text-gray-400 text-center py-4",children:"No applications yet"}):l.jsx("div",{className:"space-y-4",children:y.map(B=>l.jsx("div",{className:"bg-gray-700 rounded-lg p-4",children:l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:B.applicant.name||"Anonymous"}),l.jsxs("p",{className:"text-sm text-gray-400",children:["Submitted: ",new Date(B.submittedAt).toLocaleDateString()]})]}),l.jsx("span",{className:`px-2 py-1 rounded text-sm ${B.status==="pending"?"bg-yellow-500/20 text-yellow-500":B.status==="accepted"?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:B.status})]}),l.jsxs("div",{className:"mt-2",children:[l.jsxs("p",{children:[l.jsx("span",{className:"text-gray-400",children:"Proposed Rate:"})," $",B.proposedRate]}),l.jsxs("p",{children:[l.jsx("span",{className:"text-gray-400",children:"Estimated Duration:"})," ",B.estimatedDuration," days"]}),B.coverLetter&&l.jsx("p",{className:"mt-2",children:B.coverLetter})]}),B.status==="pending"&&l.jsxs("div",{className:"flex gap-2 mt-2",children:[l.jsx("button",{onClick:()=>O(B.id,"accepted"),className:"bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded text-sm",children:"Accept"}),l.jsx("button",{onClick:()=>O(B.id,"rejected"),className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm",children:"Decline"})]})]})},B.id))})]})}),d&&l.jsx("div",{className:"text-red-500 text-sm mt-4",children:d})]})},FS=()=>{const{user:n}=Ct(),[e,t]=I.useState(!1),[r,s]=I.useState(null),[i,o]=I.useState(null),[a,c]=I.useState(0),d=async x=>{try{const y={id:`job-${Date.now()}`,type:"job",...x,userId:n==null?void 0:n.id,walletId:n==null?void 0:n.walletId,poster:{id:n==null?void 0:n.id,name:(n==null?void 0:n.name)||"Anonymous",rating:(n==null?void 0:n.rating)||0,jobsPosted:(n==null?void 0:n.jobsPosted)||0,memberSince:(n==null?void 0:n.createdAt)||new Date().toISOString()},status:"active",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};if(!(await fetch("http://localhost:4000/api/v1/jobs",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(y)})).ok)throw new Error("Failed to post job");t(!1),s(null),o("Job posted successfully!"),c(g=>g+1),setTimeout(()=>{o(null)},1e4)}catch(y){throw s(y instanceof Error?y.message:"Failed to post job"),y}},h=async x=>{try{const y=await fetch(`http://localhost:4000/api/v1/jobs/${x}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}});if(!y.ok){const E=await y.json();throw new Error(E.message||"Failed to cancel job")}o("Job cancelled successfully"),c(E=>E+1),setTimeout(()=>{o(null)},1e4)}catch(y){s(y instanceof Error?y.message:"Failed to cancel job")}},p=async x=>{try{const y=await fetch(`http://localhost:4000/api/v1/jobs/applications/${x}/cancel`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}});if(!y.ok){const E=await y.json();throw new Error(E.message||"Failed to cancel application")}o("Application cancelled successfully"),c(E=>E+1),setTimeout(()=>{o(null)},1e4)}catch(y){s(y instanceof Error?y.message:"Failed to cancel application")}};return l.jsx(hn,{children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8 lg:py-12",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 sm:gap-6 mb-6 sm:mb-8",children:[l.jsxs("div",{className:"w-full sm:w-auto",children:[l.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-white mb-2",children:"Jobs Dashboard"}),l.jsx("p",{className:"text-gray-400 text-sm sm:text-base",children:"Manage your active and completed jobs"})]}),l.jsx("button",{onClick:()=>t(!e),className:`w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg
              transition-colors duration-200 text-sm sm:text-base font-medium`,children:e?"Cancel":"Post New Job"})]}),i&&l.jsx("div",{className:"bg-green-500/10 border border-green-500/50 rounded-lg p-4 mb-6",children:l.jsx("p",{className:"text-green-500 text-sm",children:i})}),r&&l.jsx("div",{className:"bg-red-500/10 border border-red-500/50 rounded-lg p-4 mb-6",children:l.jsx("p",{className:"text-red-500 text-sm",children:r})}),e?l.jsx("div",{className:"bg-gray-800 rounded-lg p-4 sm:p-6 mb-6 max-w-full overflow-x-hidden",children:l.jsx(DS,{onSubmit:d})}):l.jsx(l.Fragment,{children:!e&&l.jsx(PS,{onJobCancel:h,onApplicationCancel:p},a)})]})})},US=({onConnect:n})=>{var i,o;const e=$o(),[t,r]=I.useState(null),s=async()=>{try{e.connected&&e.publicKey&&n&&await n(e.publicKey.toString())}catch(a){r(a instanceof Error?a.message:"Failed to connect wallet")}};return J.useEffect(()=>{e.connected&&e.publicKey&&s()},[e.connected,e.publicKey]),l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 sm:p-6",children:[l.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Connect Wallet"}),l.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 sm:gap-6",children:[l.jsx("p",{className:"text-gray-400 text-sm sm:text-base",children:e.connected?`Connected: ${(i=e.publicKey)==null?void 0:i.toString().slice(0,6)}...${(o=e.publicKey)==null?void 0:o.toString().slice(-4)}`:"Connect your Solana wallet to continue"}),l.jsx("style",{jsx:!0,global:!0,children:`
          .wallet-adapter-button {
            background-color: rgb(37, 99, 235) !important;
            transition-property: background-color, border-color, color, fill, stroke !important;
            transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1) !important;
            transition-duration: 150ms !important;
          }
          .wallet-adapter-button:hover {
            background-color: rgb(29, 78, 216) !important;
          }
          .wallet-adapter-button:not([disabled]) {
            background-color: rgb(37, 99, 235) !important;
          }
          .wallet-adapter-button:not([disabled]):hover {
            background-color: rgb(29, 78, 216) !important;
          }
        `}),l.jsx(Q1,{className:"!bg-blue-600 !hover:bg-blue-700 !rounded-lg !px-4 !py-3 !h-auto !text-sm sm:!text-base !font-medium !transition-colors w-full sm:w-auto"})]}),t&&l.jsx("div",{className:"text-red-500 mt-4 text-sm",children:t})]})},zS=()=>{Ct();const n=$o(),[e,t]=I.useState(1),[r,s]=I.useState(!1),[i,o]=I.useState(null),[a,c]=I.useState({name:"",symbol:"",decimals:9,totalSupply:1e6,initialOwner:"",tokenType:"fungible",features:{freezable:!1,mintable:!0,immutable:!1,burnable:!0},metadata:{description:"",website:"",image:""},distribution:{initialPrice:.01,presaleAllocation:20,publicAllocation:60,teamAllocation:20},economics:{maxSupply:1e9,inflationRate:0,transactionFee:0}}),d=async()=>{var p;if(!n.connected){o("Please connect your wallet first");return}s(!0),o(null);try{const x=await fetch("http://localhost:4000/api/v1/tokens/create",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"},body:JSON.stringify({...a,walletAddress:(p=n.publicKey)==null?void 0:p.toString()})});if(!x.ok)throw new Error("Failed to create token");const y=await x.json();t(3)}catch(x){o(x instanceof Error?x.message:"Failed to create token")}finally{s(!1)}},h=async p=>{try{c(x=>({...x,initialOwner:p}))}catch{o("Failed to connect wallet")}};return l.jsx(hn,{children:l.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8 lg:py-12",children:[l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 sm:p-6 lg:p-8 mb-6 sm:mb-8",children:[l.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-white mb-2",children:"Token Creator"}),l.jsx("p",{className:"text-gray-400 text-sm sm:text-base",children:"Create your own Solana token in minutes"})]}),l.jsx("div",{className:"mb-6 sm:mb-8",children:l.jsx(US,{onConnect:h})}),l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 sm:p-6 lg:p-8",children:[l.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white mb-4 sm:mb-6",children:"Token Configuration"}),l.jsxs("form",{className:"space-y-6 sm:space-y-8",onSubmit:p=>p.preventDefault(),children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:"Basic Information"}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1.5 sm:mb-2",children:"Token Name"}),l.jsx("input",{type:"text",value:a.name,onChange:p=>c(x=>({...x,name:p.target.value})),className:`w-full p-2.5 sm:p-3 rounded-lg bg-gray-700 border border-gray-600 text-white 
                      focus:border-blue-500 focus:ring-1 focus:ring-blue-500 text-sm sm:text-base`,placeholder:"My Custom Token"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1.5 sm:mb-2",children:"Token Symbol"}),l.jsx("input",{type:"text",value:a.symbol,onChange:p=>c(x=>({...x,symbol:p.target.value})),className:`w-full p-2.5 sm:p-3 rounded-lg bg-gray-700 border border-gray-600 text-white 
                      focus:border-blue-500 focus:ring-1 focus:ring-blue-500 text-sm sm:text-base`,placeholder:"MCT"})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:"Token Features"}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Token Type"}),l.jsxs("select",{value:a.tokenType,onChange:p=>c(x=>({...x,tokenType:p.target.value})),className:`w-full p-2.5 rounded-lg bg-gray-700 border border-gray-600 text-white 
                      focus:border-blue-500 focus:ring-1 focus:ring-blue-500`,children:[l.jsx("option",{value:"fungible",children:"Fungible Token"}),l.jsx("option",{value:"non-fungible",children:"Non-Fungible Token (NFT)"})]})]})}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",id:"freezable",checked:a.features.freezable,onChange:p=>c(x=>({...x,features:{...x.features,freezable:p.target.checked}})),className:"w-4 h-4 rounded border-gray-600 text-blue-600 focus:ring-blue-500"}),l.jsx("label",{htmlFor:"freezable",className:"text-sm text-gray-400",children:"Freezable"})]})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:"Token Economics"}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Initial Price (USD)"}),l.jsx("input",{type:"number",value:a.distribution.initialPrice,onChange:p=>c(x=>({...x,distribution:{...x.distribution,initialPrice:parseFloat(p.target.value)}})),className:`w-full p-2.5 rounded-lg bg-gray-700 border border-gray-600 text-white 
                      focus:border-blue-500 focus:ring-1 focus:ring-blue-500`,step:"0.000001",min:"0"})]})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:"Token Distribution"}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4"})]}),i&&l.jsx("div",{className:"text-red-500 text-sm p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:i}),l.jsx("button",{onClick:d,disabled:!n.connected||r,className:`w-full bg-blue-600 hover:bg-blue-700 text-white rounded-lg px-4 py-3 
                font-medium transition-colors text-sm sm:text-base mt-4 sm:mt-6
                ${!n.connected||r?"opacity-50 cursor-not-allowed":""}`,children:r?"Creating Token...":"Create Token"})]})]})]})})},$S=()=>{const{user:n,updateUser:e}=Ct(),[t,r]=I.useState(!0),[s,i]=I.useState(!1),[o,a]=I.useState(null),[c,d]=I.useState(null);I.useEffect(()=>{h()},[n==null?void 0:n.id]);const h=async()=>{var y,E,g,S;if(n!=null&&n.id)try{const A=await fetch(`http://localhost:4000/api/v1/users/${n.id}/profile`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,Accept:"application/json"}});if(!A.ok)throw new Error("Failed to load profile");const k=await A.json();console.log("Profile data from API:",k);const M={firstName:((y=n.name)==null?void 0:y.split(" ")[0])||"",lastName:((E=n.name)==null?void 0:E.split(" ")[1])||"",email:n.email||"",username:n.username||"",phone:n.phone||"",bio:n.bio||"",location:n.location||"",website:n.website||"",...k.data};a(M),d(M)}catch(A){if(console.error("Error loading profile:",A),rt.error("Failed to load profile"),n){const k={firstName:((g=n.name)==null?void 0:g.split(" ")[0])||"",lastName:((S=n.name)==null?void 0:S.split(" ")[1])||"",email:n.email||"",username:n.username||"",phone:n.phone||"",bio:n.bio||"",location:n.location||"",website:n.website||""};a(k),d(k)}}finally{r(!1)}},p=y=>{const{name:E,value:g}=y.target;d(S=>S?{...S,[E]:g}:null)},x=async y=>{if(y.preventDefault(),!(!(n!=null&&n.id)||!c))try{const E=await fetch(`http://localhost:4000/api/v1/users/${n.id}/update`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"},body:JSON.stringify({fullName:`${c.firstName} ${c.lastName}`.trim(),email:c.email,username:c.username,phone:c.phone,bio:c.bio,location:c.location,website:c.website})});if(!E.ok)throw new Error("Failed to update profile");const g=await E.json();a({...c,...g.data}),d({...c,...g.data}),e({...n,name:`${c.firstName} ${c.lastName}`.trim(),email:c.email}),i(!1),rt.success("Profile updated successfully")}catch(E){console.error("Error updating profile:",E),rt.error("Failed to update profile")}};return t?l.jsx("div",{className:"flex justify-center items-center h-screen",children:"Loading..."}):l.jsx(hn,{children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-white",children:"Profile Settings"}),l.jsx("button",{onClick:()=>i(!s),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:s?"Cancel":"Edit Profile"})]}),s?l.jsxs("form",{onSubmit:x,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-gray-300 mb-2",children:"First Name"}),l.jsx("input",{type:"text",name:"firstName",value:(c==null?void 0:c.firstName)||"",onChange:p,className:"w-full px-4 py-2 bg-gray-700 text-white rounded focus:ring-2 focus:ring-blue-500",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-gray-300 mb-2",children:"Last Name"}),l.jsx("input",{type:"text",name:"lastName",value:(c==null?void 0:c.lastName)||"",onChange:p,className:"w-full px-4 py-2 bg-gray-700 text-white rounded focus:ring-2 focus:ring-blue-500",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-gray-300 mb-2",children:"Username"}),l.jsx("input",{type:"text",name:"username",value:(c==null?void 0:c.username)||"",onChange:p,className:"w-full px-4 py-2 bg-gray-700 text-white rounded focus:ring-2 focus:ring-blue-500",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-gray-300 mb-2",children:"Email"}),l.jsx("input",{type:"email",name:"email",value:(c==null?void 0:c.email)||"",onChange:p,className:"w-full px-4 py-2 bg-gray-700 text-white rounded focus:ring-2 focus:ring-blue-500",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-gray-300 mb-2",children:"Phone"}),l.jsx("input",{type:"tel",name:"phone",value:(c==null?void 0:c.phone)||"",onChange:p,className:"w-full px-4 py-2 bg-gray-700 text-white rounded focus:ring-2 focus:ring-blue-500"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-gray-300 mb-2",children:"Bio"}),l.jsx("textarea",{name:"bio",value:(c==null?void 0:c.bio)||"",onChange:p,className:"w-full px-4 py-2 bg-gray-700 text-white rounded focus:ring-2 focus:ring-blue-500",rows:3})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-gray-300 mb-2",children:"Location"}),l.jsx("input",{type:"text",name:"location",value:(c==null?void 0:c.location)||"",onChange:p,className:"w-full px-4 py-2 bg-gray-700 text-white rounded focus:ring-2 focus:ring-blue-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-gray-300 mb-2",children:"Website"}),l.jsx("input",{type:"url",name:"website",value:(c==null?void 0:c.website)||"",onChange:p,className:"w-full px-4 py-2 bg-gray-700 text-white rounded focus:ring-2 focus:ring-blue-500"})]})]}),l.jsx("button",{type:"submit",className:"w-full px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors",children:"Save Changes"})]}):l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-gray-300 mb-1",children:"First Name"}),l.jsx("p",{className:"text-white text-lg",children:(o==null?void 0:o.firstName)||"Not set"})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-gray-300 mb-1",children:"Last Name"}),l.jsx("p",{className:"text-white text-lg",children:(o==null?void 0:o.lastName)||"Not set"})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-gray-300 mb-1",children:"Username"}),l.jsx("p",{className:"text-white text-lg",children:(o==null?void 0:o.username)||"Not set"})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-gray-300 mb-1",children:"Email"}),l.jsx("p",{className:"text-white text-lg",children:(o==null?void 0:o.email)||"Not set"})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-gray-300 mb-1",children:"Phone"}),l.jsx("p",{className:"text-white text-lg",children:(o==null?void 0:o.phone)||"Not set"})]}),l.jsxs("div",{className:"col-span-2",children:[l.jsx("h3",{className:"text-gray-300 mb-1",children:"Bio"}),l.jsx("p",{className:"text-white",children:(o==null?void 0:o.bio)||"No bio added yet"})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-gray-300 mb-1",children:"Location"}),l.jsx("p",{className:"text-white",children:(o==null?void 0:o.location)||"Not set"})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-gray-300 mb-1",children:"Website"}),o!=null&&o.website?l.jsx("a",{href:o.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300",children:o.website}):l.jsx("p",{className:"text-white",children:"Not set"})]})]})]}),l.jsxs("div",{className:ur.statsGrid,children:[l.jsxs("div",{className:ur.statCard,children:[l.jsx("div",{className:"text-sm font-medium text-gray-400 mb-2",children:"Account Status"}),l.jsx("div",{className:"text-2xl font-bold text-white",children:"Active"})]}),l.jsxs("div",{className:ur.statCard,children:[l.jsx("div",{className:"text-sm font-medium text-gray-400 mb-2",children:"2FA Status"}),l.jsx("div",{className:"text-2xl font-bold text-white",children:"Disabled"})]}),l.jsxs("div",{className:ur.statCard,children:[l.jsx("div",{className:"text-sm font-medium text-gray-400 mb-2",children:"Last Login"}),l.jsx("div",{className:"text-2xl font-bold text-white",children:"Today"})]}),l.jsxs("div",{className:ur.statCard,children:[l.jsx("div",{className:"text-sm font-medium text-gray-400 mb-2",children:"Account Type"}),l.jsx("div",{className:"text-2xl font-bold text-white",children:"Standard"})]})]}),l.jsx("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg",children:l.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Account Settings"})})]})})})},qS=({jobId:n,jobTitle:e,onSubmit:t,onCancel:r})=>{Ct();const[s,i]=I.useState(!1),[o,a]=I.useState(null),[c,d]=I.useState([""]),[h,p]=I.useState({coverLetter:"",proposedRate:0,estimatedDuration:1,portfolioLinks:[]}),x=()=>{d([...c,""])},y=S=>{d(c.filter((A,k)=>k!==S))},E=(S,A)=>{const k=[...c];k[S]=A,d(k)},g=async S=>{S.preventDefault(),i(!0),a(null);try{const A=c.filter(k=>k.trim()!=="");await t({...h,portfolioLinks:A})}catch(A){a(A instanceof Error?A.message:"Failed to submit application")}finally{i(!1)}};return l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[l.jsxs("h2",{className:"text-2xl font-bold text-white mb-6",children:["Apply for ",e]}),l.jsxs("form",{onSubmit:g,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"coverLetter",className:"block text-sm font-medium text-gray-400 mb-2",children:"Cover Letter"}),l.jsx("textarea",{id:"coverLetter",rows:6,className:"w-full bg-gray-700 text-white rounded-lg p-3 focus:ring-2 focus:ring-blue-500",placeholder:"Introduce yourself and explain why you're the best fit for this job...",value:h.coverLetter,onChange:S=>p({...h,coverLetter:S.target.value}),required:!0})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"proposedRate",className:"block text-sm font-medium text-gray-400 mb-2",children:"Proposed Rate (XRV)"}),l.jsx("input",{type:"number",id:"proposedRate",min:"0",step:"0.01",className:"w-full bg-gray-700 text-white rounded-lg p-3 focus:ring-2 focus:ring-blue-500",value:h.proposedRate,onChange:S=>p({...h,proposedRate:parseFloat(S.target.value)}),required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"estimatedDuration",className:"block text-sm font-medium text-gray-400 mb-2",children:"Estimated Duration (days)"}),l.jsx("input",{type:"number",id:"estimatedDuration",min:"1",className:"w-full bg-gray-700 text-white rounded-lg p-3 focus:ring-2 focus:ring-blue-500",value:h.estimatedDuration,onChange:S=>p({...h,estimatedDuration:parseInt(S.target.value)}),required:!0})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Portfolio Links"}),c.map((S,A)=>l.jsxs("div",{className:"flex gap-2 mb-2",children:[l.jsx("input",{type:"url",className:"flex-1 bg-gray-700 text-white rounded-lg p-3 focus:ring-2 focus:ring-blue-500",placeholder:"https://...",value:S,onChange:k=>E(A,k.target.value)}),A>0&&l.jsx("button",{type:"button",onClick:()=>y(A),className:"text-red-400 hover:text-red-300",children:"Remove"})]},A)),l.jsx("button",{type:"button",onClick:x,className:"text-blue-400 hover:text-blue-300 text-sm",children:"+ Add Portfolio Link"})]}),o&&l.jsx("div",{className:"text-red-400 text-sm",children:o}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("button",{type:"submit",disabled:s,className:`flex-1 bg-blue-600 hover:bg-blue-700 text-white rounded-lg px-4 py-3 font-medium
              transition-colors ${s?"opacity-50 cursor-not-allowed":""}`,children:s?"Submitting...":"Submit Application"}),l.jsx("button",{type:"button",onClick:r,className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white rounded-lg px-4 py-3 font-medium transition-colors",children:"Cancel"})]})]})]})},kh=({id:n,title:e,description:t,skills:r=[],postedDate:s,location:i,price:o,experienceLevel:a,poster:c,isSaved:d=!1,onApply:h,onSave:p})=>{const{user:x}=Ct(),[y,E]=I.useState(null),[g,S]=I.useState(null),[A,k]=I.useState(!1),[M,O]=I.useState(!1),B=async()=>{if(!(x!=null&&x.id)){E("Please login to apply for jobs"),window.location.href="/login";return}O(!0)},z=async H=>{k(!0),E(null);try{await h(n,H),O(!1),S("Application submitted successfully!"),setTimeout(()=>{S(null)},1e4)}catch(F){console.error("Application submission error:",F),E(F instanceof Error?F.message:"Failed to submit application")}finally{k(!1)}},V=async()=>{try{await p(n)}catch{E("Failed to save job")}};return l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[y&&l.jsxs("div",{className:"bg-red-500/10 border border-red-500/50 rounded-lg p-4 mb-4",children:[l.jsx("p",{className:"text-red-500 text-sm",children:y}),!(x!=null&&x.walletId)&&l.jsx("a",{href:"/profile",className:"text-blue-400 hover:text-blue-300 text-sm block mt-2",children:"Complete Profile →"})]}),g&&l.jsx("div",{className:"bg-green-500/10 border border-green-500/50 rounded-lg p-4 mb-4",children:l.jsx("p",{className:"text-green-500 text-sm",children:g})}),M?l.jsx(qS,{jobId:n,jobTitle:e,onSubmit:z,onCancel:()=>O(!1)}):l.jsxs("div",{className:"flex justify-between items-start mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:e}),l.jsxs("div",{className:"flex items-center space-x-4 text-gray-400",children:[l.jsxs("span",{children:["Posted ",s]}),l.jsx("span",{children:"•"}),l.jsx("span",{children:i})]})]}),l.jsx("button",{onClick:V,className:"text-gray-400 hover:text-blue-400",children:l.jsx("svg",{className:`w-6 h-6 ${d?"fill-current text-blue-400":"stroke-current"}`,fill:"none",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})})})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex space-x-4",children:[l.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 flex-1",children:[l.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Price"}),l.jsxs("div",{className:"text-xl font-bold text-white",children:[o," XRV"]})]}),l.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 flex-1",children:[l.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Experience Level"}),l.jsx("div",{className:"text-xl font-bold text-white capitalize",children:a})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Job Description"}),l.jsx("p",{className:"text-gray-400",children:t})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Skills & Expertise"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:r.map(H=>l.jsxs("div",{className:"bg-gray-700 rounded-full px-3 py-1",children:[l.jsx("span",{className:"text-white",children:H.name}),l.jsxs("span",{className:"text-gray-400 text-sm",children:[" • ",H.yearsRequired,"+ years"]})]},H.name))})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"About the Client"}),l.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[l.jsx("div",{className:"text-white font-medium mb-2",children:c.name}),l.jsxs("div",{className:"space-y-1 text-sm text-gray-400",children:[l.jsxs("div",{children:["Rating: ",c.rating,"/5"]}),l.jsxs("div",{children:[c.jobsPosted," jobs posted"]}),l.jsxs("div",{children:["Member since ",c.memberSince]})]})]})]}),l.jsx("div",{className:"mt-6",children:l.jsx("button",{onClick:B,className:"w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg mt-4",disabled:A,children:"Apply Now"})})]})]})};var WS=Object.defineProperty,HS=(n,e,t)=>e in n?WS(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Rc=(n,e,t)=>(HS(n,typeof e!="symbol"?e+"":e,t),t);let KS=class{constructor(){Rc(this,"current",this.detect()),Rc(this,"handoffState","pending"),Rc(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Qr=new KS;function Ko(n){return Qr.isServer?null:n instanceof Node?n.ownerDocument:n!=null&&n.hasOwnProperty("current")&&n.current instanceof Node?n.current.ownerDocument:document}function Vo(n){typeof queueMicrotask=="function"?queueMicrotask(n):Promise.resolve().then(n).catch(e=>setTimeout(()=>{throw e}))}function Ir(){let n=[],e={addEventListener(t,r,s,i){return t.addEventListener(r,s,i),e.add(()=>t.removeEventListener(r,s,i))},requestAnimationFrame(...t){let r=requestAnimationFrame(...t);return e.add(()=>cancelAnimationFrame(r))},nextFrame(...t){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...t))},setTimeout(...t){let r=setTimeout(...t);return e.add(()=>clearTimeout(r))},microTask(...t){let r={current:!0};return Vo(()=>{r.current&&t[0]()}),e.add(()=>{r.current=!1})},style(t,r,s){let i=t.style.getPropertyValue(r);return Object.assign(t.style,{[r]:s}),this.add(()=>{Object.assign(t.style,{[r]:i})})},group(t){let r=Ir();return t(r),this.add(()=>r.dispose())},add(t){return n.includes(t)||n.push(t),()=>{let r=n.indexOf(t);if(r>=0)for(let s of n.splice(r,1))s()}},dispose(){for(let t of n.splice(0))t()}};return e}function cu(){let[n]=I.useState(Ir);return I.useEffect(()=>()=>n.dispose(),[n]),n}let Vt=(n,e)=>{Qr.isServer?I.useEffect(n,e):I.useLayoutEffect(n,e)};function ls(n){let e=I.useRef(n);return Vt(()=>{e.current=n},[n]),e}let Xe=function(n){let e=ls(n);return J.useCallback((...t)=>e.current(...t),[e])},VS=I.createContext(void 0);function GS(){return I.useContext(VS)}function Cl(...n){return Array.from(new Set(n.flatMap(e=>typeof e=="string"?e.split(" "):[]))).filter(Boolean).join(" ")}function Mr(n,e,...t){if(n in e){let s=e[n];return typeof s=="function"?s(...t):s}let r=new Error(`Tried to handle "${n}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(s=>`"${s}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Mr),r}var xo=(n=>(n[n.None=0]="None",n[n.RenderStrategy=1]="RenderStrategy",n[n.Static=2]="Static",n))(xo||{}),Er=(n=>(n[n.Unmount=0]="Unmount",n[n.Hidden=1]="Hidden",n))(Er||{});function fn(){let n=QS();return I.useCallback(e=>YS({mergeRefs:n,...e}),[n])}function YS({ourProps:n,theirProps:e,slot:t,defaultTag:r,features:s,visible:i=!0,name:o,mergeRefs:a}){a=a??ZS;let c=W0(e,n);if(i)return Hi(c,t,r,o,a);let d=s??0;if(d&2){let{static:h=!1,...p}=c;if(h)return Hi(p,t,r,o,a)}if(d&1){let{unmount:h=!0,...p}=c;return Mr(h?0:1,{0(){return null},1(){return Hi({...p,hidden:!0,style:{display:"none"}},t,r,o,a)}})}return Hi(c,t,r,o,a)}function Hi(n,e={},t,r,s){let{as:i=t,children:o,refName:a="ref",...c}=Bc(n,["unmount","static"]),d=n.ref!==void 0?{[a]:n.ref}:{},h=typeof o=="function"?o(e):o;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(e)),c["aria-labelledby"]&&c["aria-labelledby"]===c.id&&(c["aria-labelledby"]=void 0);let p={};if(e){let x=!1,y=[];for(let[E,g]of Object.entries(e))typeof g=="boolean"&&(x=!0),g===!0&&y.push(E.replace(/([A-Z])/g,S=>`-${S.toLowerCase()}`));if(x){p["data-headlessui-state"]=y.join(" ");for(let E of y)p[`data-${E}`]=""}}if(i===I.Fragment&&(Object.keys(_r(c)).length>0||Object.keys(_r(p)).length>0))if(!I.isValidElement(h)||Array.isArray(h)&&h.length>1){if(Object.keys(_r(c)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(_r(c)).concat(Object.keys(_r(p))).map(x=>`  - ${x}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(x=>`  - ${x}`).join(`
`)].join(`
`))}else{let x=h.props,y=x==null?void 0:x.className,E=typeof y=="function"?(...A)=>Cl(y(...A),c.className):Cl(y,c.className),g=E?{className:E}:{},S=W0(h.props,_r(Bc(c,["ref"])));for(let A in p)A in S&&delete p[A];return I.cloneElement(h,Object.assign({},S,p,d,{ref:s(JS(h),d.ref)},g))}return I.createElement(i,Object.assign({},Bc(c,["ref"]),i!==I.Fragment&&d,i!==I.Fragment&&p),h)}function QS(){let n=I.useRef([]),e=I.useCallback(t=>{for(let r of n.current)r!=null&&(typeof r=="function"?r(t):r.current=t)},[]);return(...t)=>{if(!t.every(r=>r==null))return n.current=t,e}}function ZS(...n){return n.every(e=>e==null)?void 0:e=>{for(let t of n)t!=null&&(typeof t=="function"?t(e):t.current=e)}}function W0(...n){if(n.length===0)return{};if(n.length===1)return n[0];let e={},t={};for(let r of n)for(let s in r)s.startsWith("on")&&typeof r[s]=="function"?(t[s]!=null||(t[s]=[]),t[s].push(r[s])):e[s]=r[s];if(e.disabled||e["aria-disabled"])for(let r in t)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(t[r]=[s=>{var i;return(i=s==null?void 0:s.preventDefault)==null?void 0:i.call(s)}]);for(let r in t)Object.assign(e,{[r](s,...i){let o=t[r];for(let a of o){if((s instanceof Event||(s==null?void 0:s.nativeEvent)instanceof Event)&&s.defaultPrevented)return;a(s,...i)}}});return e}function tn(n){var e;return Object.assign(I.forwardRef(n),{displayName:(e=n.displayName)!=null?e:n.name})}function _r(n){let e=Object.assign({},n);for(let t in e)e[t]===void 0&&delete e[t];return e}function Bc(n,e=[]){let t=Object.assign({},n);for(let r of e)r in t&&delete t[r];return t}function JS(n){return J.version.split(".")[0]>="19"?n.props.ref:n.ref}let XS="span";var vo=(n=>(n[n.None=1]="None",n[n.Focusable=2]="Focusable",n[n.Hidden=4]="Hidden",n))(vo||{});function eE(n,e){var t;let{features:r=1,...s}=n,i={ref:e,"aria-hidden":(r&2)===2?!0:(t=s["aria-hidden"])!=null?t:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return fn()({ourProps:i,theirProps:s,slot:{},defaultTag:XS,name:"Hidden"})}let Tl=tn(eE),H0=Symbol();function tE(n,e=!0){return Object.assign(n,{[H0]:e})}function kn(...n){let e=I.useRef(n);I.useEffect(()=>{e.current=n},[n]);let t=Xe(r=>{for(let s of e.current)s!=null&&(typeof s=="function"?s(r):s.current=r)});return n.every(r=>r==null||(r==null?void 0:r[H0]))?void 0:t}let lu=I.createContext(null);lu.displayName="DescriptionContext";function K0(){let n=I.useContext(lu);if(n===null){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,K0),e}return n}function nE(){let[n,e]=I.useState([]);return[n.length>0?n.join(" "):void 0,I.useMemo(()=>function(t){let r=Xe(i=>(e(o=>[...o,i]),()=>e(o=>{let a=o.slice(),c=a.indexOf(i);return c!==-1&&a.splice(c,1),a}))),s=I.useMemo(()=>({register:r,slot:t.slot,name:t.name,props:t.props,value:t.value}),[r,t.slot,t.name,t.props,t.value]);return J.createElement(lu.Provider,{value:s},t.children)},[e])]}let rE="p";function sE(n,e){let t=I.useId(),r=GS(),{id:s=`headlessui-description-${t}`,...i}=n,o=K0(),a=kn(e);Vt(()=>o.register(s),[s,o.register]);let c=r||!1,d=I.useMemo(()=>({...o.slot,disabled:c}),[o.slot,c]),h={ref:a,...o.props,id:s};return fn()({ourProps:h,theirProps:i,slot:d,defaultTag:rE,name:o.name||"Description"})}let iE=tn(sE),oE=Object.assign(iE,{});var V0=(n=>(n.Space=" ",n.Enter="Enter",n.Escape="Escape",n.Backspace="Backspace",n.Delete="Delete",n.ArrowLeft="ArrowLeft",n.ArrowUp="ArrowUp",n.ArrowRight="ArrowRight",n.ArrowDown="ArrowDown",n.Home="Home",n.End="End",n.PageUp="PageUp",n.PageDown="PageDown",n.Tab="Tab",n))(V0||{});let aE=I.createContext(()=>{});function cE({value:n,children:e}){return J.createElement(aE.Provider,{value:n},e)}let lE=class extends Map{constructor(e){super(),this.factory=e}get(e){let t=super.get(e);return t===void 0&&(t=this.factory(e),this.set(e,t)),t}};function G0(n,e){let t=n(),r=new Set;return{getSnapshot(){return t},subscribe(s){return r.add(s),()=>r.delete(s)},dispatch(s,...i){let o=e[s].call(t,...i);o&&(t=o,r.forEach(a=>a()))}}}function Y0(n){return I.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getSnapshot)}let uE=new lE(()=>G0(()=>[],{ADD(n){return this.includes(n)?this:[...this,n]},REMOVE(n){let e=this.indexOf(n);if(e===-1)return this;let t=this.slice();return t.splice(e,1),t}}));function Ks(n,e){let t=uE.get(e),r=I.useId(),s=Y0(t);if(Vt(()=>{if(n)return t.dispatch("ADD",r),()=>t.dispatch("REMOVE",r)},[t,n]),!n)return!1;let i=s.indexOf(r),o=s.length;return i===-1&&(i=o,o+=1),i===o-1}let _l=new Map,ci=new Map;function Lh(n){var e;let t=(e=ci.get(n))!=null?e:0;return ci.set(n,t+1),t!==0?()=>Rh(n):(_l.set(n,{"aria-hidden":n.getAttribute("aria-hidden"),inert:n.inert}),n.setAttribute("aria-hidden","true"),n.inert=!0,()=>Rh(n))}function Rh(n){var e;let t=(e=ci.get(n))!=null?e:1;if(t===1?ci.delete(n):ci.set(n,t-1),t!==1)return;let r=_l.get(n);r&&(r["aria-hidden"]===null?n.removeAttribute("aria-hidden"):n.setAttribute("aria-hidden",r["aria-hidden"]),n.inert=r.inert,_l.delete(n))}function dE(n,{allowed:e,disallowed:t}={}){let r=Ks(n,"inert-others");Vt(()=>{var s,i;if(!r)return;let o=Ir();for(let c of(s=t==null?void 0:t())!=null?s:[])c&&o.add(Lh(c));let a=(i=e==null?void 0:e())!=null?i:[];for(let c of a){if(!c)continue;let d=Ko(c);if(!d)continue;let h=c.parentElement;for(;h&&h!==d.body;){for(let p of h.children)a.some(x=>p.contains(x))||o.add(Lh(p));h=h.parentElement}}return o.dispose},[r,e,t])}function hE(n,e,t){let r=ls(s=>{let i=s.getBoundingClientRect();i.x===0&&i.y===0&&i.width===0&&i.height===0&&t()});I.useEffect(()=>{if(!n)return;let s=e===null?null:e instanceof HTMLElement?e:e.current;if(!s)return;let i=Ir();if(typeof ResizeObserver<"u"){let o=new ResizeObserver(()=>r.current(s));o.observe(s),i.add(()=>o.disconnect())}if(typeof IntersectionObserver<"u"){let o=new IntersectionObserver(()=>r.current(s));o.observe(s),i.add(()=>o.disconnect())}return()=>i.dispose()},[e,r,n])}let So=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(n=>`${n}:not([tabindex='-1'])`).join(","),fE=["[data-autofocus]"].map(n=>`${n}:not([tabindex='-1'])`).join(",");var qn=(n=>(n[n.First=1]="First",n[n.Previous=2]="Previous",n[n.Next=4]="Next",n[n.Last=8]="Last",n[n.WrapAround=16]="WrapAround",n[n.NoScroll=32]="NoScroll",n[n.AutoFocus=64]="AutoFocus",n))(qn||{}),kl=(n=>(n[n.Error=0]="Error",n[n.Overflow=1]="Overflow",n[n.Success=2]="Success",n[n.Underflow=3]="Underflow",n))(kl||{}),pE=(n=>(n[n.Previous=-1]="Previous",n[n.Next=1]="Next",n))(pE||{});function mE(n=document.body){return n==null?[]:Array.from(n.querySelectorAll(So)).sort((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER)))}function gE(n=document.body){return n==null?[]:Array.from(n.querySelectorAll(fE)).sort((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER)))}var Q0=(n=>(n[n.Strict=0]="Strict",n[n.Loose=1]="Loose",n))(Q0||{});function yE(n,e=0){var t;return n===((t=Ko(n))==null?void 0:t.body)?!1:Mr(e,{0(){return n.matches(So)},1(){let r=n;for(;r!==null;){if(r.matches(So))return!0;r=r.parentElement}return!1}})}var wE=(n=>(n[n.Keyboard=0]="Keyboard",n[n.Mouse=1]="Mouse",n))(wE||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",n=>{n.metaKey||n.altKey||n.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",n=>{n.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:n.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Yn(n){n==null||n.focus({preventScroll:!0})}let bE=["textarea","input"].join(",");function xE(n){var e,t;return(t=(e=n==null?void 0:n.matches)==null?void 0:e.call(n,bE))!=null?t:!1}function vE(n,e=t=>t){return n.slice().sort((t,r)=>{let s=e(t),i=e(r);if(s===null||i===null)return 0;let o=s.compareDocumentPosition(i);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function li(n,e,{sorted:t=!0,relativeTo:r=null,skipElements:s=[]}={}){let i=Array.isArray(n)?n.length>0?n[0].ownerDocument:document:n.ownerDocument,o=Array.isArray(n)?t?vE(n):n:e&64?gE(n):mE(n);s.length>0&&o.length>1&&(o=o.filter(y=>!s.some(E=>E!=null&&"current"in E?(E==null?void 0:E.current)===y:E===y))),r=r??i.activeElement;let a=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,o.indexOf(r))-1;if(e&4)return Math.max(0,o.indexOf(r))+1;if(e&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=e&32?{preventScroll:!0}:{},h=0,p=o.length,x;do{if(h>=p||h+p<=0)return 0;let y=c+h;if(e&16)y=(y+p)%p;else{if(y<0)return 3;if(y>=p)return 1}x=o[y],x==null||x.focus(d),h+=a}while(x!==i.activeElement);return e&6&&xE(x)&&x.select(),2}function Z0(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function SE(){return/Android/gi.test(window.navigator.userAgent)}function EE(){return Z0()||SE()}function ei(n,e,t,r){let s=ls(t);I.useEffect(()=>{if(!n)return;function i(o){s.current(o)}return document.addEventListener(e,i,r),()=>document.removeEventListener(e,i,r)},[n,e,r])}function J0(n,e,t,r){let s=ls(t);I.useEffect(()=>{if(!n)return;function i(o){s.current(o)}return window.addEventListener(e,i,r),()=>window.removeEventListener(e,i,r)},[n,e,r])}const Bh=30;function NE(n,e,t){let r=Ks(n,"outside-click"),s=ls(t),i=I.useCallback(function(c,d){if(c.defaultPrevented)return;let h=d(c);if(h===null||!h.getRootNode().contains(h)||!h.isConnected)return;let p=function x(y){return typeof y=="function"?x(y()):Array.isArray(y)||y instanceof Set?y:[y]}(e);for(let x of p)if(x!==null&&(x.contains(h)||c.composed&&c.composedPath().includes(x)))return;return!yE(h,Q0.Loose)&&h.tabIndex!==-1&&c.preventDefault(),s.current(c,h)},[s,e]),o=I.useRef(null);ei(r,"pointerdown",c=>{var d,h;o.current=((h=(d=c.composedPath)==null?void 0:d.call(c))==null?void 0:h[0])||c.target},!0),ei(r,"mousedown",c=>{var d,h;o.current=((h=(d=c.composedPath)==null?void 0:d.call(c))==null?void 0:h[0])||c.target},!0),ei(r,"click",c=>{EE()||o.current&&(i(c,()=>o.current),o.current=null)},!0);let a=I.useRef({x:0,y:0});ei(r,"touchstart",c=>{a.current.x=c.touches[0].clientX,a.current.y=c.touches[0].clientY},!0),ei(r,"touchend",c=>{let d={x:c.changedTouches[0].clientX,y:c.changedTouches[0].clientY};if(!(Math.abs(d.x-a.current.x)>=Bh||Math.abs(d.y-a.current.y)>=Bh))return i(c,()=>c.target instanceof HTMLElement?c.target:null)},!0),J0(r,"blur",c=>i(c,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function Ai(...n){return I.useMemo(()=>Ko(...n),[...n])}function X0(n,e,t,r){let s=ls(t);I.useEffect(()=>{n=n??window;function i(o){s.current(o)}return n.addEventListener(e,i,r),()=>n.removeEventListener(e,i,r)},[n,e,r])}function ME(){let n;return{before({doc:e}){var t;let r=e.documentElement,s=(t=e.defaultView)!=null?t:window;n=Math.max(0,s.innerWidth-r.clientWidth)},after({doc:e,d:t}){let r=e.documentElement,s=Math.max(0,r.clientWidth-r.offsetWidth),i=Math.max(0,n-s);t.style(r,"paddingRight",`${i}px`)}}}function jE(){return Z0()?{before({doc:n,d:e,meta:t}){function r(s){return t.containers.flatMap(i=>i()).some(i=>i.contains(s))}e.microTask(()=>{var s;if(window.getComputedStyle(n.documentElement).scrollBehavior!=="auto"){let a=Ir();a.style(n.documentElement,"scrollBehavior","auto"),e.add(()=>e.microTask(()=>a.dispose()))}let i=(s=window.scrollY)!=null?s:window.pageYOffset,o=null;e.addEventListener(n,"click",a=>{if(a.target instanceof HTMLElement)try{let c=a.target.closest("a");if(!c)return;let{hash:d}=new URL(c.href),h=n.querySelector(d);h&&!r(h)&&(o=h)}catch{}},!0),e.addEventListener(n,"touchstart",a=>{if(a.target instanceof HTMLElement)if(r(a.target)){let c=a.target;for(;c.parentElement&&r(c.parentElement);)c=c.parentElement;e.style(c,"overscrollBehavior","contain")}else e.style(a.target,"touchAction","none")}),e.addEventListener(n,"touchmove",a=>{if(a.target instanceof HTMLElement){if(a.target.tagName==="INPUT")return;if(r(a.target)){let c=a.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&a.preventDefault()}else a.preventDefault()}},{passive:!1}),e.add(()=>{var a;let c=(a=window.scrollY)!=null?a:window.pageYOffset;i!==c&&window.scrollTo(0,i),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function AE(){return{before({doc:n,d:e}){e.style(n.documentElement,"overflow","hidden")}}}function IE(n){let e={};for(let t of n)Object.assign(e,t(e));return e}let Ur=G0(()=>new Map,{PUSH(n,e){var t;let r=(t=this.get(n))!=null?t:{doc:n,count:0,d:Ir(),meta:new Set};return r.count++,r.meta.add(e),this.set(n,r),this},POP(n,e){let t=this.get(n);return t&&(t.count--,t.meta.delete(e)),this},SCROLL_PREVENT({doc:n,d:e,meta:t}){let r={doc:n,d:e,meta:IE(t)},s=[jE(),ME(),AE()];s.forEach(({before:i})=>i==null?void 0:i(r)),s.forEach(({after:i})=>i==null?void 0:i(r))},SCROLL_ALLOW({d:n}){n.dispose()},TEARDOWN({doc:n}){this.delete(n)}});Ur.subscribe(()=>{let n=Ur.getSnapshot(),e=new Map;for(let[t]of n)e.set(t,t.documentElement.style.overflow);for(let t of n.values()){let r=e.get(t.doc)==="hidden",s=t.count!==0;(s&&!r||!s&&r)&&Ur.dispatch(t.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",t),t.count===0&&Ur.dispatch("TEARDOWN",t)}});function CE(n,e,t=()=>({containers:[]})){let r=Y0(Ur),s=e?r.get(e):void 0,i=s?s.count>0:!1;return Vt(()=>{if(!(!e||!n))return Ur.dispatch("PUSH",e,t),()=>Ur.dispatch("POP",e,t)},[n,e]),i}function TE(n,e,t=()=>[document.body]){let r=Ks(n,"scroll-lock");CE(r,e,s=>{var i;return{containers:[...(i=s.containers)!=null?i:[],t]}})}function _E(n=0){let[e,t]=I.useState(n),r=I.useCallback(c=>t(c),[e]),s=I.useCallback(c=>t(d=>d|c),[e]),i=I.useCallback(c=>(e&c)===c,[e]),o=I.useCallback(c=>t(d=>d&~c),[t]),a=I.useCallback(c=>t(d=>d^c),[t]);return{flags:e,setFlag:r,addFlag:s,hasFlag:i,removeFlag:o,toggleFlag:a}}var kE={},Oh,Dh;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((Oh=process==null?void 0:kE)==null?void 0:Oh.NODE_ENV)==="test"&&typeof((Dh=Element==null?void 0:Element.prototype)==null?void 0:Dh.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var LE=(n=>(n[n.None=0]="None",n[n.Closed=1]="Closed",n[n.Enter=2]="Enter",n[n.Leave=4]="Leave",n))(LE||{});function RE(n){let e={};for(let t in n)n[t]===!0&&(e[`data-${t}`]="");return e}function BE(n,e,t,r){let[s,i]=I.useState(t),{hasFlag:o,addFlag:a,removeFlag:c}=_E(n&&s?3:0),d=I.useRef(!1),h=I.useRef(!1),p=cu();return Vt(()=>{var x;if(n){if(t&&i(!0),!e){t&&a(3);return}return(x=r==null?void 0:r.start)==null||x.call(r,t),OE(e,{inFlight:d,prepare(){h.current?h.current=!1:h.current=d.current,d.current=!0,!h.current&&(t?(a(3),c(4)):(a(4),c(2)))},run(){h.current?t?(c(3),a(4)):(c(4),a(3)):t?c(1):a(1)},done(){var y;h.current&&typeof e.getAnimations=="function"&&e.getAnimations().length>0||(d.current=!1,c(7),t||i(!1),(y=r==null?void 0:r.end)==null||y.call(r,t))}})}},[n,t,e,p]),n?[s,{closed:o(1),enter:o(2),leave:o(4),transition:o(2)||o(4)}]:[t,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function OE(n,{prepare:e,run:t,done:r,inFlight:s}){let i=Ir();return PE(n,{prepare:e,inFlight:s}),i.nextFrame(()=>{t(),i.requestAnimationFrame(()=>{i.add(DE(n,r))})}),i.dispose}function DE(n,e){var t,r;let s=Ir();if(!n)return s.dispose;let i=!1;s.add(()=>{i=!0});let o=(r=(t=n.getAnimations)==null?void 0:t.call(n).filter(a=>a instanceof CSSTransition))!=null?r:[];return o.length===0?(e(),s.dispose):(Promise.allSettled(o.map(a=>a.finished)).then(()=>{i||e()}),s.dispose)}function PE(n,{inFlight:e,prepare:t}){if(e!=null&&e.current){t();return}let r=n.style.transition;n.style.transition="none",t(),n.offsetHeight,n.style.transition=r}function uu(n,e){let t=I.useRef([]),r=Xe(n);I.useEffect(()=>{let s=[...t.current];for(let[i,o]of e.entries())if(t.current[i]!==o){let a=r(e,s);return t.current=e,a}},[r,...e])}let Go=I.createContext(null);Go.displayName="OpenClosedContext";var xn=(n=>(n[n.Open=1]="Open",n[n.Closed=2]="Closed",n[n.Closing=4]="Closing",n[n.Opening=8]="Opening",n))(xn||{});function Yo(){return I.useContext(Go)}function FE({value:n,children:e}){return J.createElement(Go.Provider,{value:n},e)}function UE({children:n}){return J.createElement(Go.Provider,{value:null},n)}function zE(n){function e(){document.readyState!=="loading"&&(n(),document.removeEventListener("DOMContentLoaded",e))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",e),e())}let dr=[];zE(()=>{function n(e){if(!(e.target instanceof HTMLElement)||e.target===document.body||dr[0]===e.target)return;let t=e.target;t=t.closest(So),dr.unshift(t??e.target),dr=dr.filter(r=>r!=null&&r.isConnected),dr.splice(10)}window.addEventListener("click",n,{capture:!0}),window.addEventListener("mousedown",n,{capture:!0}),window.addEventListener("focus",n,{capture:!0}),document.body.addEventListener("click",n,{capture:!0}),document.body.addEventListener("mousedown",n,{capture:!0}),document.body.addEventListener("focus",n,{capture:!0})});function ep(n){let e=Xe(n),t=I.useRef(!1);I.useEffect(()=>(t.current=!1,()=>{t.current=!0,Vo(()=>{t.current&&e()})}),[e])}function $E(){let n=typeof document>"u";return"useSyncExternalStore"in Eu?(e=>e.useSyncExternalStore)(Eu)(()=>()=>{},()=>!1,()=>!n):!1}function Ii(){let n=$E(),[e,t]=I.useState(Qr.isHandoffComplete);return e&&Qr.isHandoffComplete===!1&&t(!1),I.useEffect(()=>{e!==!0&&t(!0)},[e]),I.useEffect(()=>Qr.handoff(),[]),n?!1:e}let tp=I.createContext(!1);function qE(){return I.useContext(tp)}function Ph(n){return J.createElement(tp.Provider,{value:n.force},n.children)}function WE(n){let e=qE(),t=I.useContext(rp),r=Ai(n),[s,i]=I.useState(()=>{var o;if(!e&&t!==null)return(o=t.current)!=null?o:null;if(Qr.isServer)return null;let a=r==null?void 0:r.getElementById("headlessui-portal-root");if(a)return a;if(r===null)return null;let c=r.createElement("div");return c.setAttribute("id","headlessui-portal-root"),r.body.appendChild(c)});return I.useEffect(()=>{s!==null&&(r!=null&&r.body.contains(s)||r==null||r.body.appendChild(s))},[s,r]),I.useEffect(()=>{e||t!==null&&i(t.current)},[t,i,e]),s}let np=I.Fragment,HE=tn(function(n,e){let t=n,r=I.useRef(null),s=kn(tE(p=>{r.current=p}),e),i=Ai(r),o=WE(r),[a]=I.useState(()=>{var p;return Qr.isServer?null:(p=i==null?void 0:i.createElement("div"))!=null?p:null}),c=I.useContext(Ll),d=Ii();Vt(()=>{!o||!a||o.contains(a)||(a.setAttribute("data-headlessui-portal",""),o.appendChild(a))},[o,a]),Vt(()=>{if(a&&c)return c.register(a)},[c,a]),ep(()=>{var p;!o||!a||(a instanceof Node&&o.contains(a)&&o.removeChild(a),o.childNodes.length<=0&&((p=o.parentElement)==null||p.removeChild(o)))});let h=fn();return d?!o||!a?null:Zh.createPortal(h({ourProps:{ref:s},theirProps:t,slot:{},defaultTag:np,name:"Portal"}),a):null});function KE(n,e){let t=kn(e),{enabled:r=!0,...s}=n,i=fn();return r?J.createElement(HE,{...s,ref:t}):i({ourProps:{ref:t},theirProps:s,slot:{},defaultTag:np,name:"Portal"})}let VE=I.Fragment,rp=I.createContext(null);function GE(n,e){let{target:t,...r}=n,s={ref:kn(e)},i=fn();return J.createElement(rp.Provider,{value:t},i({ourProps:s,theirProps:r,defaultTag:VE,name:"Popover.Group"}))}let Ll=I.createContext(null);function YE(){let n=I.useContext(Ll),e=I.useRef([]),t=Xe(i=>(e.current.push(i),n&&n.register(i),()=>r(i))),r=Xe(i=>{let o=e.current.indexOf(i);o!==-1&&e.current.splice(o,1),n&&n.unregister(i)}),s=I.useMemo(()=>({register:t,unregister:r,portals:e}),[t,r,e]);return[e,I.useMemo(()=>function({children:i}){return J.createElement(Ll.Provider,{value:s},i)},[s])]}let QE=tn(KE),sp=tn(GE),ZE=Object.assign(QE,{Group:sp});function JE(n,e=typeof document<"u"?document.defaultView:null,t){let r=Ks(n,"escape");X0(e,"keydown",s=>{r&&(s.defaultPrevented||s.key===V0.Escape&&t(s))})}function XE(){var n;let[e]=I.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[t,r]=I.useState((n=e==null?void 0:e.matches)!=null?n:!1);return Vt(()=>{if(!e)return;function s(i){r(i.matches)}return e.addEventListener("change",s),()=>e.removeEventListener("change",s)},[e]),t}function e2({defaultContainers:n=[],portals:e,mainTreeNode:t}={}){let r=Ai(t),s=Xe(()=>{var i,o;let a=[];for(let c of n)c!==null&&(c instanceof HTMLElement?a.push(c):"current"in c&&c.current instanceof HTMLElement&&a.push(c.current));if(e!=null&&e.current)for(let c of e.current)a.push(c);for(let c of(i=r==null?void 0:r.querySelectorAll("html > *, body > *"))!=null?i:[])c!==document.body&&c!==document.head&&c instanceof HTMLElement&&c.id!=="headlessui-portal-root"&&(t&&(c.contains(t)||c.contains((o=t==null?void 0:t.getRootNode())==null?void 0:o.host))||a.some(d=>c.contains(d))||a.push(c));return a});return{resolveContainers:s,contains:Xe(i=>s().some(o=>o.contains(i)))}}let ip=I.createContext(null);function Fh({children:n,node:e}){let[t,r]=I.useState(null),s=op(e??t);return J.createElement(ip.Provider,{value:s},n,s===null&&J.createElement(Tl,{features:vo.Hidden,ref:i=>{var o,a;if(i){for(let c of(a=(o=Ko(i))==null?void 0:o.querySelectorAll("html > *, body > *"))!=null?a:[])if(c!==document.body&&c!==document.head&&c instanceof HTMLElement&&c!=null&&c.contains(i)){r(c);break}}}}))}function op(n=null){var e;return(e=I.useContext(ip))!=null?e:n}function du(){let n=I.useRef(!1);return Vt(()=>(n.current=!0,()=>{n.current=!1}),[]),n}var si=(n=>(n[n.Forwards=0]="Forwards",n[n.Backwards=1]="Backwards",n))(si||{});function t2(){let n=I.useRef(0);return J0(!0,"keydown",e=>{e.key==="Tab"&&(n.current=e.shiftKey?1:0)},!0),n}function ap(n){if(!n)return new Set;if(typeof n=="function")return new Set(n());let e=new Set;for(let t of n.current)t.current instanceof HTMLElement&&e.add(t.current);return e}let n2="div";var Lr=(n=>(n[n.None=0]="None",n[n.InitialFocus=1]="InitialFocus",n[n.TabLock=2]="TabLock",n[n.FocusLock=4]="FocusLock",n[n.RestoreFocus=8]="RestoreFocus",n[n.AutoFocus=16]="AutoFocus",n))(Lr||{});function r2(n,e){let t=I.useRef(null),r=kn(t,e),{initialFocus:s,initialFocusFallback:i,containers:o,features:a=15,...c}=n;Ii()||(a=0);let d=Ai(t);a2(a,{ownerDocument:d});let h=c2(a,{ownerDocument:d,container:t,initialFocus:s,initialFocusFallback:i});l2(a,{ownerDocument:d,container:t,containers:o,previousActiveElement:h});let p=t2(),x=Xe(k=>{let M=t.current;M&&(O=>O())(()=>{Mr(p.current,{[si.Forwards]:()=>{li(M,qn.First,{skipElements:[k.relatedTarget,i]})},[si.Backwards]:()=>{li(M,qn.Last,{skipElements:[k.relatedTarget,i]})}})})}),y=Ks(!!(a&2),"focus-trap#tab-lock"),E=cu(),g=I.useRef(!1),S={ref:r,onKeyDown(k){k.key=="Tab"&&(g.current=!0,E.requestAnimationFrame(()=>{g.current=!1}))},onBlur(k){if(!(a&4))return;let M=ap(o);t.current instanceof HTMLElement&&M.add(t.current);let O=k.relatedTarget;O instanceof HTMLElement&&O.dataset.headlessuiFocusGuard!=="true"&&(cp(M,O)||(g.current?li(t.current,Mr(p.current,{[si.Forwards]:()=>qn.Next,[si.Backwards]:()=>qn.Previous})|qn.WrapAround,{relativeTo:k.target}):k.target instanceof HTMLElement&&Yn(k.target)))}},A=fn();return J.createElement(J.Fragment,null,y&&J.createElement(Tl,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:x,features:vo.Focusable}),A({ourProps:S,theirProps:c,defaultTag:n2,name:"FocusTrap"}),y&&J.createElement(Tl,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:x,features:vo.Focusable}))}let s2=tn(r2),i2=Object.assign(s2,{features:Lr});function o2(n=!0){let e=I.useRef(dr.slice());return uu(([t],[r])=>{r===!0&&t===!1&&Vo(()=>{e.current.splice(0)}),r===!1&&t===!0&&(e.current=dr.slice())},[n,dr,e]),Xe(()=>{var t;return(t=e.current.find(r=>r!=null&&r.isConnected))!=null?t:null})}function a2(n,{ownerDocument:e}){let t=!!(n&8),r=o2(t);uu(()=>{t||(e==null?void 0:e.activeElement)===(e==null?void 0:e.body)&&Yn(r())},[t]),ep(()=>{t&&Yn(r())})}function c2(n,{ownerDocument:e,container:t,initialFocus:r,initialFocusFallback:s}){let i=I.useRef(null),o=Ks(!!(n&1),"focus-trap#initial-focus"),a=du();return uu(()=>{if(n===0)return;if(!o){s!=null&&s.current&&Yn(s.current);return}let c=t.current;c&&Vo(()=>{if(!a.current)return;let d=e==null?void 0:e.activeElement;if(r!=null&&r.current){if((r==null?void 0:r.current)===d){i.current=d;return}}else if(c.contains(d)){i.current=d;return}if(r!=null&&r.current)Yn(r.current);else{if(n&16){if(li(c,qn.First|qn.AutoFocus)!==kl.Error)return}else if(li(c,qn.First)!==kl.Error)return;if(s!=null&&s.current&&(Yn(s.current),(e==null?void 0:e.activeElement)===s.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}i.current=e==null?void 0:e.activeElement})},[s,o,n]),i}function l2(n,{ownerDocument:e,container:t,containers:r,previousActiveElement:s}){let i=du(),o=!!(n&4);X0(e==null?void 0:e.defaultView,"focus",a=>{if(!o||!i.current)return;let c=ap(r);t.current instanceof HTMLElement&&c.add(t.current);let d=s.current;if(!d)return;let h=a.target;h&&h instanceof HTMLElement?cp(c,h)?(s.current=h,Yn(h)):(a.preventDefault(),a.stopPropagation(),Yn(d)):Yn(s.current)},!0)}function cp(n,e){for(let t of n)if(t.contains(e))return!0;return!1}function lp(n){var e;return!!(n.enter||n.enterFrom||n.enterTo||n.leave||n.leaveFrom||n.leaveTo)||((e=n.as)!=null?e:dp)!==I.Fragment||J.Children.count(n.children)===1}let Qo=I.createContext(null);Qo.displayName="TransitionContext";var u2=(n=>(n.Visible="visible",n.Hidden="hidden",n))(u2||{});function d2(){let n=I.useContext(Qo);if(n===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return n}function h2(){let n=I.useContext(Zo);if(n===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return n}let Zo=I.createContext(null);Zo.displayName="NestingContext";function Jo(n){return"children"in n?Jo(n.children):n.current.filter(({el:e})=>e.current!==null).filter(({state:e})=>e==="visible").length>0}function up(n,e){let t=ls(n),r=I.useRef([]),s=du(),i=cu(),o=Xe((y,E=Er.Hidden)=>{let g=r.current.findIndex(({el:S})=>S===y);g!==-1&&(Mr(E,{[Er.Unmount](){r.current.splice(g,1)},[Er.Hidden](){r.current[g].state="hidden"}}),i.microTask(()=>{var S;!Jo(r)&&s.current&&((S=t.current)==null||S.call(t))}))}),a=Xe(y=>{let E=r.current.find(({el:g})=>g===y);return E?E.state!=="visible"&&(E.state="visible"):r.current.push({el:y,state:"visible"}),()=>o(y,Er.Unmount)}),c=I.useRef([]),d=I.useRef(Promise.resolve()),h=I.useRef({enter:[],leave:[]}),p=Xe((y,E,g)=>{c.current.splice(0),e&&(e.chains.current[E]=e.chains.current[E].filter(([S])=>S!==y)),e==null||e.chains.current[E].push([y,new Promise(S=>{c.current.push(S)})]),e==null||e.chains.current[E].push([y,new Promise(S=>{Promise.all(h.current[E].map(([A,k])=>k)).then(()=>S())})]),E==="enter"?d.current=d.current.then(()=>e==null?void 0:e.wait.current).then(()=>g(E)):g(E)}),x=Xe((y,E,g)=>{Promise.all(h.current[E].splice(0).map(([S,A])=>A)).then(()=>{var S;(S=c.current.shift())==null||S()}).then(()=>g(E))});return I.useMemo(()=>({children:r,register:a,unregister:o,onStart:p,onStop:x,wait:d,chains:h}),[a,o,r,p,x,h,d])}let dp=I.Fragment,hp=xo.RenderStrategy;function f2(n,e){var t,r;let{transition:s=!0,beforeEnter:i,afterEnter:o,beforeLeave:a,afterLeave:c,enter:d,enterFrom:h,enterTo:p,entered:x,leave:y,leaveFrom:E,leaveTo:g,...S}=n,[A,k]=I.useState(null),M=I.useRef(null),O=lp(n),B=kn(...O?[M,e,k]:e===null?[]:[e]),z=(t=S.unmount)==null||t?Er.Unmount:Er.Hidden,{show:V,appear:H,initial:F}=d2(),[$,q]=I.useState(V?"visible":"hidden"),Y=h2(),{register:_,unregister:u}=Y;Vt(()=>_(M),[_,M]),Vt(()=>{if(z===Er.Hidden&&M.current){if(V&&$!=="visible"){q("visible");return}return Mr($,{hidden:()=>u(M),visible:()=>_(M)})}},[$,M,_,u,V,z]);let b=Ii();Vt(()=>{if(O&&b&&$==="visible"&&M.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[M,$,b,O]);let N=F&&!H,j=H&&V&&F,R=I.useRef(!1),U=up(()=>{R.current||(q("hidden"),u(M))},Y),K=Xe(ne=>{R.current=!0;let ie=ne?"enter":"leave";U.onStart(M,ie,ae=>{ae==="enter"?i==null||i():ae==="leave"&&(a==null||a())})}),L=Xe(ne=>{let ie=ne?"enter":"leave";R.current=!1,U.onStop(M,ie,ae=>{ae==="enter"?o==null||o():ae==="leave"&&(c==null||c())}),ie==="leave"&&!Jo(U)&&(q("hidden"),u(M))});I.useEffect(()=>{O&&s||(K(V),L(V))},[V,O,s]);let f=!(!s||!O||!b||N),[,m]=BE(f,A,V,{start:K,end:L}),T=_r({ref:B,className:((r=Cl(S.className,j&&d,j&&h,m.enter&&d,m.enter&&m.closed&&h,m.enter&&!m.closed&&p,m.leave&&y,m.leave&&!m.closed&&E,m.leave&&m.closed&&g,!m.transition&&V&&x))==null?void 0:r.trim())||void 0,...RE(m)}),P=0;$==="visible"&&(P|=xn.Open),$==="hidden"&&(P|=xn.Closed),m.enter&&(P|=xn.Opening),m.leave&&(P|=xn.Closing);let Z=fn();return J.createElement(Zo.Provider,{value:U},J.createElement(FE,{value:P},Z({ourProps:T,theirProps:S,defaultTag:dp,features:hp,visible:$==="visible",name:"Transition.Child"})))}function p2(n,e){let{show:t,appear:r=!1,unmount:s=!0,...i}=n,o=I.useRef(null),a=lp(n),c=kn(...a?[o,e]:e===null?[]:[e]);Ii();let d=Yo();if(t===void 0&&d!==null&&(t=(d&xn.Open)===xn.Open),t===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[h,p]=I.useState(t?"visible":"hidden"),x=up(()=>{t||p("hidden")}),[y,E]=I.useState(!0),g=I.useRef([t]);Vt(()=>{y!==!1&&g.current[g.current.length-1]!==t&&(g.current.push(t),E(!1))},[g,t]);let S=I.useMemo(()=>({show:t,appear:r,initial:y}),[t,r,y]);Vt(()=>{t?p("visible"):!Jo(x)&&o.current!==null&&p("hidden")},[t,x]);let A={unmount:s},k=Xe(()=>{var B;y&&E(!1),(B=n.beforeEnter)==null||B.call(n)}),M=Xe(()=>{var B;y&&E(!1),(B=n.beforeLeave)==null||B.call(n)}),O=fn();return J.createElement(Zo.Provider,{value:x},J.createElement(Qo.Provider,{value:S},O({ourProps:{...A,as:I.Fragment,children:J.createElement(fp,{ref:c,...A,...i,beforeEnter:k,beforeLeave:M})},theirProps:{},defaultTag:I.Fragment,features:hp,visible:h==="visible",name:"Transition"})))}function m2(n,e){let t=I.useContext(Qo)!==null,r=Yo()!==null;return J.createElement(J.Fragment,null,!t&&r?J.createElement(Rl,{ref:e,...n}):J.createElement(fp,{ref:e,...n}))}let Rl=tn(p2),fp=tn(f2),hu=tn(m2),so=Object.assign(Rl,{Child:hu,Root:Rl});var g2=(n=>(n[n.Open=0]="Open",n[n.Closed=1]="Closed",n))(g2||{}),y2=(n=>(n[n.SetTitleId=0]="SetTitleId",n))(y2||{});let w2={0(n,e){return n.titleId===e.id?n:{...n,titleId:e.id}}},fu=I.createContext(null);fu.displayName="DialogContext";function Xo(n){let e=I.useContext(fu);if(e===null){let t=new Error(`<${n} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,Xo),t}return e}function b2(n,e){return Mr(e.type,w2,n,e)}let Uh=tn(function(n,e){let t=I.useId(),{id:r=`headlessui-dialog-${t}`,open:s,onClose:i,initialFocus:o,role:a="dialog",autoFocus:c=!0,__demoMode:d=!1,unmount:h=!1,...p}=n,x=I.useRef(!1);a=function(){return a==="dialog"||a==="alertdialog"?a:(x.current||(x.current=!0,console.warn(`Invalid role [${a}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let y=Yo();s===void 0&&y!==null&&(s=(y&xn.Open)===xn.Open);let E=I.useRef(null),g=kn(E,e),S=Ai(E),A=s?0:1,[k,M]=I.useReducer(b2,{titleId:null,descriptionId:null,panelRef:I.createRef()}),O=Xe(()=>i(!1)),B=Xe(L=>M({type:0,id:L})),z=Ii()?A===0:!1,[V,H]=YE(),F={get current(){var L;return(L=k.panelRef.current)!=null?L:E.current}},$=op(),{resolveContainers:q}=e2({mainTreeNode:$,portals:V,defaultContainers:[F]}),Y=y!==null?(y&xn.Closing)===xn.Closing:!1;dE(d||Y?!1:z,{allowed:Xe(()=>{var L,f;return[(f=(L=E.current)==null?void 0:L.closest("[data-headlessui-portal]"))!=null?f:null]}),disallowed:Xe(()=>{var L;return[(L=$==null?void 0:$.closest("body > *:not(#headlessui-portal-root)"))!=null?L:null]})}),NE(z,q,L=>{L.preventDefault(),O()}),JE(z,S==null?void 0:S.defaultView,L=>{L.preventDefault(),L.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),O()}),TE(d||Y?!1:z,S,q),hE(z,E,O);let[_,u]=nE(),b=I.useMemo(()=>[{dialogState:A,close:O,setTitleId:B,unmount:h},k],[A,k,O,B,h]),N=I.useMemo(()=>({open:A===0}),[A]),j={ref:g,id:r,role:a,tabIndex:-1,"aria-modal":d?void 0:A===0?!0:void 0,"aria-labelledby":k.titleId,"aria-describedby":_,unmount:h},R=!XE(),U=Lr.None;z&&!d&&(U|=Lr.RestoreFocus,U|=Lr.TabLock,c&&(U|=Lr.AutoFocus),R&&(U|=Lr.InitialFocus));let K=fn();return J.createElement(UE,null,J.createElement(Ph,{force:!0},J.createElement(ZE,null,J.createElement(fu.Provider,{value:b},J.createElement(sp,{target:E},J.createElement(Ph,{force:!1},J.createElement(u,{slot:N},J.createElement(H,null,J.createElement(i2,{initialFocus:o,initialFocusFallback:E,containers:q,features:U},J.createElement(cE,{value:O},K({ourProps:j,theirProps:p,slot:N,defaultTag:x2,features:v2,visible:A===0,name:"Dialog"})))))))))))}),x2="div",v2=xo.RenderStrategy|xo.Static;function S2(n,e){let{transition:t=!1,open:r,...s}=n,i=Yo(),o=n.hasOwnProperty("open")||i!==null,a=n.hasOwnProperty("onClose");if(!o&&!a)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!o)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!a)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!i&&typeof n.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${n.open}`);if(typeof n.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${n.onClose}`);return(r!==void 0||t)&&!s.static?J.createElement(Fh,null,J.createElement(so,{show:r,transition:t,unmount:s.unmount},J.createElement(Uh,{ref:e,...s}))):J.createElement(Fh,null,J.createElement(Uh,{ref:e,open:r,...s}))}let E2="div";function N2(n,e){let t=I.useId(),{id:r=`headlessui-dialog-panel-${t}`,transition:s=!1,...i}=n,[{dialogState:o,unmount:a},c]=Xo("Dialog.Panel"),d=kn(e,c.panelRef),h=I.useMemo(()=>({open:o===0}),[o]),p=Xe(S=>{S.stopPropagation()}),x={ref:d,id:r,onClick:p},y=s?hu:I.Fragment,E=s?{unmount:a}:{},g=fn();return J.createElement(y,{...E},g({ourProps:x,theirProps:i,slot:h,defaultTag:E2,name:"Dialog.Panel"}))}let M2="div";function j2(n,e){let{transition:t=!1,...r}=n,[{dialogState:s,unmount:i}]=Xo("Dialog.Backdrop"),o=I.useMemo(()=>({open:s===0}),[s]),a={ref:e,"aria-hidden":!0},c=t?hu:I.Fragment,d=t?{unmount:i}:{},h=fn();return J.createElement(c,{...d},h({ourProps:a,theirProps:r,slot:o,defaultTag:M2,name:"Dialog.Backdrop"}))}let A2="h2";function I2(n,e){let t=I.useId(),{id:r=`headlessui-dialog-title-${t}`,...s}=n,[{dialogState:i,setTitleId:o}]=Xo("Dialog.Title"),a=kn(e);I.useEffect(()=>(o(r),()=>o(null)),[r,o]);let c=I.useMemo(()=>({open:i===0}),[i]),d={ref:a,id:r};return fn()({ourProps:d,theirProps:s,slot:c,defaultTag:A2,name:"Dialog.Title"})}let C2=tn(S2),T2=tn(N2);tn(j2);let _2=tn(I2),Kn=Object.assign(C2,{Panel:T2,Title:_2,Description:oE});const k2=({job:n,onClick:e})=>l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 cursor-pointer hover:bg-gray-700 transition-colors",onClick:()=>e(n),children:[l.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:n.title}),l.jsx("p",{className:"text-gray-400 mb-4",children:n.description}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("span",{className:"text-blue-400",children:["$",n.price]}),l.jsx("span",{className:"text-gray-400",children:n.location})]})]}),L2=({listing:n})=>{var s,i,o;const e=((s=n.nft)==null?void 0:s.name)||n.nft_name||"Unnamed NFT",t=((i=n.nft)==null?void 0:i.description)||n.nft_description||"No description available",r=((o=n.nft)==null?void 0:o.image_url)||n.image_url||"/placeholder-nft.png";return l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[l.jsx("img",{src:r,alt:e,className:"w-full aspect-square object-cover rounded-lg mb-4"}),l.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:e}),l.jsx("p",{className:"text-gray-400 mb-4",children:t}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"text-blue-400 font-bold",children:[n.price," XRV"]}),l.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg text-white",children:"Purchase"})]})]})},R2=()=>{const{user:n,isAuthenticated:e}=Ct(),[t,r]=I.useState([]),[s,i]=I.useState(!0),[o,a]=I.useState(null),[c,d]=I.useState(null),[h,p]=I.useState(!1),[x,y]=I.useState([]),[E,g]=I.useState(""),[S,A]=I.useState("all"),k=async()=>{try{const H=await fetch("http://localhost:4000/api/v1/jobs/public",{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,Accept:"application/json"}});if(!H.ok)throw new Error("Failed to load jobs");const $=(await H.json()).jobs.filter(q=>q.status!=="cancelled");r($)}catch{a("Failed to load jobs")}finally{i(!1)}},M=async()=>{if(!e){a("Please login to view marketplace items"),i(!1);return}try{const H=localStorage.getItem("accessToken");if(!H)throw new Error("No access token found");const[F,$]=await Promise.all([fetch("http://localhost:4000/api/v1/jobs/public",{headers:{Authorization:`Bearer ${H}`,Accept:"application/json"}}),fetch("http://localhost:4000/api/v1/marketplace/listings",{headers:{Authorization:`Bearer ${H}`,Accept:"application/json"}})]);if(!F.ok||!$.ok)throw new Error("Failed to load marketplace items");const q=await F.json(),Y=await $.json(),_=[...q.jobs.map(u=>({...u,type:"job"})),...Y.data.map(u=>({...u,type:"nft_listing"}))];y(_)}catch(H){a(H instanceof Error?H.message:"Failed to load marketplace items")}finally{i(!1)}};I.useEffect(()=>{e&&M()},[e]);const O=async(H,F)=>{try{if(!(n!=null&&n.id))throw new Error("Please login to apply for jobs");console.log("Submitting application with data:",{userId:n.id,jobId:H,applicationData:F});const $=await fetch(`http://localhost:4000/api/v1/jobs/${H}/apply`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({applicant:{userId:n.id,name:n.name||"Anonymous"},application:{coverLetter:F.coverLetter,proposedRate:F.proposedRate,estimatedDuration:F.estimatedDuration,portfolioLinks:F.portfolioLinks,submittedAt:new Date().toISOString(),status:"pending"}})}),q=await $.json();if(!$.ok)throw new Error(q.message||"Failed to apply for job");return window.location.href="/jobs",q}catch($){throw console.error("Application error:",$),new Error($ instanceof Error?$.message:"Failed to apply for job")}},B=async H=>{try{if(!(await fetch(`http://localhost:4000/api/v1/jobs/${H}/save`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"},body:JSON.stringify({userId:n==null?void 0:n.id})})).ok)throw new Error("Failed to save job");await k()}catch{throw new Error("Failed to save job")}},z=H=>{d(H),window.innerWidth<1024&&p(!0)},V=H=>H.type==="nft_listing"?l.jsx(L2,{listing:H},H.id):l.jsx(k2,{job:H,onClick:z},H.id);return l.jsx(hn,{children:l.jsxs("div",{className:"container mx-auto px-4 py-8",children:[l.jsx("div",{className:"mb-6",children:l.jsx("input",{type:"text",placeholder:"Search for jobs...",className:"w-full p-3 rounded-lg bg-gray-700 text-white border border-gray-600 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:E,onChange:H=>g(H.target.value)})}),l.jsxs("div",{className:"lg:flex lg:gap-8",children:[l.jsx("div",{className:"w-full lg:w-1/4 mb-6 lg:mb-0",children:l.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[l.jsx("h2",{className:"text-xl font-semibold mb-4 text-white",children:"Filters"}),l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"text-lg font-medium mb-2 text-white",children:"Category"}),l.jsxs("select",{className:"w-full p-2 rounded bg-gray-700 text-white border border-gray-600",value:S,onChange:H=>A(H.target.value),children:[l.jsx("option",{value:"all",children:"All Categories"}),l.jsx("option",{value:"web",children:"Web Development"}),l.jsx("option",{value:"mobile",children:"Mobile Development"}),l.jsx("option",{value:"design",children:"UI/UX Design"}),l.jsx("option",{value:"writing",children:"Content Writing"})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"text-lg font-medium mb-2 text-white",children:"Experience Level"}),l.jsxs("div",{className:"space-y-2 text-white",children:[l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",className:"mr-2"})," Entry Level"]}),l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",className:"mr-2"})," Intermediate"]}),l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",className:"mr-2"})," Expert"]})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"text-lg font-medium mb-2 text-white",children:"Hourly Rate"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"number",placeholder:"Min",className:"w-1/2 p-2 rounded bg-gray-700 text-white border border-gray-600"}),l.jsx("input",{type:"number",placeholder:"Max",className:"w-1/2 p-2 rounded bg-gray-700 text-white border border-gray-600"})]})]})]})}),l.jsx("div",{className:"w-full lg:w-3/4",children:s?l.jsx("div",{children:"Loading marketplace items..."}):o?l.jsx("div",{className:"text-red-400",children:o}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.map(V)})})]}),l.jsx("div",{className:"hidden lg:block lg:col-span-1",children:c&&l.jsx(kh,{...c,onApply:O,onSave:B})}),l.jsx(so,{appear:!0,show:h,as:I.Fragment,children:l.jsxs(Kn,{as:"div",className:"relative z-50 lg:hidden",onClose:()=>p(!1),children:[l.jsx(so.Child,{as:I.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75"})}),l.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:l.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:l.jsx(so.Child,{as:I.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:l.jsxs(Kn.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-gray-800 p-6 text-left align-middle shadow-xl transition-all",children:[c&&l.jsx(kh,{...c,onApply:O,onSave:B}),l.jsx("button",{className:"mt-4 w-full bg-gray-700 text-white rounded-lg px-4 py-2",onClick:()=>p(!1),children:"Close"})]})})})})]})})]})})},B2=({data:n})=>l.jsx("div",{children:l.jsx("p",{className:"text-gray-400",children:"Price history chart coming soon"})}),O2=({data:n})=>l.jsx("div",{children:l.jsx("p",{className:"text-gray-400",children:"Distribution chart coming soon"})}),Ki=n=>n>=1e9?(n/1e9).toFixed(2)+"B":n>=1e6?(n/1e6).toFixed(2)+"M":n>=1e3?(n/1e3).toFixed(2)+"K":n.toString(),D2=()=>{const[n,e]=I.useState({price:0,marketCap:0,volume24h:0,circulatingSupply:0,totalSupply:0,holders:0,activeAddresses:0,transactions24h:0,stakingRatio:0}),[t,r]=I.useState(!0),[s,i]=I.useState(null);return I.useEffect(()=>{(async()=>{try{const c=await(await fetch(`http://localhost:4000/api/v1/tokenomics/metrics/${tokenId}`)).json();e(c)}catch{i("Failed to load token metrics")}finally{r(!1)}})()},[]),l.jsx(hn,{children:l.jsxs("div",{className:"w-full max-w-[100vw] overflow-x-hidden px-4 md:px-6 lg:px-8 py-6",children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Token Analytics"}),l.jsx("p",{className:"text-gray-400",children:"Comprehensive analytics for your token"})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[l.jsxs("div",{className:"bg-gray-800 p-4 md:p-6 rounded-lg",children:[l.jsx("div",{className:"text-sm font-medium text-gray-400 mb-2",children:"Current Price"}),l.jsxs("div",{className:"text-2xl font-bold text-white",children:["$",n.price.toFixed(4)]})]}),l.jsxs("div",{className:"bg-gray-800 p-4 md:p-6 rounded-lg",children:[l.jsx("div",{className:"text-sm font-medium text-gray-400 mb-2",children:"Market Cap"}),l.jsxs("div",{className:"text-2xl font-bold text-white",children:["$",Ki(n.marketCap)]})]}),l.jsxs("div",{className:"bg-gray-800 p-4 md:p-6 rounded-lg",children:[l.jsx("div",{className:"text-sm font-medium text-gray-400 mb-2",children:"24h Volume"}),l.jsxs("div",{className:"text-2xl font-bold text-white",children:["$",Ki(n.volume24h)]})]}),l.jsxs("div",{className:"bg-gray-800 p-4 md:p-6 rounded-lg",children:[l.jsx("div",{className:"text-sm font-medium text-gray-400 mb-2",children:"Holders"}),l.jsx("div",{className:"text-2xl font-bold text-white",children:n.holders.toLocaleString()})]})]}),l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-8",children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Supply Metrics"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Circulating Supply"}),l.jsxs("div",{className:"text-lg font-bold text-white",children:[Ki(n.circulatingSupply)," tokens"]})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Total Supply"}),l.jsxs("div",{className:"text-lg font-bold text-white",children:[Ki(n.totalSupply)," tokens"]})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Staking Ratio"}),l.jsxs("div",{className:"text-lg font-bold text-white",children:[n.stakingRatio.toFixed(2),"%"]})]})]})]}),l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-8",children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Price History"}),l.jsxs("div",{className:"h-[400px]",children:[l.jsx(B2,{data:[]})," "]})]}),l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-8",children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Token Distribution"}),l.jsxs("div",{className:"h-[300px]",children:[l.jsx(O2,{data:[]})," "]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Network Activity"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-gray-400",children:"Active Addresses (24h)"}),l.jsx("span",{className:"text-white font-bold",children:n.activeAddresses})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-gray-400",children:"Transactions (24h)"}),l.jsx("span",{className:"text-white font-bold",children:n.transactions24h})]})]})]}),l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Holder Statistics"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-gray-400",children:"Total Holders"}),l.jsx("span",{className:"text-white font-bold",children:n.holders})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-gray-400",children:"Staking Participants"}),l.jsx("span",{className:"text-white font-bold",children:Math.floor(n.holders*(n.stakingRatio/100))})]})]})]})]})]})})},P2=({categories:n})=>l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:n.map(e=>l.jsxs(No,{to:`/forum/category/${e.id}`,className:"bg-gray-700 rounded-lg p-4 hover:bg-gray-600 transition-colors",children:[l.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[l.jsx("span",{className:"text-2xl text-blue-400",children:e.icon}),l.jsx("h3",{className:"text-lg font-semibold text-white",children:e.name})]}),l.jsx("p",{className:"text-gray-300 text-sm mb-4",children:e.description}),l.jsxs("div",{className:"flex justify-between text-xs text-gray-400",children:[l.jsxs("span",{children:[e.stats.totalPosts," posts"]}),l.jsxs("span",{children:[e.stats.activeUsers," active users"]})]})]},e.id))});function F2({title:n,titleId:e,...t},r){return I.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?I.createElement("title",{id:e},n):null,I.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const U2=I.forwardRef(F2),pp=({isOpen:n,onClose:e,onConfirm:t,title:r,message:s})=>l.jsxs(Kn,{open:n,onClose:e,className:"relative z-50",children:[l.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),l.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:l.jsxs(Kn.Panel,{className:"mx-auto max-w-sm rounded-lg bg-gray-800 p-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(U2,{className:"h-6 w-6 text-red-500"}),l.jsx(Kn.Title,{className:"text-lg font-semibold text-white",children:r})]}),l.jsx(Kn.Description,{className:"mt-4 text-gray-300",children:s}),l.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[l.jsx("button",{onClick:e,className:"px-4 py-2 rounded-md border border-gray-600 text-gray-300 hover:bg-gray-700",children:"Cancel"}),l.jsx("button",{onClick:()=>{t(),e()},className:"px-4 py-2 rounded-md bg-red-500 text-white hover:bg-red-600",children:"Delete"})]})]})})]}),z2=({id:n,title:e,content:t,author:r,category:s,tags:i,createdAt:o,likes:a,likedBy:c=[],replies:d,isStickied:h,onLike:p,onDelete:x,isLiking:y=!1})=>{var O;const[E,g]=I.useState(!1),{user:S}=Ct(),A=(S==null?void 0:S.id)===r.id,k=S?c.includes(S.id):!1,M=B=>{B.preventDefault(),g(!0)};return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:l.jsx(No,{to:`/forum/posts/${n}`,className:"block hover:bg-gray-750",children:l.jsxs("div",{className:`p-4 ${h?"bg-blue-900/20":"bg-gray-700"} rounded-lg hover:bg-gray-600 transition-colors`,children:[l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center",children:r.avatar?l.jsx("img",{src:r.avatar,alt:r.name,className:"w-full h-full rounded-full"}):l.jsx("span",{className:"text-white font-bold",children:((O=r==null?void 0:r.name)==null?void 0:O.charAt(0))||"?"})}),l.jsxs("div",{children:[l.jsx("div",{className:"block hover:bg-gray-750",children:e}),l.jsxs("div",{className:"text-sm text-gray-400",children:["Posted by ",r.name," (@",r.username,") • ",new Date(o).toLocaleDateString()]})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[h&&l.jsx("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-400 text-xs rounded-full",children:"Pinned"}),A&&l.jsx("button",{onClick:M,className:"px-2 py-1 bg-red-500/20 text-red-400 text-xs rounded-full hover:bg-red-500/30",children:"Delete"})]})]}),l.jsx("p",{className:"mt-3 text-gray-300 line-clamp-2",children:t}),l.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[l.jsx("div",{className:"flex space-x-2",children:i==null?void 0:i.map(B=>l.jsx("span",{className:"px-2 py-1 bg-gray-600 text-gray-300 text-xs rounded-full",children:B},B))}),l.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[l.jsxs("button",{onClick:B=>{if(B.preventDefault(),!S){rt.error("Please login to like posts");return}console.log("Like button clicked for post:",n),console.log("Current like state:",{likes:a,hasLiked:k,likedBy:c}),p(n)},disabled:y,className:`flex items-center gap-1 ${y?"opacity-50 cursor-not-allowed":k?"text-blue-400":"text-gray-400 hover:text-blue-400"}`,children:[y?"⏳":"👍"," ",a||0]}),l.jsxs("span",{className:"text-gray-400",children:[d," ",d===1?"reply":"replies"]})]})]})]})})}),l.jsx(pp,{isOpen:E,onClose:()=>g(!1),onConfirm:()=>{x(n),g(!1)},title:"Delete Post",message:"Are you sure you want to delete this post? This action cannot be undone."})]})},$2=({onSearch:n,onCategoryChange:e,onSortChange:t,selectedCategory:r,selectedSort:s})=>l.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between p-4",children:[l.jsx("div",{className:"w-full md:w-1/3",children:l.jsx("input",{type:"text",placeholder:"Search posts...",onChange:i=>n(i.target.value),className:"w-full px-4 py-2 bg-gray-700 text-white rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none"})}),l.jsxs("div",{className:"flex gap-4 w-full md:w-auto",children:[l.jsxs("select",{value:r,onChange:i=>e(i.target.value),className:"px-4 py-2 bg-gray-700 text-white rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none",children:[l.jsx("option",{value:"",children:"All Categories"}),l.jsx("option",{value:"development",children:"Development"}),l.jsx("option",{value:"business",children:"Business"}),l.jsx("option",{value:"networking",children:"Networking"}),l.jsx("option",{value:"tutorials",children:"Tutorials"}),l.jsx("option",{value:"general",children:"General"})]}),l.jsxs("select",{value:s,onChange:i=>t(i.target.value),className:"px-4 py-2 bg-gray-700 text-white rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none",children:[l.jsx("option",{value:"latest",children:"Latest"}),l.jsx("option",{value:"popular",children:"Most Popular"}),l.jsx("option",{value:"unanswered",children:"Unanswered"})]})]})]}),q2=({popularTopics:n})=>l.jsx("div",{className:"w-full lg:w-1/4 space-y-6 lg:pl-6",children:l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[l.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Popular Topics"}),l.jsx("div",{className:"space-y-4",children:n.map(e=>l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(No,{to:`/forum/post/${e.id}`,className:"text-gray-300 hover:text-white truncate flex-1",children:e.title}),l.jsxs("span",{className:"text-gray-400 text-sm",children:[e.replies||0," replies"]})]},e.id))})]})}),W2=({onSubmit:n,onCancel:e})=>{Ct();const[t,r]=I.useState({title:"",content:"",category:"general",tags:[],tagInput:""}),s=()=>{t.tagInput&&!t.tags.includes(t.tagInput)&&r(a=>({...a,tags:[...a.tags,a.tagInput],tagInput:""}))},i=a=>{r(c=>({...c,tags:c.tags.filter(d=>d!==a)}))},o=a=>{a.preventDefault(),n({title:t.title,content:t.content,category:t.category,tags:t.tags})};return l.jsxs("form",{onSubmit:o,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Title"}),l.jsx("input",{type:"text",value:t.title,onChange:a=>r(c=>({...c,title:a.target.value})),className:"w-full px-4 py-2 bg-gray-700 text-white rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Content"}),l.jsx("textarea",{value:t.content,onChange:a=>r(c=>({...c,content:a.target.value})),className:"w-full px-4 py-2 bg-gray-700 text-white rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none min-h-[200px]",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Category"}),l.jsxs("select",{value:t.category,onChange:a=>r(c=>({...c,category:a.target.value})),className:"w-full px-4 py-2 bg-gray-700 text-white rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none",children:[l.jsx("option",{value:"general",children:"General"}),l.jsx("option",{value:"development",children:"Development"}),l.jsx("option",{value:"business",children:"Business"}),l.jsx("option",{value:"networking",children:"Networking"}),l.jsx("option",{value:"tutorials",children:"Tutorials"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Tags"}),l.jsx("div",{className:"flex gap-2 mb-2",children:t.tags.map(a=>l.jsxs("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-400 rounded-full text-sm flex items-center gap-1",children:[a,l.jsx("button",{type:"button",onClick:()=>i(a),className:"hover:text-blue-300",children:"×"})]},a))}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:t.tagInput,onChange:a=>r(c=>({...c,tagInput:a.target.value})),onKeyPress:a=>a.key==="Enter"&&(a.preventDefault(),s()),className:"flex-1 px-4 py-2 bg-gray-700 text-white rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none",placeholder:"Add a tag..."}),l.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Add"})]})]}),l.jsxs("div",{className:"flex justify-end gap-4",children:[l.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-400 hover:text-white",children:"Cancel"}),l.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Create Post"})]})]})},H2=()=>{var A,k,M,O;const{user:n}=Ct();console.log("Auth context user data:",n);const[e,t]=I.useState(!1),[r,s]=I.useState(""),[i,o]=I.useState("latest"),[a,c]=I.useState(""),d=Mo(),{data:h,isLoading:p}=Zc({queryKey:["forum-posts",r,i,a],queryFn:async()=>{const B=new URLSearchParams({category:r,sort:i,search:a}),z=await fetch(`http://localhost:4000/api/v1/forum/posts?${B}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,Accept:"application/json"}});if(!z.ok)throw new Error("Failed to fetch posts");return z.json()}}),{data:x}=Zc({queryKey:["forum-categories"],queryFn:async()=>{const B=await fetch("http://localhost:4000/api/v1/forum/categories",{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,Accept:"application/json"}});if(!B.ok)throw new Error("Failed to fetch categories");return B.json()}}),y=Rr({mutationFn:async B=>{const z=await fetch("http://localhost:4000/api/v1/forum/posts",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"},body:JSON.stringify(B)});if(!z.ok)throw new Error("Failed to create post");return z.json()},onSuccess:()=>{d.invalidateQueries({queryKey:["forum-posts"]}),t(!1)}}),E=Rr({mutationFn:async B=>{const z=await fetch(`http://localhost:4000/api/v1/forum/posts/${B}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});if(!z.ok)throw new Error("Failed to delete post");return z.json()},onSuccess:()=>{d.invalidateQueries({queryKey:["forum-posts"]})}});Rr({mutationFn:async B=>{const z=await fetch(`http://localhost:4000/api/v1/forum/comments/${B}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});if(!z.ok)throw new Error("Failed to delete comment");return z.json()},onSuccess:()=>{d.invalidateQueries({queryKey:["forum-posts"]})}});const g=Rr({mutationFn:async B=>{try{const z=await fetch(`http://localhost:4000/api/v1/forum/posts/${B}/like`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,Accept:"application/json"}});if(z.status===401)throw localStorage.removeItem("accessToken"),window.location.href="/login",new Error("Session expired. Please login again.");const V=await z.json();if(!z.ok)throw new Error(V.message||"Failed to like post");return V}catch(z){throw console.error("Like error:",z),z}},onSuccess:B=>{d.invalidateQueries({queryKey:["forum-posts"]})},onError:B=>{console.error("Like mutation error:",B),Tc.error(B.message||"Failed to like post")}}),S=async B=>{try{console.log("Creating post with user data:",n),console.log("Post data before sending:",B);const z={...B,author:{id:n.id,name:n.name,username:n.username,avatar:n.avatar}};console.log("Final post data:",z),await y.mutateAsync(z)}catch(z){console.error("Failed to create post:",z)}};return l.jsxs(hn,{children:[l.jsxs("div",{className:"container mx-auto px-4 py-8",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:"Forum"}),l.jsx("button",{onClick:()=>t(!0),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Create Post"})]}),l.jsx(P2,{categories:(x==null?void 0:x.data)||[]}),l.jsx($2,{onCategoryChange:s,onSortChange:o,onSearchChange:c}),p?l.jsx("div",{children:"Loading..."}):l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsx("div",{className:"lg:col-span-2",children:l.jsx("div",{className:"space-y-4",children:(k=(A=h==null?void 0:h.data)==null?void 0:A.posts)==null?void 0:k.map(B=>l.jsx(z2,{...B,onLike:async z=>{try{await g.mutateAsync(z)}catch{}},isLiking:g.isPending,onDelete:async z=>{try{await E.mutateAsync(z),Tc.success("Post deleted successfully")}catch(V){console.error("Failed to delete post:",V),Tc.error("Failed to delete post")}}},B.id))})}),l.jsx(q2,{popularTopics:((O=(M=h==null?void 0:h.data)==null?void 0:M.posts)==null?void 0:O.slice(0,5))||[]})]})]}),l.jsxs(Kn,{open:e,onClose:()=>t(!1),className:"relative z-50",children:[l.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),l.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:l.jsxs(Kn.Panel,{className:"mx-auto max-w-2xl w-full bg-gray-800 rounded-lg p-6",children:[l.jsx(Kn.Title,{className:"text-xl font-bold text-white mb-6",children:"Create New Post"}),l.jsx(W2,{onSubmit:S,onCancel:()=>t(!1),isLoading:y.isPending})]})})]})]})},K2=({comments:n=[],onAddComment:e,onLikeComment:t,onDeleteComment:r,isLiking:s={}})=>{const{user:i}=Ct(),[o,a]=I.useState(null),[c,d]=I.useState(""),[h,p]=I.useState(null),x=n.filter(g=>g.status!=="deleted"),y=async(g,S)=>{g.preventDefault(),c.trim()&&(await e(c,S),d(""),a(null))},E=(g,S=0)=>{var k,M,O,B,z,V,H,F,$;if(!g||g.status==="deleted")return null;const A=(i==null?void 0:i.id)===g.author.id;return l.jsxs("div",{className:`${S>0?"ml-8 border-l border-gray-700":""} py-4`,children:[l.jsxs("div",{className:"flex gap-4",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center",children:(k=g.author)!=null&&k.avatar?l.jsx("img",{src:g.author.avatar,alt:((M=g.author)==null?void 0:M.name)||"User",className:"w-full h-full rounded-full"}):l.jsx("span",{className:"text-white font-bold",children:(O=g.author)!=null&&O.name?g.author.name.charAt(0):"?"})}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("span",{className:"font-medium text-white",children:((B=g.author)==null?void 0:B.name)||((z=g.author)==null?void 0:z.username)||"Anonymous"}),((V=g.author)==null?void 0:V.username)&&l.jsxs("span",{className:"text-sm text-gray-400",children:["@",g.author.username]})]}),l.jsx("p",{className:"text-gray-300 mb-2",children:g.content}),l.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[l.jsxs("button",{onClick:()=>t(g.id),disabled:s==null?void 0:s[g.id],className:`flex items-center gap-1 ${s!=null&&s[g.id]?"opacity-50 cursor-not-allowed":(H=g.likedBy)!=null&&H.includes(i==null?void 0:i.id)?"text-blue-400":"text-gray-400 hover:text-blue-400"}`,children:[s!=null&&s[g.id]?"⏳":"👍"," ",g.likes||0]}),l.jsx("button",{onClick:()=>a(g.id),className:"text-gray-400 hover:text-blue-400",children:"Reply"})]}),o===g.id&&l.jsxs("form",{onSubmit:q=>y(q,g.id),className:"mt-4",children:[l.jsx("textarea",{value:c,onChange:q=>d(q.target.value),className:"w-full px-4 py-2 bg-gray-700 text-white rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none",placeholder:"Write a reply...",rows:3}),l.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[l.jsx("button",{type:"button",onClick:()=>a(null),className:"px-3 py-1 text-gray-400 hover:text-white",children:"Cancel"}),l.jsx("button",{type:"submit",className:"px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Reply"})]})]}),A&&l.jsx("button",{onClick:()=>p(g.id),className:"text-red-400 hover:text-red-500",children:"Delete"})]})]}),($=(F=g.replies)==null?void 0:F.filter(q=>q.status!=="deleted"))==null?void 0:$.map(q=>E(q,S+1)),l.jsx(pp,{isOpen:h===g.id,onClose:()=>p(null),onConfirm:()=>{console.log("Delete triggered for comment:",g.id),r(g.id),p(null)},title:"Delete Comment",message:"Are you sure you want to delete this comment? This action cannot be undone."})]},g.id)};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("form",{onSubmit:g=>y(g),className:"mb-6",children:[l.jsx("textarea",{value:c,onChange:g=>d(g.target.value),className:"w-full px-4 py-2 bg-gray-700 text-white rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none",placeholder:"Write a comment...",rows:4}),l.jsx("div",{className:"flex justify-end mt-2",children:l.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Post Comment"})})]}),l.jsx("div",{className:"divide-y divide-gray-700",children:x.map(g=>E(g))})]})},V2=()=>{var g,S,A,k;const n=Eo(),{id:e}=bp(),t=Mo();Ct();const[r,s]=I.useState({}),{data:i,isLoading:o,error:a}=Zc({queryKey:["forum-post",e],queryFn:async()=>{var M;console.log("Fetching post data...");try{const O=await fetch(`http://localhost:4000/api/v1/forum/posts/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,Accept:"application/json"}});if(!O.ok){const z=await O.json();throw new Error(z.message||"Failed to fetch post")}const B=await O.json();return console.log("Raw post response:",B),console.log("Comments in response:",(M=B==null?void 0:B.data)==null?void 0:M.comments),B}catch(O){throw console.error("Error fetching post:",O),O}},retry:1,staleTime:3e4}),c=Rr({mutationFn:async({content:M,parentId:O})=>{const B=await fetch(`http://localhost:4000/api/v1/forum/posts/${e}/comments`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"},body:JSON.stringify({content:M,parentId:O})});if(!B.ok)throw new Error("Failed to create comment");return B.json()},onSuccess:()=>{t.invalidateQueries({queryKey:["forum-post",e]})}}),d=Rr({mutationFn:async M=>{try{console.log("Starting like mutation for comment:",M);const O=await fetch(`http://localhost:4000/api/v1/forum/comments/${M}/like`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,Accept:"application/json"}});if(O.status===401)throw localStorage.removeItem("accessToken"),window.location.href="/login",new Error("Session expired. Please login again.");const B=await O.json();if(console.log("Like comment response:",B),!O.ok)throw new Error(B.message||"Failed to like comment");return B}catch(O){throw console.error("Like comment error:",O),O}},onSuccess:M=>{console.log("Like comment mutation succeeded:",M),t.invalidateQueries({queryKey:["forum-post",e]})},onError:M=>{console.error("Like comment mutation error:",M),rt.error(M.message||"Failed to like comment")}}),h=Rr({mutationFn:async M=>{console.log("Starting delete mutation for comment:",M);const O=await fetch(`http://localhost:4000/api/v1/forum/comments/${M}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});if(!O.ok)throw console.error("Delete response not OK:",await O.text()),new Error("Failed to delete comment");const B=await O.json();return console.log("Delete response:",B),B},onSuccess:M=>{console.log("Delete mutation success, invalidating queries"),t.invalidateQueries({queryKey:["forum-post",e]}),t.invalidateQueries({queryKey:["forum-posts"]}),rt.success("Comment deleted successfully")},onError:M=>{console.error("Delete comment error:",M),rt.error("Failed to delete comment")}}),p=async(M,O)=>{try{await c.mutateAsync({content:M,parentId:O})}catch(B){console.error("Failed to add comment:",B)}},x=async M=>{try{s(O=>({...O,[M]:!0})),await d.mutateAsync(M)}catch(O){console.error("Failed to like comment:",O)}finally{s(O=>({...O,[M]:!1}))}},y=async M=>{console.log("HandleDeleteComment called with:",M);try{await h.mutateAsync(M),console.log("Delete mutation completed successfully")}catch(O){console.error("Failed to delete comment:",O)}};if(I.useEffect(()=>{var M,O,B,z;console.log("Post data updated:",{comments:(O=(M=i==null?void 0:i.data)==null?void 0:M.comments)==null?void 0:O.map(V=>({id:V.id,status:V.status,content:V.content})),commentCount:(z=(B=i==null?void 0:i.data)==null?void 0:B.comments)==null?void 0:z.length,rawData:i==null?void 0:i.data})},[i]),o)return l.jsx(hn,{children:l.jsx("div",{className:"container mx-auto px-4 py-8",children:l.jsx("div",{children:"Loading..."})})});const E=i==null?void 0:i.data;return E?l.jsx(hn,{children:l.jsxs("div",{className:"container mx-auto px-4 py-8",children:[l.jsxs("button",{onClick:()=>n("/forum"),className:"mb-6 flex items-center gap-2 text-blue-400 hover:text-blue-500",children:[l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Back to Forum"]}),l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center",children:(g=E.author)!=null&&g.avatar?l.jsx("img",{src:E.author.avatar,alt:E.author.name,className:"w-full h-full rounded-full"}):l.jsx("span",{className:"text-white font-bold",children:((A=(S=E.author)==null?void 0:S.name)==null?void 0:A.charAt(0))||"?"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:E.title}),l.jsxs("div",{className:"text-sm text-gray-400",children:["Posted by ",((k=E.author)==null?void 0:k.name)||"Unknown"," • ",new Date(E.createdAt).toLocaleDateString()]})]})]}),l.jsx("p",{className:"text-gray-300 mb-6",children:E.content}),l.jsx("div",{className:"flex gap-2 mb-8",children:E.tags.map(M=>l.jsx("span",{className:"px-2 py-1 bg-gray-700 text-gray-300 text-sm rounded-full",children:M},M))}),l.jsxs("div",{className:"border-t border-gray-700 pt-6",children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Comments"}),l.jsx(K2,{comments:E.comments||[],onAddComment:p,onLikeComment:x,onDeleteComment:y,isLiking:r})]})]})]})}):l.jsx(hn,{children:l.jsx("div",{className:"container mx-auto px-4 py-8",children:l.jsx("div",{children:"Post not found"})})})},G2=new zp;function Y2(){const n=el.Devnet,e=Rb(n),t=[new L1,new U1,new $1];return l.jsx(Ob,{endpoint:e,children:l.jsx(C1,{wallets:t,autoConnect:!0,children:l.jsx(G1,{children:l.jsx(xp,{children:l.jsx(Kp,{client:G2,children:l.jsx(sm,{children:l.jsxs(vp,{children:[l.jsx(Qt,{path:"/login",element:l.jsx(Z1,{})}),l.jsx(Qt,{path:"/dashboard",element:l.jsx(Sn,{children:l.jsx(Kv,{})})}),l.jsx(Qt,{path:"/wallet",element:l.jsx(Sn,{children:l.jsx(IS,{})})}),l.jsx(Qt,{path:"/nft-assets",element:l.jsx(Sn,{children:l.jsx(OS,{})})}),l.jsx(Qt,{path:"/jobs",element:l.jsx(Sn,{children:l.jsx(FS,{})})}),l.jsx(Qt,{path:"/token-creator",element:l.jsx(Sn,{children:l.jsx(zS,{})})}),l.jsx(Qt,{path:"/settings",element:l.jsx(Sn,{children:l.jsx($S,{})})}),l.jsx(Qt,{path:"/marketplace",element:l.jsx(Sn,{children:l.jsx(R2,{})})}),l.jsx(Qt,{path:"/tokenomics",element:l.jsx(Sn,{children:l.jsx(D2,{})})}),l.jsxs(Qt,{path:"/forum",children:[l.jsx(Qt,{index:!0,element:l.jsx(Sn,{children:l.jsx(H2,{})})}),l.jsx(Qt,{path:"posts/:id",element:l.jsx(Sn,{children:l.jsx(V2,{})})})]}),l.jsx(Qt,{path:"/",element:l.jsx(Oc,{to:"/dashboard",replace:!0})}),l.jsx(Qt,{path:"*",element:l.jsx(Oc,{to:"/dashboard",replace:!0})})]})})})})})})})}jp.createRoot(document.getElementById("root")).render(l.jsx(J.StrictMode,{children:l.jsx(Y2,{})}));export{pe as P,Fn as S,bn as T,mi as V,ql as a,Ex as b,Ig as c,Lt as d,ps as e,_f as r};
//# sourceMappingURL=index-BTBseN6G.js.map
